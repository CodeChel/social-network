{"version":3,"sources":["components/SideBar/sideBar.module.css","components/common/Preloader/preloader.module.css","components/Profile/ProfileInfo/ProfileDescription/AboutProfile.module.css","components/Profile/Posts/posts.module.css","API/api.js","img/F_icon.png","assets/img/Rolling-1s-200px.svg","components/Profile/ProfileInfo/ProfileDescription/profileDescription.module.css","components/common/PopUp/popUp.module.css","components/Profile/Profile.module.css","components/common/FormControls/FormControls.js","utils/validators/validator.js","components/common/PopUp/popUpMessage.module.css","components/Footer/footer.module.css","components/common/Preloader/Preloader.jsx","assets/img/ava.jpg","serviceWorker.js","components/SideBar/SideBar.jsx","components/Profile/ProfileInfo/ProfileDescription/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileDescription/ProfileEditorReduxForm.jsx","components/Profile/ProfileInfo/ProfileDescription/AboutProfile.jsx","components/Profile/ProfileInfo/ProfileDescription/ProfileDescription.jsx","components/common/PopUp/popUp.jsx","components/common/PopUp/PopUpMessage.jsx","components/common/PopUp/popUpAvatar.jsx","components/Profile/ProfileInfo/ProfileAvatar/ProfileAvatar.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/Posts/AddPostFormWithConnect.jsx","components/Profile/Posts/Posts.jsx","components/Profile/Profile.jsx","redux/profile-reducer.js","components/Profile/profile-selectors.js","components/Profile/ProfileContainer.jsx","components/News/News.jsx","components/Communities/Communities.jsx","components/Events/Events.jsx","components/Pages/Pages.jsx","components/Manage/Manage.jsx","redux/friends-reducer.js","components/Friends/User.jsx","components/Friends/Users.jsx","components/Friends/user-selectors.js","components/Friends/UsersContainer.jsx","redux/auth-reducer.js","components/Footer/Footer.jsx","components/Footer/footer-selector.js","components/Footer/FooterContainer.jsx","components/Login/Login.jsx","redux/app-reducer.js","redux/redux-store.js","hoc/withSuspense.js","App.js","index.js","components/Friends/Friends.module.css","components/Profile/ProfileInfo/ProfileAvatar/ProfilePhoto.module.css","components/Profile/ProfileInfo/profileInfo.module.css","components/Profile/ProfileInfo/ProfileDescription/profileStatus.module.css","components/common/FormControls/FormControls.module.css","components/Login/LoginPage.module.css","redux/messages-reducer.js","utils/timeFormat.js","components/common/EmojiPicker/EmojiPicker.jsx","hoc/withAuthRedirect.js","components/common/PopUp/popupAvatar.module.css"],"names":["module","exports","instance","axios","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","postFollow","id","post","deleteFollow","delete","getFollow","authAPI","getAuth","logIn","dataForm","email","login","password","rememberMe","captcha","logOut","securityAPI","getCaptcha","profileAPI","getProfile","getUserStatus","updateUserStatus","status","put","updatePhoto","photo","formData","FormData","append","saveProfileData","profile","FormConstructor","props","hasError","touched","error","className","styles","formControl","element","Input","input","meta","el","React","createElement","Textarea","createField","placeholder","name","validators","component","label","text","formCustom","validate","htmlFor","required","value","maxLengthCreator","maxLength","length","voidValue","trim","undefined","Preloader","preloaderContainer","preloader","src","alt","Boolean","window","location","hostname","match","connect","state","authId","auth","menuContainer","logo","to","imgLogo","navBar","menu","headList","news","activeClassName","active","messages","friends","communities","events","pages","manage","shortcuts","google","target","rel","href","combinator","amazon","ProfileStatusWithHooks","updateStatus","isMyPage","useState","editMode","setEditMode","setStatus","nodeStatus","useRef","useEffect","handlerClick","e","current","contains","document","removeEventListener","addEventListener","statusWrap","statusContainer","onClick","slice","changeStatusContainer","ref","inputStatus","autoFocus","onChange","currentTarget","EmojiPicker","saveButton","ProfileEditorReduxForm","reduxForm","form","handleSubmit","onSubmit","nameInfo","Field","type","checked","colls","rows","Object","keys","contacts","map","key","nameField","when","dirty","message","save","AboutProfile","setEditProfile","isEditMode","container","header","aboutMe","role","edit","row","rowInfo","lookingForAJob","lookingForAJobDescription","some","i","filter","initialValues","ProfileDescrition","fullName","PopUp","Component","closePopup","popup","AddMessagePopupFormRedux","messageForm","buttonForm","messageFromPopUp","user","userId","headerPopup","textHeader","linkMessage","popupBody","userHeader","photos","small","avatar","popupAvatar","usernameBlock","popupUserName","onlineStatus","PopUpAvatar","avatr","ProfileAvatar","savePhoto","setPopupAvatar","photoLarge","avatarContainer","avatarUpdate","avatarCustom","changePhoto","changePhotoLabel","changePhotoInput","files","ProfileInfo","isFollowed","sendMessageMode","avatarPopup","followUnfollow","profileInfoContainer","profileInfo","profileAvatarContainer","large","send","setMessageMode","PopUpMessage","maxLength500","FormPostRedux","onSubmitSuccess","result","dispatch","reset","formPost","bottom","right","width","formName","fieldName","Form","addPostForm","button","AddPostFormWithConnect","Posts","postsContainer","sendPostThunk","posts","selectSort","sortByTime","sortByLikes","p","itemPost","headerPost","nameBlock","timePost","timeFormat","postBody","hidenMenu","deletePost","menuItem","postFooter","likesBody","likesWrapper","liked","likesToggle","likes","likesCount","likesCountLiked","Profile","savePhotoThunk","updateStatusThunk","SEND_POST","SET_USER_PROFILE","SET_USER_STATUS","SET_EDIT_PROFILE","SORT_BY_TIME","SORT_BY_LIKES","IS_USER_EXIST","options","year","month","day","timezone","hour","minute","initialState","time","currentTextPost","isFetching","isUserExist","toggleIsFetching","mode","setUserProfile","setUserStatus","setFollowUnfollow","isFollow","setIsUserExist","payload","getProfileThunk","a","async","catch","profileReducer","action","isSendMode","isPopup","idPost","isLiked","index","sort","b","profileStatus","profilePage","profilePosts","getIsAuth","isAuth","getAuthId","getIsEditMode","getFollowed","getIsFetching","getIsSendMode","getIsAvatarPopup","getIsUserExist","ProfileContainer","this","params","getStatusThunk","getFollowedThunk","resetProfile","refreshProfile","prevProps","prevState","IsUserExist","toString","compose","getState","Date","toLocaleString","now","sendPost","resultCode","number","indexOf","test","toLowerCase","stopSubmit","withRouter","withAuthRedirect","News","Communities","Events","Pages","Manage","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_COUNT","SET_MESSAGE_MODE","ADD_MORE_USER","users","totalUsersCout","followingInProgress","messageMode","messageId","follow","unfollow","setUsers","setCurrentPage","setTotalUsersCount","toggleFollowingProgress","followUnfollowFlow","apiMethod","actionCreator","friendsReducer","u","followed","User","userContainer","usersAvatar","userMenu","hideMenu","disabled","userInfo","userName","userStatus","Users","totalUsersCount","onPageChanged","isMessageMode","getMoreUsers","list","getElementById","scrollY","innerHeight","clientHeight","offsetTop","Math","ceil","mainContainer","unFollowThunk","followThunk","friendsPage","getPageSize","getTotalUsersCout","getCurrentPage","getFollowingInProgress","getMessageId","getIsMessageMode","UsersContainer","pageNumber","changeCurrentPageThunk","getUsersThunk","items","totalCount","SET_USER","RESET_USER","SET_AVATAR","captchaURL","setUserAuth","getAuthThunk","url","authReducer","Footer","footer","authBlock","authLogin","arrowMenu","authMenu","itemMenu","logOutThunk","myProfile","you","getLogin","getAvatar","FooterContainer","LoginReduxForm","loginPage","wrapperDown","checkboxText","checkmark","buttonLogin","errorLogIn","logInThunk","authR","_error","loginFormContainer","initialized","appReducer","reducers","combineReducers","messagesReducer","formReducer","app","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","withSuspense","fallback","MessagesContainer","lazy","App","initializeAppThunk","exact","path","render","Login","AppContainer","promise","Promise","all","HightApp","ReactDOM","navigator","serviceWorker","ready","registration","unregister","SEND_MESSAGE","SET_NEW_DIALOG","SEARCH_DIALOG","IS_SEARCH_MODE","dialogItemsData","date","formatTime","dialogsFromSearch","isSearchMode","userForMessage","sendMessage","setNewDialog","setIsFetching","setSearch","word","setUserForMessages","find","messagePopup","getUserForMessages","includes","today","other","isToday","getDate","getMonth","getFullYear","isMonth","isYear","formatTimeToLastMessage","EmojiPickerStatus","emojiPickerMode","setEPMode","onMouseEnter","onMouseLeave","buttomEmoji","style","position","showPreview","showSkinTones","emojiSize","title","onSelect","sym","unified","split","codesArray","push","emoji","String","fromCodePoint","native","EmojiPickerForm","change","values","mapStateToPropsForRedirect","RedirectComponent"],"mappings":"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","file":"static/js/main.295e62de.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuContainer\":\"sideBar_menuContainer__18Lfz\",\"logo\":\"sideBar_logo__9RRw6\",\"navBar\":\"sideBar_navBar__YBnCk\",\"menu\":\"sideBar_menu__1xC9a\",\"headList\":\"sideBar_headList__24K8S\",\"news\":\"sideBar_news__J8skV\",\"messages\":\"sideBar_messages__1n1Nl\",\"friends\":\"sideBar_friends__3vyPd\",\"communities\":\"sideBar_communities__3EApI\",\"events\":\"sideBar_events__3aqKz\",\"pages\":\"sideBar_pages__3WtuN\",\"manage\":\"sideBar_manage__2D3te\",\"shortcuts\":\"sideBar_shortcuts__21j8D\",\"google\":\"sideBar_google__1fxTt\",\"combinator\":\"sideBar_combinator__2qM8s\",\"amazon\":\"sideBar_amazon__2m_BQ\",\"active\":\"sideBar_active__3mlhi\",\"imgLogo\":\"sideBar_imgLogo__23Q4K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloaderContainer\":\"preloader_preloaderContainer__1KSyM\",\"preloader\":\"preloader_preloader__3Xfze\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AboutProfile_container__2nPCp\",\"header\":\"AboutProfile_header__1nUzy\",\"aboutMe\":\"AboutProfile_aboutMe__F5PvP\",\"contacts\":\"AboutProfile_contacts__JcdWI\",\"row\":\"AboutProfile_row__1da5i\",\"rowInfo\":\"AboutProfile_rowInfo__1KDMM\",\"nameInfo\":\"AboutProfile_nameInfo__RyrWk\",\"edit\":\"AboutProfile_edit__226M0\",\"save\":\"AboutProfile_save__3nwxJ\",\"nameField\":\"AboutProfile_nameField__3NIAR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemPost\":\"posts_itemPost__3EN8q\",\"postsContainer\":\"posts_postsContainer__PPElQ\",\"buttonPost\":\"posts_buttonPost__3l27h\",\"postFooter\":\"posts_postFooter__2C8dv\",\"likes\":\"posts_likes__2-sjm\",\"likesBody\":\"posts_likesBody__3wc4M\",\"liked\":\"posts_liked__1QESt\",\"likesWrapper\":\"posts_likesWrapper__2_8vu\",\"likesCountLiked\":\"posts_likesCountLiked__2H_w9\",\"posts\":\"posts_posts__2Sr89\",\"button\":\"posts_button__211qZ\",\"formPost\":\"posts_formPost__PKUyl\",\"avatar\":\"posts_avatar__1rvme\",\"headerPost\":\"posts_headerPost__3OoKL\",\"selectSort\":\"posts_selectSort__B3lcg\",\"name\":\"posts_name__3bc-E\",\"postBody\":\"posts_postBody__2OGDV\",\"nameBlock\":\"posts_nameBlock__14ToS\",\"menu\":\"posts_menu__7mIyF\",\"hidenMenu\":\"posts_hidenMenu__38Qc-\",\"menuItem\":\"posts_menuItem__1olJb\",\"buttomEmoji\":\"posts_buttomEmoji__3tD2K\",\"timePost\":\"posts_timePost__xcf7v\",\"likesCount\":\"posts_likesCount__b0sjS\"};","import * as axios from 'axios';\r\n\r\n\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        \"API-KEY\": \"d9c4ba29-f4a9-4d2d-8ba9-f90ead9fae9c\"\r\n    }\r\n})\r\nexport const usersAPI = {\r\n    getUsers(currentPage, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n    postFollow(id) {\r\n        return instance.post(`follow/${id}`, {}).then(response => response.data)\r\n    },\r\n    deleteFollow(id) {\r\n        return instance.delete(`follow/${id}`, {}).then(response => response.data)\r\n    },\r\n    getFollow(id){\r\n        return instance.get(`follow/${id}`, {}).then(response => response.data)\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    getAuth() {\r\n        return instance.get('auth/me').then(response => response.data)\r\n    },\r\n    logIn(dataForm) {\r\n        return instance.post('auth/login', { email: dataForm.login, password: dataForm.password,\r\n             rememberMe: dataForm.rememberMe, captcha: dataForm.captcha })\r\n            .then(response => response.data)\r\n    },\r\n    logOut() {\r\n        return instance.delete('auth/login').then(response => response.data)\r\n    },\r\n\r\n}\r\nexport const securityAPI = {\r\n    getCaptcha() {\r\n        return instance.get('security/get-captcha-url').then(response => response.data)\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(id) {\r\n        return instance.get(`profile/${id}`).then(response => response)\r\n    },\r\n    getUserStatus(id) {\r\n        return instance.get(`profile/status/${id}`).then(response => response.data)\r\n    },\r\n    updateUserStatus(status) {\r\n        return instance.put('profile/status', { status: status }).then((response) => response.data);\r\n    },\r\n    updatePhoto(photo) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photo);\r\n\r\n        return instance.put('profile/photo', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }).then((response) => response.data);\r\n    },\r\n    saveProfileData(profile) {\r\n        return instance.put(`profile`, profile).then(response => response.data)\r\n    }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAABHNCSVQICAgIfAhkiAAAAhdJREFUaIHtmjFIW0EYx//fI0aNiWBt0GSoDlYwIBhwERpxkgYqxSEFdXB00sFRXauTDnGyFBcHBelQaHVWhy6KTookg3GwQvMc9GlIbLkOomAxeS++l3d35X7jve+++37cvXt38Kgn8fmF5vmzAGKDBKqHRDCwS2L4ngNN7K2OZT1a1e95Ao0CxLu2siFQPQhDtXfFD2lgFOddlF0YY+8BRhoRmngXYxciqo0k1qs03oU4iZIRFQ/vAgDA7/OiraURoWAAzS8DD+2pjA7jJg8ASGd0GDeFknm4ysR725F424nXLY2msRMfv2H/8KxkDBcZv8+L2cl+RDvCjuZ1Xcbv8yI5M2BpNsrF9Q1gaqyvIiKAyzLRSBix7taK5XdVJh5rr2h+V9+ZaEfINCZ9qsO4LmD/6PHOdf7ryrSvazKhYADNwUDJmLmlLWxsHz97DNeWmZlI+lS3JQIIdJzZ2T2xnUMYGSdQMqKiZESF3gwvMScTLs4MoMvCx7FcYiOfSj6/uG2olmJmDo5+WoqTQsYqUsj8e04rhhQyZnf/e6SQSWV0S3FSyBjXeUtxjl8BUpnsk+3+Oi/aXhW/Lp9njaJ3Fqsz47hMcuXHk+3RSBjJ6XdF+21uH2P5y56tsaVYZlZRMqKiZERFyYiKkhEVJSMqSkZUlIyo/Hcya7yLcIC1w/UPBU+OYbwGyEv78xzoa45hknctjvMXmAh+sv75oN4AAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/Rolling-1s-200px.6fd59ae0.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"name\":\"profileDescription_name__2z7-J\",\"container\":\"profileDescription_container__32Q96\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"popUp_popup__1DRSj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"Profile_profile__1YLKP\"};","import React from 'react'\r\nimport styles from './FormControls.module.css'\r\nimport { Field } from 'redux-form';\r\n\r\n\r\n\r\n\r\nconst FormConstructor = (props) => {\r\n    const hasError = props.touched && props.error;\r\n    return (\r\n        <div className={styles.formControl + \" \" + (hasError ? styles.error : \"\")} >\r\n            <div>\r\n                {props.element}\r\n            </div>\r\n            {hasError && <span>{props.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport const Input = ({ input, meta, ...props }) => {\r\n    const el = React.createElement('input', { ...input, ...props })\r\n    return (\r\n        <FormConstructor element={el} {...meta} />\r\n    )\r\n}\r\n\r\n\r\n\r\nexport const Textarea = ({ input, meta, ...props }) => {\r\n\r\n    const el = React.createElement('textarea', { ...input, ...props })\r\n    return (\r\n        <FormConstructor element={el} {...meta} />\r\n    )\r\n}\r\n\r\nexport const createField = ( placeholder, name, validators, component,  label=false, text, props) => {\r\n   return <div className={styles.formCustom}>\r\n        \r\n        <Field id={name} placeholder={placeholder} name={name} validate={validators}  component={component} {...props} />\r\n        {label && <label htmlFor={name}>{text}</label>}\r\n    </div>\r\n}","export const required = value => {\r\n    if(value) return undefined\r\n    return 'Field is required'\r\n}\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n    if(value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n    return undefined\r\n}\r\nexport const voidValue =  value =>\r\n  value && value.trim() === '' ? `Enter your text` : undefined","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"popUpMessage_popup__2n55c\",\"headerPopup\":\"popUpMessage_headerPopup__1Qeso\",\"popupBody\":\"popUpMessage_popupBody__1ijaD\",\"popupAvatar\":\"popUpMessage_popupAvatar__1-a3p\",\"userHeader\":\"popUpMessage_userHeader__1RmiD\",\"usernameBlock\":\"popUpMessage_usernameBlock__2FYQg\",\"linkMessage\":\"popUpMessage_linkMessage__1SNow\",\"popupUserName\":\"popUpMessage_popupUserName__5NB9f\",\"onlineStatus\":\"popUpMessage_onlineStatus__3rMYu\",\"closePopup\":\"popUpMessage_closePopup__23fNe\",\"messageForm\":\"popUpMessage_messageForm__3G4j4\",\"buttonForm\":\"popUpMessage_buttonForm__3174Z\",\"textHeader\":\"popUpMessage_textHeader__2moO9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"footer_footer__15YAN\",\"avatar\":\"footer_avatar__t74Mi\",\"login\":\"footer_login__1wmOC\",\"you\":\"footer_you__I00Wy\",\"authBlock\":\"footer_authBlock__31ytO\",\"authLogin\":\"footer_authLogin__28uP0\",\"arrowMenu\":\"footer_arrowMenu__nTIfW\",\"menuContainer\":\"footer_menuContainer__1zUJi\",\"authMenu\":\"footer_authMenu__Aqo7u\",\"itemMenu\":\"footer_itemMenu__3g_D_\"};","import preloader from './../../../assets/img/Rolling-1s-200px.svg';\r\nimport React from 'react';\r\nimport styles from './preloader.module.css'\r\n\r\nconst Preloader = () =>{\r\n    return <div className={styles.preloaderContainer}>\r\n        <img className={styles.preloader} src={preloader} alt=\"\"/>\r\n    </div>\r\n}\r\nexport default Preloader;","module.exports = __webpack_public_path__ + \"static/media/ava.03e01a87.jpg\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\r\nimport styles from './sideBar.module.css'\r\nimport  logo from '../../img/F_icon.png'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nconst SideBar = (props) => {\r\n    return <div className='sideBar'>\r\n        <div className={styles.menuContainer}>\r\n            <NavLink className={styles.logo} to={'/profile/' + props.authId}><img className={styles.imgLogo} src={logo} alt='logo'/></NavLink>\r\n            <nav className={styles.navBar}>\r\n                <ul className={styles.menu}> <span className={styles.headList}>Menu</span>\r\n                    <li className={styles.news}><NavLink activeClassName={styles.active} to='/news'>News</NavLink></li>\r\n                    <li className={styles.messages}><NavLink activeClassName={styles.active} to='/messages'>Messages</NavLink></li>\r\n                    <li className={styles.friends}><NavLink activeClassName={styles.active} to='/friends'>Friends</NavLink></li>\r\n                    <li className={styles.communities}><NavLink activeClassName={styles.active} to='/communities'>Communities</NavLink></li>\r\n                    <li className={styles.events}><NavLink activeClassName={styles.active} to='/events'>Events</NavLink></li>\r\n                    <li className={styles.pages}><NavLink activeClassName={styles.active} to='/pages'>Pages</NavLink></li>\r\n                    <li className={styles.manage}><NavLink activeClassName={styles.active} to='/manage'>Manage apps</NavLink></li>\r\n                </ul>\r\n            </nav>\r\n            <ul className={styles.shortcuts}><span className={styles.headList}>Shortcuts</span>\r\n                <li className={styles.google}><a  target=\"_blank\" rel=\"noopener noreferrer\" href='https://www.google.com/'>Google Inc.</a></li>\r\n                <li className={styles.combinator}><a target=\"_blank\" rel=\"noopener noreferrer\"  href='https://www.ycombinator.com/'>Y Combinator</a></li>\r\n                <li className={styles.amazon}><a target=\"_blank\" rel=\"noopener noreferrer\"  href='https://www.amazon.com/'>Amazon</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n}\r\nconst mapStateToPropst = (state) => ({\r\n    authId: state.auth.id\r\n})\r\n\r\nexport default connect(mapStateToPropst, null)(SideBar)","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport styles from './profileStatus.module.css'\r\nimport { EmojiPickerStatus } from '../../../common/EmojiPicker/EmojiPicker'\r\n\r\nconst ProfileStatusWithHooks = ({ updateStatus, isMyPage, ...props }) => {\r\n    const [editMode, setEditMode] = useState(false)\r\n    const [status, setStatus] = useState(props.status)\r\n\r\n    const nodeStatus = useRef()\r\n\r\n\r\n    useEffect(() => {\r\n        const handlerClick = (e) => {\r\n\r\n            if (nodeStatus.current && e.target !== nodeStatus.current && !(nodeStatus.current.contains(e.target))) {\r\n                document.removeEventListener('click', handlerClick)\r\n                setEditMode(false)\r\n                setStatus(props.status)\r\n            }\r\n        }\r\n\r\n        if (nodeStatus.current) {\r\n            document.addEventListener('click', handlerClick)\r\n        }\r\n        else {\r\n            document.removeEventListener('click', handlerClick)\r\n        }\r\n        return () => {\r\n            document.removeEventListener('click', handlerClick)\r\n\r\n        }\r\n    }, [editMode, props.status])\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const outEditMode = (e) => {\r\n        updateStatus(status)\r\n        setEditMode(false)\r\n    }\r\n\r\n\r\n\r\n    return <div className={styles.statusWrap}>\r\n        {isMyPage\r\n            ? <div className={styles.statusContainer} >\r\n                <div>\r\n                    <span onClick={() => { setEditMode(true) }} className={styles.status}>{(props.status && (props.status.length > 40 ? props.status.slice(0, 40) + '...' : props.status)) || 'set a status message'}</span>\r\n                </div>\r\n                {editMode &&\r\n                    <div className={styles.changeStatusContainer} ref={nodeStatus}>\r\n                        <div ><input className={styles.inputStatus} autoFocus={true} onChange={(e) => { setStatus(e.currentTarget.value) }} value={status} /></div>\r\n                        <EmojiPickerStatus status={status} setStatus={setStatus} styles={styles} />\r\n                        <button className={styles.saveButton} onClick={() => { outEditMode() }}>Save</button>\r\n                    </div>}\r\n            </div>\r\n            : <div >\r\n                {\r\n                    props.status\r\n                        ? props.status.length > 100 ? props.status.slice(0, 100) : props.status\r\n                        : null\r\n                }\r\n            </div>\r\n        }\r\n\r\n    </div>\r\n\r\n}\r\n\r\nexport default ProfileStatusWithHooks","import React from 'react'\r\nimport { reduxForm, Field } from 'redux-form'\r\nimport { createField, Input, Textarea } from '../../../common/FormControls/FormControls'\r\nimport { required } from '../../../../utils/validators/validator'\r\nimport { Prompt } from 'react-router'\r\nimport styles from './AboutProfile.module.css'\r\n\r\nconst ProfileEditor = ({ handleSubmit, profile, ...props}) => {\r\n    return <form onSubmit={handleSubmit}>\r\n       \r\n        <h3 className={styles.nameInfo}>Full name</h3>\r\n        {createField('Full Name', 'fullName', [required], Input, false, null)}\r\n        <label><h3 className={styles.nameInfo}>Looking for a Job:</h3> </label>\r\n        <div>\r\n            <label><Field name=\"lookingForAJob\" component={'input'} type=\"radio\" value='true' /> Yes</label>\r\n            <label><Field name=\"lookingForAJob\" component={'input'} type=\"radio\" value='false' checked={true} /> No</label>\r\n        </div>\r\n        <h3 className={styles.nameInfo}>Skills:</h3>\r\n        {createField(null, 'lookingForAJobDescription', [required], Textarea, false, null, null, { colls: 10, rows: 30 })}\r\n        <h3 className={styles.nameInfo}>About me:</h3>\r\n        {createField(null, 'aboutMe', [required], Textarea, false, null, null, { colls: 10, rows: 30 })}\r\n        <h2 className={styles.nameInfo}>Contacts:</h2>\r\n        {Object.keys(profile.contacts).map((key) => {\r\n            return <div key={key}>\r\n                <h3 className={styles.nameField}>\r\n                    {key}\r\n                </h3>\r\n                {createField(key, 'contacts.' + key, null, Input, false, null, { value: profile.contacts[key] })}\r\n            </div>\r\n        })\r\n        }\r\n        <Prompt\r\n            when={props.dirty }\r\n            message='You have unsaved changes, are you sure you want to leave?'\r\n        />\r\n        <button  className={styles.save}>save</button>\r\n    </form>\r\n}\r\n const ProfileEditorReduxForm = reduxForm({ form: 'edit-profile' })(ProfileEditor)\r\n\r\n export default ProfileEditorReduxForm","import React from 'react';\r\n\r\n\r\nimport styles from './AboutProfile.module.css';\r\nimport ProfileEditorReduxForm from './ProfileEditorReduxForm'\r\n\r\nconst AboutProfile = ({ setEditProfile, isEditMode, profile, isMyPage, saveProfileData }) => {\r\n    const onSubmit = (formData) => {\r\n        saveProfileData(formData);\r\n    }\r\n\r\n    return <div className={styles.container}>\r\n\r\n        {!isEditMode && <><div className={styles.header}>\r\n            <div className={styles.aboutMe}>About me</div>\r\n            {isMyPage && !isEditMode && <div role='button' className={styles.edit} onClick={() => { setEditProfile(true) }}></div>}\r\n        </div>\r\n\r\n            {profile.aboutMe &&\r\n                <div className={styles.row}>\r\n                    <div className={styles.nameInfo}>Description:  </div>\r\n                    <div className={styles.rowInfo}>{profile.aboutMe}</div>\r\n                </div>}\r\n\r\n            <div className={styles.row}>\r\n                <div className={styles.nameInfo}>Looking for a job:</div>\r\n                <div>{profile.lookingForAJob ? 'yes' : 'no'}</div>\r\n            </div>\r\n\r\n            {profile.lookingForAJobDescription &&\r\n                <div className={styles.row}>\r\n                    <div className={styles.nameInfo}>Skills:</div>\r\n                    <div className={styles.rowInfo}>{profile.lookingForAJobDescription}</div>\r\n                </div>}\r\n\r\n            {Object.keys(profile.contacts).some(i => profile.contacts[i] !== null && profile.contacts[i] !== '') && <h2 className={styles.header}>Contacts</h2>}</>\r\n        }\r\n        {!isEditMode && Object.keys(profile.contacts).filter(key => profile.contacts[key] ? true : false).map((key) => {\r\n            return <div key={key} className={styles.row}>\r\n                <div className={styles.nameInfo}>{key + ':'}</div>\r\n                <div className={styles.rowInfo}>\r\n                    <a href={profile.contacts[key]} target='_blank' rel=\"noopener noreferrer\" >{profile.contacts[key].slice(8)}</a>\r\n                </div>\r\n            </div>\r\n        })}\r\n\r\n        {isMyPage && isEditMode && <ProfileEditorReduxForm isEditMode={isEditMode} initialValues={profile} onSubmit={onSubmit} profile={profile} />}\r\n    </div>\r\n\r\n}\r\n\r\n\r\nexport default AboutProfile;","import React from 'react';\r\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks';\r\nimport styles from './profileDescription.module.css'\r\nimport AboutProfile from './AboutProfile'\r\nconst ProfileDescrition = ({ setEditProfile, isEditMode, profile, isMyPage, ...props }) => {\r\n\r\n\r\n    \r\n    return <div >\r\n        <h2 className={styles.name}>{profile.fullName}</h2>\r\n        <ProfileStatusWithHooks isMyPage={isMyPage} updateStatus={props.updateStatus} status={props.status} />\r\n        <AboutProfile setEditProfile={setEditProfile} isEditMode={isEditMode} profile={profile} isMyPage={isMyPage} saveProfileData={props.saveProfileData}/>\r\n    </div>\r\n}\r\n\r\n\r\n\r\nexport default ProfileDescrition;","\r\nimport React from 'react'\r\nimport styles from './popUp.module.css'\r\n\r\n\r\n\r\n\r\nconst PopUp = ({Component,...props}) => {\r\n\r\n    const clickHandler = (e) => {\r\n        if(e.target === e.currentTarget) props.closePopup()\r\n    }\r\n    return <div onClick={clickHandler} className={styles.popup} >\r\n            <Component {...props} />\r\n    </div>\r\n}\r\nexport default PopUp      ","\r\nimport React from 'react'\r\nimport avatar from '../../../assets/img/ava.jpg'\r\nimport styles from './popUpMessage.module.css'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { reduxForm } from 'redux-form'\r\nimport { createField } from '../FormControls/FormControls'\r\nimport { required, voidValue } from '../../../utils/validators/validator'\r\n\r\nimport { messageFromPopUp } from '../../../redux/messages-reducer'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst PopUpMessage = ({ user, closePopup, messageFromPopUp }) => {\r\n\r\n \r\n    const id = user.id || user.userId\r\n    const name = user.name || user.fullName\r\n\r\n    return <div className={styles.popup}>\r\n        <div className={styles.headerPopup}>\r\n            <div className={styles.textHeader}>New message</div>\r\n            <div className={styles.linkMessage}>\r\n                <NavLink to={`/messages/${id}`}>Open full chat with {name}</NavLink>\r\n            </div>\r\n            <div onClick={closePopup} className={styles.closePopup} role='button'></div>\r\n        </div>\r\n        <div className={styles.popupBody}>\r\n            <div className={styles.userHeader}>\r\n                <div>\r\n                    <NavLink to={`profile/${id}`}>\r\n                        <img  src={user.photos.small != null ? user.photos.small : avatar} alt=\"\" className={styles.popupAvatar} />\r\n                    </NavLink>\r\n                </div>\r\n                <div className={styles.usernameBlock}>\r\n                    <NavLink to={`profile/${id}`}>\r\n                        <p className={styles.popupUserName}>{name}</p>\r\n                    </NavLink>\r\n                    <p className={styles.onlineStatus}>Offline</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <AddMessagePopupFormRedux onSubmit={(data) => {\r\n            messageFromPopUp(data, user)\r\n            closePopup()\r\n        }} />\r\n    </div>\r\n}\r\nconst addMessagePopup = (props) => {\r\n    return <form onSubmit={props.handleSubmit} className={styles.messageForm}>\r\n        {createField(null, 'messagePopup', [required, voidValue], 'textarea', null, null)}\r\n        <div>\r\n            <button className={styles.buttonForm} type='submit'>Send</button>\r\n        </div>\r\n    </form>\r\n}\r\nconst AddMessagePopupFormRedux = reduxForm({ form: 'message-popup' })(addMessagePopup)\r\nexport default connect(null, { messageFromPopUp })(PopUpMessage)","\r\nimport React from 'react';\r\n\r\nimport styles from './popupAvatar.module.css'\r\n\r\nconst PopUpAvatar = ({ avatar, closePopup }) => {\r\n    return <div className={styles.popup}>\r\n\r\n        <div onClick={closePopup} className={styles.closePopup} role='button'></div>\r\n        <img className={styles.avatr} src={avatar} alt=\"avatr\"/>\r\n  \r\n</div>\r\n}\r\n\r\nexport default PopUpAvatar;","\r\nimport React from 'react';\r\nimport avatar from '../../../../assets/img/ava.jpg'\r\nimport styles from './ProfilePhoto.module.css'\r\n\r\n\r\n\r\nconst ProfileAvatar = ({isMyPage, savePhoto, setPopupAvatar, photoLarge}) => {\r\n\r\n    const updatePhoto = e => {\r\n        if (e.target.files[0]) {\r\n            savePhoto(e.target.files[0])\r\n        }\r\n    }\r\n\r\n    return <div className={isMyPage ? styles.avatarContainer + ' ' + styles.avatarUpdate : styles.avatarContainer}>\r\n            <img onClick={() => { photoLarge && setPopupAvatar(true) }} className={styles.avatar + ' ' + (photoLarge && styles.avatarCustom)}\r\n                src={photoLarge ? photoLarge : avatar} alt=\"\" />\r\n            {isMyPage\r\n                && <div className={styles.changePhoto}>\r\n                    <label htmlFor=\"upload-photo\" className={styles.changePhotoLabel}>Update photo</label>\r\n                    <input className={styles.changePhotoInput} id=\"upload-photo\" type='file' onChange={updatePhoto} />\r\n                </div>\r\n            }\r\n    </div>\r\n}\r\nexport default ProfileAvatar;","import React from 'react'\r\nimport Preloader from '../../common/Preloader/Preloader'\r\nimport styles from './profileInfo.module.css'\r\nimport avatar from '../../../assets/img/ava.jpg'\r\nimport PfofileDescription from './ProfileDescription/ProfileDescription'\r\nimport PopUp from '../../common/PopUp/popUp'\r\nimport PopUpMessage from '../../common/PopUp/PopUpMessage'\r\nimport PopUpAvatar from '../../common/PopUp/popUpAvatar'\r\nimport ProfileAvatar from './ProfileAvatar/ProfileAvatar'\r\n\r\nconst ProfileInfo = ({ profile, isMyPage, isFollowed, sendMessageMode, avatarPopup, setPopupAvatar, followUnfollow, userId, ...props }) => {\r\n\r\n\r\n    return profile\r\n\r\n        ? <div className={styles.profileInfoContainer}>\r\n            <div className={styles.profileInfo}>\r\n                <div className={styles.profileAvatarContainer}>\r\n                    <ProfileAvatar isMyPage={isMyPage} photoLarge={profile.photos.large} savePhoto={props.savePhoto} setPopupAvatar={setPopupAvatar} />\r\n\r\n                    {isMyPage\r\n                        ? <div role='button' className={styles.edit} onClick={() => { props.setEditProfile(true) }}>Edit Profile</div>\r\n                        : <>\r\n                            <div role='button' className={styles.send} onClick={() => { props.setMessageMode(true) }}>Send Message</div>\r\n                            {isFollowed\r\n                                ? <div className={styles.send} onClick={() => { followUnfollow(false, userId) }}> Unfollow </div>\r\n                                : <div className={styles.send} onClick={() => { followUnfollow(true, userId) }}> Follow </div>}\r\n                        </>\r\n                    }\r\n                    {sendMessageMode && <PopUp user={profile} Component={PopUpMessage} closePopup={() => { props.setMessageMode(false) }} />}\r\n                    {avatarPopup && <PopUp avatar={profile.photos.large ? profile.photos.large : avatar} Component={PopUpAvatar} closePopup={() => { setPopupAvatar(false) }} />}\r\n                </div>\r\n                <PfofileDescription setEditProfile={props.setEditProfile} isEditMode={props.isEditMode} isMyPage={isMyPage} profile={profile} {...props} />\r\n\r\n            </div>\r\n        </div>\r\n        : <Preloader />\r\n}\r\n\r\nexport default ProfileInfo;","import React from 'react'\r\nimport { reduxForm, reset } from 'redux-form'\r\nimport { required, maxLengthCreator, voidValue } from '../../../utils/validators/validator'\r\nimport { Textarea, createField } from '../../common/FormControls/FormControls'\r\nimport EmojiPicker from './../../common/EmojiPicker/EmojiPicker'\r\nimport { connect } from 'react-redux'\r\nimport styles from './posts.module.css'\r\n\r\nconst maxLength500 = maxLengthCreator(500)\r\n\r\nconst FormPost = (props) => {\r\n    return <form className={styles.formPost} onSubmit={props.handleSubmit}>\r\n\r\n        {createField('Share your great thoughts here', 'postBody', [required, maxLength500, voidValue], Textarea)}\r\n        <EmojiPicker bottom='70%' right='0'  width='50%'\r\n         formName='formPost' fieldName='postBody' Form={props.addPostForm} styles={styles} dispatch={props.dispatch} />\r\n        <button className={styles.button} type='submit' >Post</button>\r\n    </form>\r\n    }\r\n    const afterSumbit = (result, dispatch) => {\r\n        dispatch(reset('formPost'))\r\n    }\r\n    const FormPostRedux = reduxForm({\r\n        form: 'formPost',\r\n        onSubmitSuccess: afterSumbit\r\n    })(FormPost)\r\n\r\n    const mapStateToPropse = (state) => ({\r\n        addPostForm: state.form.formPost\r\n    })\r\n    const AddPostFormWithConnect = connect(mapStateToPropse)(FormPostRedux)\r\n\r\n    export default AddPostFormWithConnect","import React from 'react'\r\nimport styles from './posts.module.css'\r\n\r\nimport avatar from '../../../assets/img/ava.jpg'\r\nimport Preloader from '../../common/Preloader/Preloader'\r\nimport { NavLink } from 'react-router-dom'\r\nimport AddPostFormWithConnect from './AddPostFormWithConnect'\r\n\r\n\r\n\r\nconst Posts = (props) => {\r\n\r\n\r\n    const sortPost = (e) => {\r\n        e.target.value === 'New' ? props.sortByTime() : props.sortByLikes()\r\n    }\r\n\r\n    return props.profile\r\n        ? <div className={styles.postsContainer}>\r\n            <AddPostFormWithConnect onSubmit={props.sendPostThunk} />\r\n            {props.posts.length ?\r\n                <div className={styles.selectSort}>Sort by <select className={styles.selectSort} onChange={sortPost}>\r\n                    <option >New</option>\r\n                    <option >Popular</option>\r\n                </select></div> : null}\r\n            {props.posts.map((p) => <div key={p.id}>\r\n                <div key={p.id} className={styles.itemPost}>\r\n                    <div className={styles.headerPost}>\r\n                        <NavLink to={`/profile/${p.userId}`}> <img className={styles.avatar} src={p.avatar || avatar} alt=\"avatar\" /></NavLink>\r\n\r\n                        <div className={styles.nameBlock}>\r\n                            <NavLink to={`/profile/${p.userId}`}> <div className={styles.name}>{p.name}</div></NavLink>\r\n                            <div className={styles.timePost}>{p.timeFormat}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={styles.postBody}>\r\n                        {p.text}\r\n                    </div>\r\n                    <div className={styles.menu}><span className={styles.hidenMenu} onClick={() => { props.deletePost(p.id) }} ><div className={styles.menuItem}>Delete post</div></span></div>\r\n                    <div className={styles.postFooter}>\r\n\r\n                        <div className={styles.likesBody}>\r\n                            <div className={styles.likesWrapper} onClick={() => { p.liked ? props.likesToggle(false, p.id) : props.likesToggle(true, p.id) }}>\r\n                                <div className={styles.likes + ' ' + (p.liked && styles.liked)}></div>\r\n                                <span className={styles.likesCount + ' ' + (p.liked && styles.likesCountLiked)}>{p.likesCount > 0 && p.likesCount}</span>  </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>)}\r\n        </div>\r\n        : <Preloader />\r\n}\r\n\r\nexport default Posts","import React from 'react';\r\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\r\nimport Posts from './Posts/Posts';\r\nimport styles from './Profile.module.css';\r\n\r\n\r\n\r\nconst Profile = ({sendPostThunk, posts, profile, status, userId, ...props}) => {\r\n        return <div className={styles.profile}>\r\n        <ProfileInfo  messageFromPopUp={props.messageFromPopUp}\r\n         isMyPage={props.isMyPage} savePhoto={props.savePhotoThunk}\r\n         profile={profile} status={status} updateStatus={props.updateStatusThunk} \r\n         saveProfileData={props.saveProfileData} isEditMode={props.isEditMode} \r\n         setEditProfile={props.setEditProfile} isFollowed={props.isFollowed}\r\n         userId={userId} followUnfollow={props.followUnfollow} setMessageMode={props.setMessageMode}\r\n         sendMessageMode={props.sendMessageMode} avatarPopup={props.avatarPopup} setPopupAvatar={props.setPopupAvatar}/>\r\n         \r\n        <Posts deletePost={props.deletePost} likesToggle={props.likesToggle} profile={profile} isMyPage={props.isMyPage} \r\n        sortByTime={props.sortByTime} sortByLikes={props.sortByLikes}  sendPostThunk={sendPostThunk} posts={posts}  />\r\n    </div>\r\n}\r\n\r\nexport default Profile;","import { profileAPI } from '../API/api'\r\nimport { stopSubmit } from 'redux-form'\r\nimport { usersAPI } from '../API/api'\r\n\r\n\r\n\r\nconst SEND_POST = 'profile-reducer/SEND_POST'\r\nconst SET_USER_PROFILE = 'profile-reducer/SET_USER_PROFILE'\r\nconst SET_USER_STATUS = 'profile-reducer/SET_USER_STATUS'\r\nconst SET_PHOTO_PROFILE = 'profile-reducer/SET_PHOTO_PROFILE'\r\nconst SET_EDIT_PROFILE = 'profile-reducer/SET_EDIT_PROFILE'\r\nconst RESET_USER_POFILE = 'profile-reducer/RESET_USER_POFILE'\r\nconst FOLLOW_UNFOLLOW_SUCCESS = 'profile-reducer/FOLLOW_UNFOLLOW_SUCCESS'\r\nconst TOGGLE_IS_FETCHING = 'profile-reducer/TOGGLE_IS_FETCHING'\r\nconst SEND_MESSAGE_MODE = 'profile-reducer/SEND_MESSAGE_MODE'\r\nconst SET_POPPUP_AVATAR = 'profile-reducer/SET_POPPUP_AVATAR'\r\nconst TOGGLE_LIKE_SUCCESS = 'profile-reducer/TOGGLE_LIKE_SUCCESS'\r\nconst DELETE_POST_SUCCESS = 'profile-reducer/DELETE_POST_SUCCESS'\r\nconst SORT_BY_TIME = 'profile-reducer/SORT_BY_TIME'\r\nconst SORT_BY_LIKES = 'profile-reducer/SORT_BY_LIKES'\r\nconst IS_USER_EXIST = 'profile-reducer/IS_USER_EXIST'\r\n\r\nconst options = {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    timezone: 'UTC',\r\n    hour: 'numeric',\r\n    minute: 'numeric'\r\n}\r\n\r\n\r\nconst initialState = {\r\n    posts: [\r\n        {\r\n            name: 'ChelCode', userId: '1601', avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1601/user-small.jpg?v=13',\r\n            text: 'Whats up??!', id: 2, likesCount: 0, time: 1574713363365, timeFormat: 'November 11, 2019, 10:20 PM', liked: false\r\n        },\r\n        {\r\n            name: 'ChelCode', avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1601/user-small.jpg?v=13',\r\n            text: 'hello world!!', userId: '1601', id: 1, likesCount: 12, time: 1574713324589, timeFormat: 'November 9, 2019, 2:46 PM', liked: false\r\n        }],\r\n    currentTextPost: '',\r\n    profile: null,\r\n    status: '',\r\n    isEditMode: false,\r\n    isFollowed: false,\r\n    isFetching: false,\r\n    sendMessageMode: false,\r\n    avatarPopup: false,\r\n    isUserExist: true\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case SEND_POST:\r\n            return {\r\n                ...state,\r\n                posts: [{\r\n                    text: action.post.postBody, time: action.time, id: state.posts.length + 1, likesCount: 0, timeFormat: action.timeFormat, liked: false,\r\n                    name: action.name, avatar: action.avatar, userId: action.userId\r\n                }, ...state.posts],\r\n            }\r\n        case SET_USER_PROFILE:\r\n            return { ...state, profile: action.profile }\r\n        case SET_USER_STATUS:\r\n            return { ...state, status: action.status }\r\n        case SET_PHOTO_PROFILE:\r\n            return { ...state, profile: { ...state.profile, photos: action.photos } }\r\n        case SET_EDIT_PROFILE:\r\n            return { ...state, isEditMode: action.mode }\r\n        case RESET_USER_POFILE:\r\n            return initialState\r\n        case FOLLOW_UNFOLLOW_SUCCESS:\r\n            return { ...state, isFollowed: action.isFollow }\r\n        case TOGGLE_IS_FETCHING:\r\n            return { ...state, isFetching: action.isFetching }\r\n        case SEND_MESSAGE_MODE:\r\n            return { ...state, sendMessageMode: action.isSendMode }\r\n        case SET_POPPUP_AVATAR:\r\n            return { ...state, avatarPopup: action.isPopup }\r\n        case TOGGLE_LIKE_SUCCESS:\r\n            return { ...state, posts: state.posts.map(p => action.idPost === p.id ? { ...p, liked: action.isLiked, likesCount: action.isLiked ? p.likesCount + 1 : p.likesCount - 1 } : p) }\r\n        case DELETE_POST_SUCCESS:\r\n            return { ...state, posts: state.posts.filter(p => p.id !== action.idPost).map((p, index) => { return { ...p, id: index + 1 } }) }\r\n        case SORT_BY_TIME:\r\n            return { ...state, posts: [...state.posts.sort((a, b) => { return b.time - a.time })] }\r\n        case SORT_BY_LIKES:\r\n            return { ...state, posts: [...state.posts.sort((a, b) => { return b.likesCount - a.likesCount })] }\r\n        case IS_USER_EXIST:\r\n            return {...state, ...action.payload}    \r\n        default: return state\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, isFetching })\r\nexport const resetProfile = () => ({ type: RESET_USER_POFILE })\r\nexport const sendPost = (post, name, avatar, userId) => ({ type: SEND_POST, post, timeFormat: new Date().toLocaleString(\"en-US\", options), time: Date.now(), name, avatar, userId })\r\n\r\n\r\nexport const setEditProfile = (mode) => ({ type: SET_EDIT_PROFILE, mode })\r\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, profile })\r\nexport const setUserStatus = (status) => ({ type: SET_USER_STATUS, status })\r\nexport const setFollowUnfollow = (isFollow) => ({ type: FOLLOW_UNFOLLOW_SUCCESS, isFollow })\r\nexport const setMessageMode = (isSendMode) => ({ type: SEND_MESSAGE_MODE, isSendMode })\r\nexport const setPopupAvatar = (isPopup) => ({ type: SET_POPPUP_AVATAR, isPopup })\r\nexport const likesToggle = (isLiked, idPost) => ({ type: TOGGLE_LIKE_SUCCESS, isLiked, idPost })\r\nexport const deletePost = (idPost) => ({ type: DELETE_POST_SUCCESS, idPost })\r\nexport const sortByTime = () => ({ type: SORT_BY_TIME })\r\nexport const sortByLikes = () => ({ type: SORT_BY_LIKES })\r\nexport const setIsUserExist = (isUserExist) => ({ type: IS_USER_EXIST, payload: {isUserExist} })\r\n\r\nexport const sendPostThunk = (post) => (dispatch, getState) => {\r\n\r\n    const name = getState().auth.login\r\n    const avatar = getState().auth.avatar\r\n    const userId = getState().auth.id\r\n    dispatch(sendPost(post, name, avatar, userId))\r\n}\r\nexport const getProfileThunk = (userId) => async (dispatch) => {\r\n    \r\n    \r\n    const response = await (profileAPI.getProfile(userId)).catch(()=>{\r\n        dispatch(setIsUserExist(false))\r\n    })\r\n    \r\n      if(response){\r\n          \r\n        dispatch(setUserProfile(response.data))  \r\n    } \r\n\r\n      \r\n    \r\n     \r\n}\r\n\r\nconst savePhotoSucсess = (photos) => ({ type: SET_PHOTO_PROFILE, photos })\r\n\r\nexport const getStatusThunk = (userId) => async (dispatch) => {\r\n    const data = await (profileAPI.getUserStatus(userId))\r\n\r\n    dispatch(setUserStatus(data))\r\n\r\n}\r\nexport const updateStatusThunk = (status) => async (dispatch) => {\r\n    const data = await (profileAPI.updateUserStatus(status))\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(setUserStatus(status))\r\n    }\r\n\r\n}\r\nexport const savePhotoThunk = (photo) => async (dispatch) => {\r\n    const data = await (profileAPI.updatePhoto(photo))\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(savePhotoSucсess(data.data.photos))\r\n    }\r\n\r\n}\r\nexport const saveProfileData = (profile) => async (dispatch, getState) => {\r\n    const userId = getState().auth.id\r\n    const response = await (profileAPI.saveProfileData(profile))\r\n\r\n\r\n    if (response.resultCode === 0) {\r\n        dispatch(getProfileThunk(userId))\r\n        dispatch(setEditProfile(false))\r\n    } else {\r\n        let number = response.messages[0].indexOf('>')\r\n        let test = response.messages[0].slice(number + 1, -1).toLowerCase()\r\n        dispatch(stopSubmit('edit-profile', { 'contacts': { [test]: test + ' incorrect' } }))\r\n    }\r\n}\r\nexport const getFollowedThunk = (id) => async (dispatch) => {\r\n    const data = await (usersAPI.getFollow(id))\r\n    dispatch(setFollowUnfollow(data))\r\n\r\n}\r\nexport const followUnfollow = (isFollow, id) => async (dispatch) => {\r\n    dispatch(toggleIsFetching(true))\r\n    const data =\r\n        isFollow\r\n            ? await usersAPI.postFollow(id)\r\n            : await usersAPI.deleteFollow(id)\r\n    if (data.resultCode === 0) {\r\n        dispatch(setFollowUnfollow(isFollow))\r\n        dispatch(toggleIsFetching(false))\r\n    }\r\n\r\n\r\n}\r\nexport default profileReducer","export const profileStatus = (state) => {\r\n    return state.profilePage.status;\r\n}\r\nexport const profilePosts = (state) => {\r\n    return state.profilePage.posts;\r\n}\r\nexport const getIsAuth = (state) => {\r\n    return state.auth.isAuth;\r\n}\r\nexport const getAuthId = (state) =>{\r\n    return state.auth.id;\r\n}\r\nexport const getIsEditMode = (state) =>{\r\n    return state.profilePage.isEditMode;\r\n}\r\n\r\nexport const getProfile = (state) => {\r\n    return state.profilePage.profile;\r\n}\r\nexport const getFollowed = (state) => {\r\n    return state.profilePage.isFollowed;\r\n}\r\nexport const getIsFetching = (state) => {\r\n    return state.profilePage.isFetching;\r\n}\r\nexport const getIsSendMode = (state) => {\r\n    return state.profilePage.sendMessageMode;\r\n}\r\n\r\nexport const getIsAvatarPopup = (state) => {\r\n    return state.profilePage.avatarPopup;\r\n}\r\n\r\nexport const getIsUserExist = (state) => {\r\n    return state.profilePage.isUserExist;\r\n}","import React from 'react';\r\nimport Profile from './Profile'\r\nimport { connect } from 'react-redux';\r\nimport { resetProfile, setUserProfile, sendPostThunk, savePhotoThunk, getProfileThunk, getStatusThunk, updateStatusThunk, saveProfileData, setEditProfile,\r\n getFollowedThunk, followUnfollow, setMessageMode, setPopupAvatar, likesToggle, deletePost, sortByTime, sortByLikes, setIsUserExist} from './../../redux/profile-reducer';\r\nimport {messageFromPopUp} from './../../redux/messages-reducer'\r\nimport { withRouter, Redirect } from 'react-router-dom';\r\nimport withAuthRedirect from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\nimport { profileStatus, profilePosts, getIsAuth, getAuthId, getIsEditMode, getProfile, getFollowed, getIsFetching, getIsSendMode, getIsAvatarPopup,getIsUserExist } from './profile-selectors';\r\nimport Preloader from '../common/Preloader/Preloader';\r\n\r\n\r\nclass ProfileContainer extends React.Component {\r\n   \r\n     refreshProfile(){\r\n        \r\n        let userId = this.props.match.params.userId;\r\n        this.props.getProfileThunk(userId);\r\n        this.props.getStatusThunk(userId);\r\n        this.props.getFollowedThunk(userId);\r\n    }\r\n    componentWillUnmount(){\r\n        this.props.resetProfile();\r\n        \r\n    }\r\n    componentDidMount(){\r\n        this.refreshProfile()\r\n        \r\n    }\r\n    componentDidUpdate(prevProps, prevState){\r\n        if(prevProps.match.params.userId !== this.props.match.params.userId){\r\n            this.props.resetProfile();\r\n            this.refreshProfile();\r\n        }\r\n    }\r\n    render() {\r\n      \r\n        return <>\r\n                {this.props.isFetching && < Preloader/>}\r\n                {this.props.IsUserExist \r\n                 ?<Profile {...this.props} userId={this.props.match.params.userId}  isMyPage={this.props.authId.toString() === this.props.match.params.userId.toString()}   />\r\n                 :<Redirect to='/error404' />\r\n                }\r\n            </>\r\n    }   \r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    profile: getProfile(state),\r\n    status: profileStatus(state),\r\n    posts: profilePosts(state),\r\n    isAuth: getIsAuth(state),\r\n    authId: getAuthId(state),\r\n    isEditMode: getIsEditMode(state),\r\n    isFollowed: getFollowed(state),\r\n    isFetching: getIsFetching(state),\r\n    sendMessageMode: getIsSendMode(state),\r\n    avatarPopup: getIsAvatarPopup(state),\r\n    IsUserExist: getIsUserExist(state)\r\n})\r\n\r\n\r\n export default compose(\r\n    connect(mapStateToProps, { setUserProfile, sendPostThunk,  getProfileThunk, getStatusThunk, \r\n        updateStatusThunk, savePhotoThunk, saveProfileData, setEditProfile, resetProfile, getFollowedThunk, followUnfollow, setMessageMode, setPopupAvatar, \r\n        likesToggle, deletePost, sortByTime, sortByLikes, messageFromPopUp, setIsUserExist }),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContainer);","import React from 'react'\r\n\r\n\r\nconst News = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default News","import React from 'react'\r\n\r\n\r\nconst Communities = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default Communities","import React from 'react'\r\n\r\nconst Events = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default Events","import React from 'react'\r\n\r\n\r\nconst Pages = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default Pages","import React from 'react'\r\n\r\n\r\nconst Manage = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default Manage","import { usersAPI } from '../API/api'\r\n\r\n\r\nexport const FOLLOW = 'friends-reducer/FOLLOW';\r\nexport const UNFOLLOW = 'friends-reducer/UNFOLLOW';\r\nexport const SET_USERS = 'friends-reducer/SET-USERS';\r\nexport const SET_CURRENT_PAGE = 'friends-reducer/SET_CURRENT_PAGE';\r\nexport const SET_TOTAL_COUNT = 'friends-reducer/SET_TOTAL_COUNT';\r\nexport const TOGGLE_IS_FETCHING = 'friends-reducer/TOGGLE_IS_FETCHING';\r\nexport const TOGGLE_IS_FOLOWING_PROGRESS = 'friends-reducer/TOGGLE_IS_FOLOWING_PROGRESS';\r\nexport const SET_MESSAGE_MODE = 'friends-reducer/SET_MESSAGE_MODE';\r\nexport const ADD_MORE_USER = 'friends-reducer/ADD_MORE_USER';\r\n\r\n\r\nconst initialState = {\r\n    users: [],\r\n    friends: [],\r\n    pageSize: 30,\r\n    totalUsersCout: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [],\r\n    messageMode: false,\r\n    messageId: 0\r\n}\r\n\r\nexport const friendsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => action.payload === u.id ? { ...u, followed: true } : u)\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => action.payload === u.id ? { ...u, followed: false } : u)\r\n            }\r\n        case SET_USERS:\r\n            return { ...state, ...action.payload }\r\n        case ADD_MORE_USER:\r\n            return { ...state, users: [...state.users, ...action.payload] }\r\n        case SET_CURRENT_PAGE:\r\n            return { ...state, currentPage: action.payload }\r\n        case SET_TOTAL_COUNT:\r\n            return { ...state, totalUsersCout: action.payload }\r\n        case TOGGLE_IS_FETCHING:\r\n            return { ...state, isFetching: action.payload }\r\n        case TOGGLE_IS_FOLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.payload.isFetching\r\n                    ? [...state.followingInProgress, action.payload.userId]\r\n                    : state.followingInProgress.filter(userId => userId !== action.payload.userId)\r\n\r\n            }\r\n        case SET_MESSAGE_MODE:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default: return state;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const follow = (id) => ({ type: FOLLOW, payload: id });\r\nexport const unfollow = (id) => ({ type: UNFOLLOW, payload: id });\r\nexport const setUsers = (users) => ({ type: SET_USERS, payload: { users } });\r\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, payload: currentPage });\r\nexport const setTotalUsersCount = (totalUsersCout) => ({ type: SET_TOTAL_COUNT, payload: totalUsersCout });\r\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, payload: isFetching });\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({ type: TOGGLE_IS_FOLOWING_PROGRESS, payload: { isFetching, userId } })\r\nexport const setMessageMode = (messageMode, messageId) => ({ type: SET_MESSAGE_MODE, payload: { messageMode, messageId } })\r\nexport const setMoreUsers = (users) => ({ type: ADD_MORE_USER, payload: users })\r\n\r\n\r\nexport const getUsersThunk = (currentPage, pageSize) => async (dispatch) => {\r\n\r\n    dispatch(toggleIsFetching(true))\r\n\r\n    const data = await (usersAPI.getUsers(currentPage, pageSize))\r\n\r\n    \r\n    dispatch(setUsers(data.items))\r\n    dispatch(setTotalUsersCount(data.totalCount))\r\n    dispatch(toggleIsFetching(false))\r\n}\r\n\r\nexport const getMoreUsers = (currentPage, pageSize) => async (dispatch) => {\r\n\r\n    dispatch(setCurrentPage(currentPage))\r\n    dispatch(toggleIsFetching(true))\r\n    const data = await (usersAPI.getUsers(currentPage, pageSize));\r\n    dispatch(setMoreUsers(data.items))\r\n    \r\n    dispatch(setTotalUsersCount(data.totalCount));\r\n    dispatch(toggleIsFetching(false))\r\n\r\n}\r\nexport const changeCurrentPageThunk = (pageNumber, pageSize) => async (dispatch) => {\r\n    dispatch(toggleIsFetching(true))\r\n\r\n    dispatch(setCurrentPage(pageNumber))\r\n    const data = await (usersAPI.getUsers(pageNumber, pageSize))\r\n    dispatch(setUsers(data.items))\r\n\r\n    dispatch(toggleIsFetching(false))\r\n}\r\n\r\nexport const followUnfollowFlow = async (dispatch, apiMethod, actionCreator, id) => {\r\n    dispatch(toggleIsFetching(true));\r\n    dispatch(toggleFollowingProgress(true, id));\r\n    const data = await (apiMethod(id));\r\n    if (data.resultCode === 0) {\r\n        dispatch(actionCreator(id));\r\n        dispatch(toggleFollowingProgress(false, id));\r\n        dispatch(toggleIsFetching(false));\r\n    }\r\n\r\n}\r\nexport const unFollowThunk = (id) => async (dispatch) => {\r\n    await followUnfollowFlow(dispatch, usersAPI.deleteFollow, unfollow, id);\r\n}\r\nexport const followThunk = (id) => async (dispatch) => {\r\n    await followUnfollowFlow(dispatch, usersAPI.postFollow, follow, id);\r\n}\r\n\r\nexport default friendsReducer;","import React, { useEffect } from 'react'\r\nimport styles from './Friends.module.css'\r\nimport avatar from '../../assets/img/ava.jpg'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\n\r\n\r\n\r\nconst User = ({ user, follow, unfollow, followingInProgress, setMessageMode }) => {\r\n    useEffect(() => {\r\n\r\n        return () => {\r\n            setMessageMode(false, user.id)\r\n        };\r\n    }, [setMessageMode,user.id]);\r\n\r\n    return <div className={styles.userContainer}>\r\n        \r\n            <div className={styles.avatar}>\r\n                <NavLink to={'/profile/' + user.id}>\r\n                    <img src={user.photos.small != null ? user.photos.small : avatar} alt=\"\" className={styles.usersAvatar} />\r\n                </NavLink>\r\n            </div>\r\n            <div className={styles.userMenu}>\r\n                <div className={styles.hideMenu}>\r\n                    {user.followed\r\n                        ? <button onClick={() => unfollow(user.id)}\r\n                            disabled={followingInProgress.some(id => id === user.id)}>Unfollow</button>\r\n                        : <button onClick={() => follow(user.id)}\r\n                            disabled={followingInProgress.some(id => id === user.id)}>Follow</button>\r\n                    }\r\n                    <button onClick={() => { setMessageMode(true, user.id) }}>Send Message</button>\r\n                    <button>Show Friends</button>\r\n                </div>\r\n            </div>\r\n        \r\n        <div className={styles.userInfo}>\r\n            <span>\r\n                <NavLink to={'/profile/' + user.id}> <div className={styles.userName}>{user.name}</div></NavLink>\r\n            </span>\r\n            <span className={styles.userStatus}>\r\n                {\r\n                    user.status\r\n                        ? user.status.length > 20 ? user.status.slice(0, 20) +'...' : user.status\r\n                        : 'no status'\r\n                }\r\n            </span>\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n}\r\n\r\nexport default User;","import React, { useEffect } from 'react'\r\n\r\nimport User from './User'\r\nimport styles from './Friends.module.css'\r\nimport PopUp from '../common/PopUp/popUp'\r\nimport PopUpMessage from '../common/PopUp/PopUpMessage'\r\n\r\nconst Users = ({ totalUsersCount, pageSize, currentPage, onPageChanged, users, isMessageMode, messageId, ...props }) => {\r\n    const getMoreUsers = () => {\r\n\r\n        const list = document.getElementById('user-list')\r\n        if (list && window.scrollY + window.innerHeight > list.clientHeight + list.offsetTop - 100\r\n            && !props.isFetching && Math.ceil(totalUsersCount / pageSize) >= currentPage + 1) {\r\n            props.getMoreUsers(currentPage + 1, pageSize)\r\n        }\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        window.addEventListener('scroll', getMoreUsers)\r\n        return () => {\r\n            window.removeEventListener('scroll', getMoreUsers)\r\n        }\r\n    })\r\n    return <div className={styles.mainContainer}>\r\n        <div className={styles.container} id='user-list'>\r\n            {\r\n                users.map(u => <User setMessageMode={props.setMessageMode} user={u} key={u.id} followingInProgress={props.followingInProgress} \r\n                    unfollow={props.unFollowThunk} follow={props.followThunk} />)\r\n            }\r\n        </div>\r\n        {\r\n\r\n            isMessageMode\r\n                ? <PopUp user={users.filter(u => u.id === messageId)[0]} Component={PopUpMessage} closePopup={() => { props.setMessageMode(false, null) }} />\r\n                : null\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default Users","export const getUsers = (state) =>{\r\n    return state.friendsPage.users\r\n}\r\n\r\nexport const getPageSize = (state) =>{\r\n    return state.friendsPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCout = (state) =>{\r\n    return state.friendsPage.totalUsersCout\r\n}\r\n\r\nexport const getCurrentPage = (state) =>{\r\n    return state.friendsPage.currentPage\r\n}\r\nexport const getIsFetching = (state) =>{\r\n    return state.friendsPage.isFetching\r\n}\r\nexport const getFollowingInProgress = (state) =>{\r\n    return state.friendsPage.followingInProgress\r\n}\r\nexport const getMessageId = (state) =>{\r\n    return state.friendsPage.messageId\r\n}\r\nexport const getIsMessageMode = (state) =>{\r\n    return state.friendsPage.messageMode\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { toggleFollowingProgress, getUsersThunk, changeCurrentPageThunk, unFollowThunk, followThunk, setMessageMode, getMoreUsers} from '../../redux/friends-reducer'\r\nimport Users from './Users'\r\nimport Preloader from '../common/Preloader/Preloader'\r\nimport withAuthRedirect from '../../hoc/withAuthRedirect'\r\nimport { compose } from 'redux'\r\nimport { getUsers, getPageSize, getTotalUsersCout, getCurrentPage, getIsFetching, getFollowingInProgress, getMessageId, getIsMessageMode } from './user-selectors'\r\n\r\n \r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n        const { pageSize} = this.props\r\n        this.props.getUsersThunk(1, pageSize)\r\n    }\r\n    onPageChanged = (pageNumber) => {\r\n        const pageSize = this.props.pageSize\r\n        this.props.changeCurrentPageThunk(pageNumber, pageSize)\r\n    }\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader /> : null}\r\n\r\n            <Users {...this.props} currentPage={this.props.currentPage} onPageChanged={this.onPageChanged}/>\r\n        </>\r\n    }\r\n}\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCout(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n        messageId: getMessageId(state),\r\n        isMessageMode: getIsMessageMode(state)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, {\r\n        toggleFollowingProgress, getUsersThunk, changeCurrentPageThunk, unFollowThunk, followThunk, setMessageMode, getMoreUsers\r\n     }),\r\n    withAuthRedirect\r\n)(UsersContainer)","import { authAPI, securityAPI, profileAPI } from '../API/api';\r\nimport { stopSubmit } from 'redux-form';\r\n\r\nimport * as authR from './auth-reducer.js'\r\n\r\nexport const SET_USER = 'auth-reducer/SET_USER'\r\nexport const RESET_USER = 'auth-reducer/RESET_USER'\r\nexport const GET_CAPTHCA_SUCCESS = 'auth-reducer/GET_CAPTHCA_SUCCESS'\r\nexport const SET_AVATAR = 'auth-reducer/SET_AVATAR'\r\n\r\nconst initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaURL: null,\r\n    avatar: null\r\n}\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SET_USER:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n                isAuth: true\r\n            }\r\n        case GET_CAPTHCA_SUCCESS: \r\n            return {\r\n                ...state,\r\n                captchaURL: action.payload\r\n            }     \r\n        case RESET_USER:\r\n            return {\r\n                ...initialState\r\n            }\r\n        case SET_AVATAR:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }    \r\n        default: return state;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const setUserAuth = (data) => ({ type: SET_USER, payload: {...data} });\r\nexport const resetUserAuth = () => ({ type: RESET_USER });\r\nexport const setCaptcha = (captchaURL) => ({ type: GET_CAPTHCA_SUCCESS, payload: captchaURL })\r\nexport const setAvatar = (avatar) => ({type: SET_AVATAR, payload: {avatar}})\r\nexport const getAuthThunk = () => async (dispatch) => {\r\n    const data =  await (authAPI.getAuth())\r\n    if ( data.resultCode === 0) {\r\n        dispatch(setUserAuth(data.data));\r\n        const response = await profileAPI.getProfile(data.data.id);\r\n        dispatch(setAvatar(response.data.photos.small))\r\n    }\r\n\r\n}\r\nexport const logInThunk = (dataForm) => async (dispatch) => {\r\n    const data = await authAPI.logIn(dataForm)\r\n\r\n    if (data.resultCode === 0) {\r\n        await dispatch(authR.getAuthThunk(data.data))\r\n\r\n    } else {\r\n        if(data.resultCode === 10){\r\n            dispatch(getCaptcha())\r\n        }\r\n        let messages = data.messages.length ? data.messages[0] : 'Some error'\r\n        dispatch(stopSubmit('login', { _error: messages }))\r\n    }\r\n}\r\n\r\n\r\nexport const getCaptcha = () => async (dispatch) => {\r\n   const response = await(securityAPI.getCaptcha())\r\n   const captcha = response.url\r\n   dispatch(setCaptcha(captcha))\r\n}\r\nexport const logOutThunk = () => async (dispatch) => {\r\n    const data = await (authAPI.logOut())\r\n    if (data.resultCode === 0) {\r\n        dispatch(resetUserAuth());\r\n    }\r\n}\r\n\r\n\r\nexport default authReducer;","import React from 'react';\r\nimport styles from './footer.module.css';\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nconst Footer = (props) => {\r\n    \r\n    return <div className={styles.footer}>\r\n        {props.isAuth\r\n            ? <div className={styles.authBlock}>\r\n                <img alt='avatar' className={styles.avatar} src={props.avatar} />\r\n                <div className={styles.login}>\r\n                    <div className={styles.authLogin}>\r\n                        {props.login}\r\n                        <div className={styles.menuContainer}>\r\n                            <div className={styles.arrowMenu}></div>\r\n                            <div className={styles.authMenu}>\r\n                                <div className={styles.itemMenu} onClick={props.logOutThunk}>logOut</div>\r\n                                <NavLink className={styles.itemMenu} to='/profile'>  <div className={styles.myProfile}> My profile  </div> </NavLink>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className={styles.you}>\r\n                        its you\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            : <div>you are not authorized</div>\r\n        }\r\n    </div>\r\n}\r\n\r\n\r\nexport default Footer;\r\n","\r\n\r\nexport const getIsAuth = (state) => {\r\n    return state.auth.isAuth;\r\n}\r\n\r\nexport const getLogin= (state) => {\r\n    return state.auth.login;\r\n}\r\nexport const getAvatar= (state) => {\r\n    return state.auth.avatar;\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { logOutThunk } from './../../redux/auth-reducer';\r\nimport Footer from './Footer';\r\nimport { getIsAuth, getLogin, getAvatar } from './footer-selector';\r\n\r\n\r\nclass FooterContainer extends React.Component {\r\n    \r\n    render() {\r\n        return <Footer {...this.props} />\r\n    }\r\n\r\n}\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: getIsAuth(state),\r\n    login: getLogin(state),\r\n    avatar: getAvatar(state)\r\n})\r\nexport default connect(mapStateToProps, { logOutThunk })(FooterContainer);","import React from 'react';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { logInThunk } from '../../redux/auth-reducer';\r\nimport { connect } from 'react-redux';\r\nimport { Input, createField } from '../common/FormControls/FormControls';\r\nimport { required } from '../../utils/validators/validator';\r\nimport { Redirect } from 'react-router';\r\nimport styles from '../common/FormControls/FormControls.module.css'\r\nimport loginPage from './LoginPage.module.css'\r\n\r\nconst LoginForm = ({ captchaURL, error, handleSubmit }) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField('Login', 'login', [required], Input)}\r\n            {createField('Password', 'password', [required], Input, { type: 'password' })}\r\n            <div className={loginPage.wrapperDown}>\r\n                <label className={loginPage.container}>\r\n                    <div className={loginPage.checkboxText}>remember me</div>\r\n                    <Field component='input' type='checkbox' name='rememberMe' />\r\n                    <span className={loginPage.checkmark}></span>\r\n                </label>\r\n                <button className={styles.buttonLogin} type='submit'>Login</button></div>\r\n            {error && <div className={styles.errorLogIn}>{error}</div>}\r\n            {captchaURL && <img src={captchaURL} alt='capthca' />}\r\n            {captchaURL && createField('enter the cpathca-code', 'captcha', [required], Input)}\r\n\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({ form: 'login' })(LoginForm);\r\n\r\nconst Login = ({ captchaURL, logInThunk, isAuth, authId }) => {\r\n    const onSubmit = ({ login, password, rememberMe = false, captcha = null }) => {\r\n        logInThunk({ login, password, rememberMe, captcha });\r\n    }\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile/' + authId} />\r\n    }\r\n\r\n    return <div className={loginPage.loginPage}>\r\n        <div className={loginPage.loginFormContainer}>\r\n            <h1>Login to SN </h1>\r\n            <LoginReduxForm captchaURL={captchaURL} onSubmit={onSubmit} />\r\n        </div>\r\n    </div >\r\n}\r\nconst mapDispatchToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    authId: state.auth.id,\r\n    captchaURL: state.auth.captchaURL\r\n})\r\n\r\nexport default connect(mapDispatchToProps, { logInThunk })(Login);","import { getAuthThunk } from \"./auth-reducer\";\r\n\r\n\r\n\r\nexport const INITIALIZED_SUCCESS = 'app-reducer/INITIALIZED_SUCCESS';\r\n\r\n\r\nconst initialState = {\r\n    initialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        default: return state;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const initiallizedSuccess = () => ({ type: INITIALIZED_SUCCESS });\r\n\r\nexport const initializeAppThunk = () => async (dispatch) => {\r\n    const promise = dispatch(getAuthThunk());\r\n       Promise.all([promise])\r\n        return dispatch(initiallizedSuccess())\r\n    \r\n    }\r\n    \r\n    \r\n\r\n\r\n\r\n\r\n\r\nexport default appReducer;","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\r\nimport messagesReducer from './messages-reducer';\r\nimport friendsReducer from './friends-reducer';\r\nimport profileReducer from './profile-reducer';\r\nimport authReducer from './auth-reducer';\r\nimport appReducer from './app-reducer';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nlet reducers = combineReducers({\r\n    messages: messagesReducer,\r\n    friendsPage: friendsReducer,\r\n    profilePage: profileReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n const store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\n\r\n\r\nexport default store;","import React, { Suspense } from 'react';\r\nimport Preloader from '../components/common/Preloader/Preloader';\r\n\r\n\r\nconst withSuspense = (Component) => {\r\n    return (props) => {\r\n        return <Suspense fallback={<Preloader />}>\r\n            <Component {...props} />\r\n        </Suspense>\r\n    }\r\n}\r\n\r\nexport default withSuspense;","import React from 'react'\nimport './App.css'\nimport SideBar from './components/SideBar/SideBar'\nimport { withRouter, HashRouter, Route, Redirect } from 'react-router-dom'\nimport ProfileContainer from './components/Profile/ProfileContainer'\nimport News from './components/News/News'\nimport Communities from './components/Communities/Communities'\nimport Events from './components/Events/Events'\nimport Pages from './components/Pages/Pages'\nimport Manage from './components/Manage/Manage'\nimport UsersContainer from './components/Friends/UsersContainer'\nimport FooterContainer from './components/Footer/FooterContainer'\nimport Login from './components/Login/Login'\nimport { connect, Provider } from 'react-redux'\nimport { initializeAppThunk } from './redux/app-reducer'\nimport Preloader from './components/common/Preloader/Preloader'\nimport { compose } from 'redux'\nimport store from './redux/redux-store'\nimport withSuspense from './hoc/withSuspense'\nimport { Switch } from 'react-router'\n\nconst MessagesContainer = React.lazy(() => import('./components/Messages-container/MessagesContainer'))\n\nclass App extends React.Component {\n\n  componentDidMount() {\n    this.props.initializeAppThunk()\n  }\n  render() {\n    \n    if (!this.props.initialized) return <Preloader />\n    return (\n      <div className='app'>\n\n        {this.props.isAuth\n          ? <div className='app-wrapper'>\n              <SideBar />\n              <div className='app-wrapper-content'>\n                <Switch>\n                  <Route exact path={'/'} render={() => <Redirect to={`/profile/${this.props.authId}`} />} />\n                  <Route exact path='/profile' render={() => <Redirect to={`/profile/${this.props.authId}`} />} />\n                  <Route path='/profile/:userId?' render={() => <ProfileContainer />} />\n                  <Route path='/news' component={News} />\n                  <Route exact path='/messages/:userId?' render={withSuspense(MessagesContainer)} />\n                  <Route path='/friends' render={() => <UsersContainer />} />\n                  <Route path='/communities' component={Communities} />\n                  <Route path='/events' component={Events} />\n                  <Route path='/pages' component={Pages} />\n                  <Route path='/manage' component={Manage} />\n                  <Route path='/login' component={Login} />\n                  <Route path='*' render={() => <div> 404 not found </div>} />\n                </Switch>\n              </div>\n            </div>\n          :  <Login/>\n        }\n        \n        <FooterContainer />\n      </div>\n    )\n  }\n}\n\nconst mapStateToPropse = (state) => (\n  {\n    initialized: state.app.initialized,\n    authId: state.auth.id,\n    isAuth: state.auth.isAuth\n  }\n)\n\nconst AppContainer = compose(\n  withRouter,\n  connect(mapStateToPropse, { initializeAppThunk }))(App)\n\nconst HightApp = () => {\n  return <HashRouter>\n    <Provider store={store}>\n      <AppContainer />\n    </Provider>\n  </HashRouter>\n}\nexport default HightApp\n","import * as serviceWorker from './serviceWorker';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport HightApp from './App';\n\n\nReactDOM.render(\n    <HightApp/>, document.getElementById('root')\n);\n\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersAvatar\":\"Friends_usersAvatar__lmeWh\",\"selectedPage\":\"Friends_selectedPage__oaBcA\",\"userContainer\":\"Friends_userContainer__inTHn\",\"container\":\"Friends_container__2BTYM\",\"mainContainer\":\"Friends_mainContainer__2iu3d\",\"avatar\":\"Friends_avatar__3FrVo\",\"userInfo\":\"Friends_userInfo__2vS9e\",\"userName\":\"Friends_userName__2mr2F\",\"userStatus\":\"Friends_userStatus__1uTEY\",\"userMenu\":\"Friends_userMenu__hLhDL\",\"hideMenu\":\"Friends_hideMenu__20wSl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatarContainer\":\"ProfilePhoto_avatarContainer__34MSW\",\"changePhoto\":\"ProfilePhoto_changePhoto__18Dp8\",\"avatar\":\"ProfilePhoto_avatar__1ZsD4\",\"avatarCustom\":\"ProfilePhoto_avatarCustom__2oUr6\",\"changePhotoInput\":\"ProfilePhoto_changePhotoInput__3MXW-\",\"changePhotoLabel\":\"ProfilePhoto_changePhotoLabel__33W25\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileInfo\":\"profileInfo_profileInfo__ObJQb\",\"profileInfoContainer\":\"profileInfo_profileInfoContainer__Buw85\",\"edit\":\"profileInfo_edit__hp3MO\",\"send\":\"profileInfo_send__3hHi1\",\"followBtn\":\"profileInfo_followBtn__1k8ks\",\"profileAvatarContainer\":\"profileInfo_profileAvatarContainer__2XpD5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"profileStatus_status__1S6wV\",\"statusContainer\":\"profileStatus_statusContainer__22Fir\",\"statusWrap\":\"profileStatus_statusWrap__2q4XB\",\"changeStatusContainer\":\"profileStatus_changeStatusContainer__wpMDH\",\"inputStatus\":\"profileStatus_inputStatus__sZeXd\",\"saveButton\":\"profileStatus_saveButton__3P4xM\",\"buttomEmoji\":\"profileStatus_buttomEmoji__37knT\",\"emojiPicker\":\"profileStatus_emojiPicker__AYs4t\",\"buttonLogin\":\"profileStatus_buttonLogin__3cwlQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FormControls_error__3S2AF\",\"formControl\":\"FormControls_formControl__1_M5Q\",\"errorLogIn\":\"FormControls_errorLogIn__1Qjm8\",\"formCustom\":\"FormControls_formCustom__2kQUr\",\"buttonLogin\":\"FormControls_buttonLogin__2cXuz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginPage\":\"LoginPage_loginPage__xHQJZ\",\"loginFormContainer\":\"LoginPage_loginFormContainer__2Wixt\",\"container\":\"LoginPage_container__2t8Cg\",\"checkboxText\":\"LoginPage_checkboxText__1JPPa\",\"checkmark\":\"LoginPage_checkmark__30sib\",\"wrapperDown\":\"LoginPage_wrapperDown__1M9qd\",\"buttonLogin\":\"LoginPage_buttonLogin__3xsjM\"};","import avatar from '../assets/img/ava.jpg'\r\nimport formatTime from '../utils/timeFormat'\r\nimport {  profileAPI } from '../API/api'\r\n\r\nexport const SEND_MESSAGE = 'messages-reducer/SEND-MESSAGE'\r\nexport const SET_NEW_DIALOG = 'messages-reducer/SET_NEW_DIALOG'\r\nexport const SEARCH_DIALOG = 'messages-reducer/SEARCH_DIALOG'\r\nexport const IS_SEARCH_MODE = 'messages-reducer/IS_SEARCH_MODE'\r\nexport const SET_USER_FOR_MESSAGE = 'messages-reducer/SET_USER_FOR_MESSAGE'\r\nexport const IS_FETCHING = 'messages-reducer/IS_FETCHING'\r\n\r\nconst initialState = {\r\n    dialogItemsData: [\r\n        {\r\n            name: 'Suarez', userId: 5081, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5081/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hey,how are you?', id: 1, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Great! How are you?', id: 2, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Im fine! Go work!', id: 3,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Lets go!!!', id: 4, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Just do it!!!', id: 5,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'ARE U KIDDING ME?', id: 6,  date: 1574411457816, timeFormat: formatTime(new Date(1574411457816)) },\r\n                { message: 'ops, sorry, not for you', id: 7,  date: 1574411458116, timeFormat: formatTime(new Date(1574411458116)) }\r\n            ]\r\n\r\n        },\r\n        {\r\n            name: 'Siarhei', userId: 5217, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5217/user-small.jpg?v=13', \r\n            messages: [\r\n                { message: 'Hey,how are you?', id: 1, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Great! How are you?', id: 2, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'SeregaLucky', userId: 1670, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1670/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hello!', id: 1, date: 1574411457616,  timeFormat: formatTime(new Date(1574411457616)) },\r\n                {\r\n                    message: 'A group of people born on the same day, including Rebecca (Moore) and Jack (Ventimiglia), a married couple expecting triplets in Pittsburgh, and Kevin (Hartley), a handsome television actor growing bored of his fly bachelor lifestyle.',\r\n                    id: 2, right: true, date: 1574411457616,\r\n                    timeFormat: formatTime(new Date(1574411457616))\r\n                },\r\n                { message: 'WOW!', id: 3, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'YEAH, I LIKE IT!!!', id: 4, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'ITS AWESOME!!!', id: 5,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'Andrej', userId: 4987, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4987/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'Me too!', id: 3, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'remboinReact', userId: 5287, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5287/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'can we chat?', id: 1, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'yes, why not?', id: 2, right: true, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'it was a joke!', id: 3, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'hehe, very funny', id: 4, right: true, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'Vladimir Tuznichenko', userId: 4948, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4948/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'Me too!', id: 3, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'justthefox', userId: 5414, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5414/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hello, im fox?', id: 1, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'are u beast?', id: 2, right: true, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'something like that...', id: 3, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'its scary...', id: 4, right: true, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'I dont think so...', id: 5, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'React ninja', userId: 1676, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1676/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'Me too!', id: 3, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'daze', userId: 5053, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5053/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'hu?', id: 1, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) },\r\n                { message: 'so-so', id: 2, right: true, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) },\r\n                { message: 'its sad!', id: 3, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) }\r\n            ]\r\n        }\r\n    ],\r\n    dialogsFromSearch: null,\r\n    isSearchMode: false,\r\n    userForMessage: null,\r\n    isFetching: false\r\n}\r\n\r\nexport const messagesReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            return {\r\n                ...state,\r\n                dialogItemsData: state.dialogItemsData.map((i) => {\r\n                    return i.userId === action.payload.id\r\n                        ? { ...i, messages: [...i.messages, { message: action.payload.message, id: i.messages.length + 1, right: true, \r\n                            date: action.payload.date, timeFormat: action.payload.timeFormat }] }\r\n                        : { ...i }\r\n                }).sort((a, b) => { return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date })\r\n            }\r\n        case SET_NEW_DIALOG:\r\n            return {\r\n                ...state,\r\n                dialogItemsData: [...state.dialogItemsData, {\r\n                    name: action.payload.name, userId: action.payload.userId, avatar: action.payload.photo || avatar,\r\n                    messages: [{ message: action.payload.message, id: 1, right: true, \r\n                    date: action.payload.date, timeFormat: action.payload.timeFormat }]\r\n                }].sort((a, b) => { return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date })\r\n            }\r\n        case SEARCH_DIALOG:\r\n            return {\r\n                ...state,\r\n                dialogsFromSearch: state.dialogItemsData.filter(i=>i.name.toLowerCase().includes(action.payload.word.toLowerCase()))\r\n            }\r\n        case IS_SEARCH_MODE:\r\n            return{\r\n                ...state,\r\n                isSearchMode: action.payload\r\n            }\r\n        case SET_USER_FOR_MESSAGE:\r\n            return{\r\n                ...state,\r\n                userForMessage: action.payload\r\n            }    \r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\nexport const sendMessage = (message, id) => ({ type: SEND_MESSAGE, payload:{message, id, date: Date.now(),  timeFormat: formatTime(new Date())  } });\r\nexport const setNewDialog = (message, userId, photo, name) => ({ type: SET_NEW_DIALOG, payload: {userId, photo, name, message, date: Date.now(), timeFormat: formatTime(new Date())} })\r\nexport const setIsFetching = (isFetching) => ({type: IS_FETCHING, payload: isFetching})\r\nexport const setSearch = (word) => ({type: SEARCH_DIALOG, payload: {word}})\r\nexport const setSearchMode = (isMode) => ({type: IS_SEARCH_MODE, payload: isMode})\r\nexport const setUserForMessages = (photo,name) => ({type: SET_USER_FOR_MESSAGE, payload: name ? { photo, name} : null})\r\n\r\nexport const messageFromPopUp = (data, user) => (dispatch, getState) => {\r\n\r\n    const userId = user.id || user.userId;\r\n    const photo = user.photos.small;\r\n    const name = user.name || user.fullName;\r\n\r\n    if (getState().messages.dialogItemsData.find(i => i.userId === userId)) { //if dialog already exists\r\n\r\n        dispatch(sendMessage(data.messagePopup, userId))\r\n    }\r\n    else {\r\n        dispatch(setNewDialog(data.messagePopup, userId, photo, name))\r\n    }\r\n}\r\n\r\n\r\nexport const getUserForMessages = (userId) => async(dispatch) => {\r\n    dispatch(setIsFetching(true))\r\n    const response = await (profileAPI.getProfile(userId)).catch(()=>{\r\n        dispatch(setUserForMessages(null))\r\n    })\r\n    \r\n      if(response){\r\n        const photo  = response.data.photos.small\r\n        const name = response.data.fullName\r\n        dispatch(setUserForMessages(photo, name))  \r\n    } \r\n    dispatch(setIsFetching(false))\r\n}\r\n\r\nexport default messagesReducer;","\r\nconst today = {\r\n    hour: 'numeric',\r\n    minute: 'numeric'\r\n}\r\nconst month = {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    hour: 'numeric',\r\n    minute: 'numeric'\r\n    \r\n}\r\nconst year = {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    hour: 'numeric',\r\n    minute: 'numeric'\r\n   \r\n}\r\nconst other = {\r\n    month: 'long',\r\n    year: 'numeric'\r\n}\r\n\r\n const formatTime = (date) =>{\r\n\r\n    if(isToday(date)) return date.toLocaleString(\"en-US\", today)\r\n    else if(isMonth(date)) return date.toLocaleString(\"en-US\", month)\r\n    else if(isYear(date)) return date.toLocaleString('en-US', year)\r\n    return date.toLocaleString('en-US', other)\r\n}\r\n\r\nconst isToday = (date) => {\r\n    const today = new Date()\r\n    return date.getDate() === today.getDate() &&\r\n    date.getMonth() === today.getMonth() &&\r\n    date.getFullYear() === today.getFullYear()\r\n  }\r\n  const isMonth = (date) => {\r\n    const today = new Date()\r\n    return date.getMonth() === today.getMonth() &&\r\n    date.getFullYear() === today.getFullYear()\r\n  }\r\n  const isYear = (date) => {\r\n    const today = new Date()\r\n    return date.getFullYear() === today.getFullYear()\r\n  }\r\n  export const formatTimeToLastMessage = (date) =>{\r\n    if(isToday(date)) return date.toLocaleString(\"en-US\", today)\r\n    else if(isMonth(date)) return date.toLocaleString(\"en-US\", {month: 'short', day: 'numeric'})\r\n    else if(isYear(date)) return date.toLocaleString('en-US', {month: 'short', day: 'numeric'})\r\n    return date.toLocaleString('en-US', other)\r\n}\r\n  export default formatTime","import React, { useState } from 'react'\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\nimport {  change } from 'redux-form'\r\n\r\n\r\nconst EmojiPickerForm = ({formName, fieldName, Form, styles, dispatch, ...props}) => {\r\n    const [emojiPickerMode, setEPMode] = useState(false);\r\n\r\n    const addEmoji = (e) => {\r\n        const sym = e.unified.split('-')\r\n        const codesArray = []\r\n\r\n        sym.map(el => codesArray.push('0x' + el))\r\n        const emoji = String.fromCodePoint(...codesArray)\r\n\r\n        dispatch(change(formName, fieldName, Form.values ? Form.values[fieldName] + emoji : emoji));\r\n    }\r\n\r\n    return <div onClick={() => { setEPMode(true) }} onMouseEnter={() => { setEPMode(true) }} onMouseLeave={() => { setEPMode(false) }}>\r\n        <span role='button' className={styles.buttomEmoji}></span>\r\n        {emojiPickerMode && <Picker style={{ position: 'absolute', bottom: props.bottom, right: props.right, width: props.width}} onSelect={addEmoji} native={true} showPreview={false} \r\n        showSkinTones={false} title='' />}\r\n    </div>\r\n    // position: 'absolute', bottom: '100%', right: '0', width: '50%'\r\n}\r\nexport const EmojiPickerStatus = ({status, setStatus, styles}) =>{\r\n    const [emojiPickerMode, setEPMode] = useState(false);\r\n\r\n    const addEmoji = (e) => {\r\n        const sym = e.unified.split('-')\r\n        const codesArray = []\r\n\r\n        sym.map(el => codesArray.push('0x' + el))\r\n        const emoji = String.fromCodePoint(...codesArray)\r\n        setStatus(status + emoji);      \r\n    }\r\n    return <div onClick={() => { setEPMode(true) }}  onMouseEnter={() => { setEPMode(true) }} onMouseLeave={() => { setEPMode(false) }}>\r\n        <span role='button' className={styles.buttomEmoji}></span>\r\n        {emojiPickerMode && <Picker style={{ position: 'absolute', bottom: '-320%', right: '0px', width: '100%' }}  showPreview={false}  \r\n        showSkinTones={false} emojiSize={16} \r\n        title=''  onSelect={addEmoji} native={true} />}\r\n    </div>\r\n\r\n}\r\nexport default EmojiPickerForm;\r\n\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\n const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render(){\r\n            if(!this.props.isAuth) return <Redirect to='/login' />\r\n            \r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n    return connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n}\r\n\r\nexport default withAuthRedirect;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"popupAvatar_popup__1QYEs\",\"closePopup\":\"popupAvatar_closePopup__1HIYy\"};"],"sourceRoot":""}