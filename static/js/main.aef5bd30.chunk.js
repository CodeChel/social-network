(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports={logo:"sideBar_logo__9RRw6",navBar:"sideBar_navBar__YBnCk",menu:"sideBar_menu__1xC9a",head:"sideBar_head__2B_B6",news:"sideBar_news__J8skV",messages:"sideBar_messages__1n1Nl",friends:"sideBar_friends__3vyPd",communities:"sideBar_communities__3EApI",events:"sideBar_events__3aqKz",pages:"sideBar_pages__3WtuN",manage:"sideBar_manage__2D3te",shortcuts:"sideBar_shortcuts__21j8D",google:"sideBar_google__1fxTt",combinator:"sideBar_combinator__2qM8s",amazon:"sideBar_amazon__2m_BQ",active:"sideBar_active__3mlhi"}},11:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f});var a=n(7),r=n(16),o=n(0),s=n.n(o),c=n(51),i=n.n(c),u=n(93),l=function(e){var t=e.touched&&e.error;return s.a.createElement("div",{className:i.a.formControl+" "+(t?i.a.error:"")},s.a.createElement("div",null,e.element),t&&s.a.createElement("span",null,e.error))},m=function(e){var t=e.input,n=e.meta,o=Object(r.a)(e,["input","meta"]),c=s.a.createElement("input",Object(a.a)({},t,o));return s.a.createElement(l,Object.assign({element:c},n))},p=function(e){var t=e.input,n=e.meta,o=Object(r.a)(e,["input","meta"]),c=s.a.createElement("textarea",Object(a.a)({},t,o));return s.a.createElement(l,Object.assign({element:c},n))},f=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;return s.a.createElement("div",{className:i.a.formCustom},r&&s.a.createElement("label",{htmlFor:t},o),s.a.createElement(u.a,Object.assign({placeholder:e,name:t,validate:n,component:a},c)))}},129:function(e,t,n){"use strict";n.d(t,"b",function(){return s});var a=n(41),r=n(7),o={dialogItemsData:[{name:"Henry Dinn",id:1},{name:"Michael Ross",id:2},{name:"Dick Irvin",id:3},{name:"Dafna Grass",id:4}],messagesData:[{message:"Hey,how are you?",id:1},{message:"Great! How are you?",id:2,right:!0},{message:"Im fine! Go work!",id:3},{message:"Lets go!!!",id:4,right:!0}]},s=function(e){return{type:"messages-reducer/SEND-MESSAGE",message:e.message}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"messages-reducer/SEND-MESSAGE":return Object(r.a)({},e,{messagesData:[].concat(Object(a.a)(e.messagesData),[{id:5,message:t.message,right:!0}])});default:return e}}},132:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAABHNCSVQICAgIfAhkiAAAAhdJREFUaIHtmjFIW0EYx//fI0aNiWBt0GSoDlYwIBhwERpxkgYqxSEFdXB00sFRXauTDnGyFBcHBelQaHVWhy6KTookg3GwQvMc9GlIbLkOomAxeS++l3d35X7jve+++37cvXt38Kgn8fmF5vmzAGKDBKqHRDCwS2L4ngNN7K2OZT1a1e95Ao0CxLu2siFQPQhDtXfFD2lgFOddlF0YY+8BRhoRmngXYxciqo0k1qs03oU4iZIRFQ/vAgDA7/OiraURoWAAzS8DD+2pjA7jJg8ASGd0GDeFknm4ysR725F424nXLY2msRMfv2H/8KxkDBcZv8+L2cl+RDvCjuZ1Xcbv8yI5M2BpNsrF9Q1gaqyvIiKAyzLRSBix7taK5XdVJh5rr2h+V9+ZaEfINCZ9qsO4LmD/6PHOdf7ryrSvazKhYADNwUDJmLmlLWxsHz97DNeWmZlI+lS3JQIIdJzZ2T2xnUMYGSdQMqKiZESF3gwvMScTLs4MoMvCx7FcYiOfSj6/uG2olmJmDo5+WoqTQsYqUsj8e04rhhQyZnf/e6SQSWV0S3FSyBjXeUtxjl8BUpnsk+3+Oi/aXhW/Lp9njaJ3Fqsz47hMcuXHk+3RSBjJ6XdF+21uH2P5y56tsaVYZlZRMqKiZERFyYiKkhEVJSMqSkZUlIyo/Hcya7yLcIC1w/UPBU+OYbwGyEv78xzoa45hknctjvMXmAh+sv75oN4AAAAASUVORK5CYII="},135:function(e,t,n){e.exports=n.p+"static/media/Rolling-1s-200px.6fd59ae0.svg"},136:function(e,t,n){e.exports={preloader:"preloader_preloader__3Xfze"}},137:function(e,t,n){e.exports={status:"profileStatus_status__dBs3G"}},138:function(e,t,n){e.exports={name:"profileDescription_name__zng_B",container:"profileDescription_container__2lgaL"}},140:function(e,t,n){e.exports={profile:"Profile_profile__1YLKP"}},142:function(e,t,n){e.exports={popup:"popUp_popup__1DRSj",popupInner:"popUp_popupInner__3FGzd",closePopup:"popUp_closePopup__2zFqI"}},143:function(e,t,n){e.exports={footer:"footer_footer__15YAN"}},170:function(e,t,n){e.exports=n(304)},175:function(e,t,n){},176:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});var a=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}}},25:function(e,t,n){e.exports={container:"AboutProfile_container__3KhX9",aboutMe:"AboutProfile_aboutMe__3UaZd",contacts:"AboutProfile_contacts__1NrWD",row:"AboutProfile_row__Qu76H",nameInfo:"AboutProfile_nameInfo__3_4Bf"}},296:function(e,t,n){},297:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){},300:function(e,t,n){},304:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a=n(0),r=n.n(a),o=n(69),s=n.n(o),c=(n(175),n(30)),i=n(31),u=n(33),l=n(32),m=n(34),p=(n(176),n(10)),f=n.n(p),d=n(132),h=n.n(d),E=n(13),g=n(12),_=Object(g.b)(function(e){return{authId:e.auth.id}},null)(function(e){return r.a.createElement("div",{className:"sideBar"},r.a.createElement(E.b,{className:f.a.logo,to:"/Profile/"+e.authId},r.a.createElement("img",{src:h.a,alt:"logo"})),r.a.createElement("nav",{className:f.a.navBar},r.a.createElement("ul",{className:f.a.menu}," ",r.a.createElement("span",{className:f.a.head},"Menu"),r.a.createElement("li",{className:f.a.news},r.a.createElement(E.b,{activeClassName:f.a.active,to:"/news"},"News")),r.a.createElement("li",{className:f.a.messages},r.a.createElement(E.b,{activeClassName:f.a.active,to:"/messages"},"Messages")),r.a.createElement("li",{className:f.a.friends},r.a.createElement(E.b,{activeClassName:f.a.active,to:"/friends"},"Friends")),r.a.createElement("li",{className:f.a.communities},r.a.createElement(E.b,{activeClassName:f.a.active,to:"/communities"},"Communities")),r.a.createElement("li",{className:f.a.events},r.a.createElement(E.b,{activeClassName:f.a.active,to:"/events"},"Events")),r.a.createElement("li",{className:f.a.pages},r.a.createElement(E.b,{activeClassName:f.a.active,to:"/pages"},"Pages")),r.a.createElement("li",{className:f.a.manage},r.a.createElement(E.b,{activeClassName:f.a.active,to:"/manage"},"Manage apps")))),r.a.createElement("ul",{className:f.a.shortcuts},r.a.createElement("span",{className:f.a.head},"Shortcuts"),r.a.createElement("li",{className:f.a.google},r.a.createElement("a",{href:"#"},"Google Inc.")),r.a.createElement("li",{className:f.a.combinator},r.a.createElement("a",{href:"#"},"Y Combinator")),r.a.createElement("li",{className:f.a.amazon},r.a.createElement("a",{href:"#"},"Amazon"))))}),v=n(18),b=n(16),O=n(135),P=n.n(O),S=n(136),j=n.n(S),w=function(){return r.a.createElement("div",{className:j.a.preloader},r.a.createElement("img",{src:P.a,alt:""}))},y=n(35),N=n.n(y),I=n(47),C=n.n(I),F=n(59),M=n(137),k=n.n(M),A=function(e){var t=e.isMyPage,n=Object(b.a)(e,["isMyPage"]),o=Object(a.useState)(!1),s=Object(F.a)(o,2),c=s[0],i=s[1],u=Object(a.useState)(n.status),l=Object(F.a)(u,2),m=l[0],p=l[1];Object(a.useEffect)(function(){p(n.status)},[n.status]);return r.a.createElement("div",null,t?c?r.a.createElement("div",null,r.a.createElement("input",{autoFocus:!0,onChange:function(e){p(e.currentTarget.value)},onBlur:function(){i(!1),n.updateStatus(m)},value:m})):r.a.createElement("div",null,r.a.createElement("span",{onDoubleClick:function(){i(!0)},className:k.a.status},n.status||"set a status message")):r.a.createElement("div",null,n.status?n.status.length>100?n.status.slice(0,100):n.status:null))},T=n(138),U=n.n(T),x=n(93),D=n(130),L=n(11),R=n(22),B=n(25),G=n.n(B),z=Object(D.a)({form:"edit-profile"})(function(e){var t=e.handleSubmit,n=e.profile,a=Object(b.a)(e,["handleSubmit","profile"]);return r.a.createElement("form",{onSubmit:t},r.a.createElement("h3",null,"Full name"),Object(L.c)("Full Name","fullName",[R.b],L.a,!1,null),r.a.createElement("label",null,"Looking for a Job: "),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement(x.a,{name:"lookingForAJob",component:"input",type:"radio",value:"true"})," Yes"),r.a.createElement("label",null,r.a.createElement(x.a,{name:"lookingForAJob",component:"input",type:"radio",value:"false",checked:!0})," No")),r.a.createElement("h3",null,"Skills:"),Object(L.c)(null,"lookingForAJobDescription",[R.b],L.b,!1,null,null,{colls:10,rows:30}),r.a.createElement("h3",null,"About me:"),Object(L.c)(null,"aboutMe",[R.b],L.b,!1,null,null,{colls:10,rows:30}),r.a.createElement("h2",null,"Contacts:"),Object.keys(n.contacts).map(function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,e),Object(L.c)(e,"contacts."+e,null,L.a,!1,null,{value:n.contacts[e]}))}),r.a.createElement(v.a,{when:a.dirty&&_,message:"You have unsaved changes, are you sure you want to leave?"}),r.a.createElement("button",null,"save"))}),H=function(e){var t=e.setEditProfile,n=e.isEditMode,a=e.profile,o=e.isMyPage,s=e.saveProfileData;return r.a.createElement("div",{className:G.a.container},r.a.createElement("div",{className:G.a.aboutMe},"About me"),a.aboutMe&&r.a.createElement("div",{className:G.a.row}," ",r.a.createElement("div",{className:G.a.nameInfo},"Description:  ")," ",r.a.createElement("div",null,a.aboutMe)),r.a.createElement("div",{className:G.a.row},r.a.createElement("div",{className:G.a.nameInfo},"Looking for a job:")," ",r.a.createElement("div",null,a.lookingForAJob?"yes":"no"),"   "),a.lookingForAJobDescription&&r.a.createElement("div",{className:G.a.row}," ",r.a.createElement("div",{className:G.a.nameInfo},"Skills:")," ",r.a.createElement("div",null,a.lookingForAJobDescription),"  "),r.a.createElement("div",{className:G.a.contacts},"Contacts"),!n&&Object.keys(a.contacts).map(function(e){if(a.contacts[e])return r.a.createElement("div",{className:G.a.row},r.a.createElement("div",{className:G.a.nameInfo},e+":"),r.a.createElement("div",null,r.a.createElement("a",{href:a.contacts[e],target:"_blank"},a.contacts[e].slice(8))))}),o&&!n&&r.a.createElement("button",{onClick:function(){t(!0)}},"Edit"),o&&n&&r.a.createElement(z,{isEditMode:n,initialValues:a,onSubmit:function(e){s(e)},profile:a}))},Y=function(e){var t=e.setEditProfile,n=e.isEditMode,a=e.profile,o=e.isMyPage,s=Object(b.a)(e,["setEditProfile","isEditMode","profile","isMyPage"]);return r.a.createElement("div",null,r.a.createElement("h2",{className:U.a.name},a.fullName),r.a.createElement(A,{isMyPage:o,updateStatus:s.updateStatus,status:s.status}),r.a.createElement(H,{setEditProfile:t,isEditMode:n,profile:a,isMyPage:o,saveProfileData:s.saveProfileData}))},J=function(e){var t=e.profile,n=e.isMyPage,a=Object(b.a)(e,["profile","isMyPage"]);return t?r.a.createElement("div",{className:N.a.profileInfoContainer},r.a.createElement("div",{className:N.a.profileInfo},r.a.createElement("div",{className:a.isMyPage?N.a.avatarContainer+" "+N.a.avatarUpdate:N.a.avatarContainer},r.a.createElement("img",{className:N.a.avatar,src:t.photos.large?t.photos.large:C.a,alt:""}),n&&r.a.createElement("div",{className:N.a.changePhoto},r.a.createElement("label",{for:"upload-photo",className:N.a.changePhotoLabel},"Update photo"),r.a.createElement("input",{className:N.a.changePhotoInput,id:"upload-photo",type:"file",onChange:function(e){e.target.files[0]&&a.savePhoto(e.target.files[0])}}))),r.a.createElement(Y,Object.assign({setEditProfile:a.setEditProfile,isEditMode:a.isEditMode,isMyPage:n,profile:t},a)))):r.a.createElement(w,null)},Q=n(60),W=n.n(Q),q=Object(R.a)(500),X=Object(D.a)({form:"formPost"})(function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(x.a,{component:L.b,name:"postBody",cols:"30",rows:"10",validate:[R.b,q]}),r.a.createElement("button",{type:"submit",className:W.a.buttonPost},"Post"))}),K=function(e){return r.a.createElement("div",{className:W.a.postsContainer},r.a.createElement(X,{onSubmit:e.sendPost}),e.isMyPage,e.posts.map(function(e){return r.a.createElement("div",{key:e.id,className:W.a.itemPost},e.text,r.a.createElement("span",{className:W.a.likes},"likes: ",e.likesCount))}))},Z=n(140),V=n.n(Z),$=function(e){var t=e.sendPost,n=e.posts,a=e.profile,o=e.status,s=Object(b.a)(e,["sendPost","posts","profile","status"]);return r.a.createElement("div",{className:V.a.profile},r.a.createElement(J,{isMyPage:s.isMyPage,savePhoto:s.savePhotoThunk,profile:a,status:o,updateStatus:s.updateStatusThunk,saveProfileData:s.saveProfileData,isEditMode:s.isEditMode,setEditProfile:s.setEditProfile}),r.a.createElement(K,{isMyPage:s.isMyPage,sendPost:t,posts:n}))},ee=n(73),te=n(5),ne=n.n(te),ae=n(15),re=n(41),oe=n(7),se=n(141).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"d9c4ba29-f4a9-4d2d-8ba9-f90ead9fae9c"}}),ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return se.get("users?page=".concat(e,"&count=").concat(t)).then(function(e){return e.data})},ie=function(e){return se.post("follow/".concat(e),{}).then(function(e){return e.data})},ue=function(e){return se.delete("follow/".concat(e),{}).then(function(e){return e.data})},le=function(){return se.get("auth/me").then(function(e){return e.data})},me=function(e){return se.post("auth/login",{email:e.login,password:e.password,rememberMe:e.rememberMe,captcha:e.captcha}).then(function(e){return e.data})},pe=function(){return se.delete("auth/login").then(function(e){return e.data})},fe=function(){return se.get("security/get-captcha-url").then(function(e){return e.data})},de=function(e){return se.get("profile/".concat(e)).then(function(e){return e.data})},he=function(e){return se.get("profile/status/".concat(e)).then(function(e){return e.data})},Ee=function(e){return se.put("profile/status",{status:e}).then(function(e){return e.data})},ge=function(e){var t=new FormData;return t.append("image",e),se.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})},_e=function(e){return se.put("profile",e).then(function(e){return e.data})},ve=n(29),be={posts:[],currentTextPost:"",profile:null,status:"",isEditMode:!1},Oe=function(e){return{type:"profile-reducer/SET_EDIT_PROFILE",mode:e}},Pe=function(e){return{type:"profile-reducer/SET_USER_PROFILE",profile:e}},Se=function(e){return{type:"profile-reducer/SET_USER_STATUS",status:e}},je=function(e){return function(){var t=Object(ae.a)(ne.a.mark(function t(n){var a;return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de(e);case 2:a=t.sent,n(Pe(a));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile-reducer/SEND_POST":return Object(oe.a)({},e,{posts:[].concat(Object(re.a)(e.posts),[{text:t.post.postBody,id:1,likesCount:0}])});case"profile-reducer/SET_USER_PROFILE":return Object(oe.a)({},e,{profile:t.profile});case"profile-reducer/SET_USER_STATUS":return Object(oe.a)({},e,{status:t.status});case"profile-reducer/SET_PHOTO_PROFILE":return Object(oe.a)({},e,{profile:Object(oe.a)({},e.profile,{photos:t.photos})});case"profile-reducer/SET_EDIT_PROFILE":return Object(oe.a)({},e,{isEditMode:t.mode});case"profile-reducer/RESET_USER_POFILE":return be;default:return e}},ye=n(71),Ne=n(8),Ie=function(e){return e.ProfilePage.status},Ce=function(e){return e.ProfilePage.posts},Fe=function(e){return e.auth.isAuth},Me=function(e){return e.auth.id},ke=function(e){return e.ProfilePage.isEditMode},Ae=function(e){return e.ProfilePage.profile},Te=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;this.props.getProfileThunk(e),this.props.getStatusThunk(e)}},{key:"componentWillUnmount",value:function(){this.props.resetProfile()}},{key:"componentDidMount",value:function(){console.log("componentDidMount"),this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){e.match.params.userId!==this.props.match.params.userId&&(this.props.resetProfile(),this.refreshProfile())}},{key:"render",value:function(){return console.log("render"),r.a.createElement($,Object.assign({},this.props,{isMyPage:this.props.authId==this.props.match.params.userId}))}}]),t}(r.a.Component),Ue=Object(Ne.d)(Object(g.b)(function(e){return{profile:Ae(e),status:Ie(e),posts:Ce(e),isAuth:Fe(e),authId:Me(e),isEditMode:ke(e)}},{setUserProfile:Pe,sendPost:function(e){return{type:"profile-reducer/SEND_POST",post:e}},getProfileThunk:je,getStatusThunk:function(e){return function(){var t=Object(ae.a)(ne.a.mark(function t(n){var a;return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,he(e);case 2:a=t.sent,n(Se(a));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updateStatusThunk:function(e){return function(){var t=Object(ae.a)(ne.a.mark(function t(n){return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee(e);case 2:0===t.sent.resultCode&&n(Se(e));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},savePhotoThunk:function(e){return function(){var t=Object(ae.a)(ne.a.mark(function t(n){var a;return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge(e);case 2:0===(a=t.sent).resultCode&&n({type:"profile-reducer/SET_PHOTO_PROFILE",photos:a.data.photos});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},saveProfileData:function(e){return function(){var t=Object(ae.a)(ne.a.mark(function t(n,a){var r,o,s,c;return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.id,t.next=3,_e(e);case 3:0===(o=t.sent).resultCode?(n(je(r)),n(Oe(!1))):(s=o.messages[0].indexOf(">"),c=o.messages[0].slice(s+1,-1).toLowerCase(),n(Object(ve.a)("edit-profile",{contacts:Object(ee.a)({},c,c+" incorrect")})));case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},setEditProfile:Oe,resetProfile:function(){return{type:"profile-reducer/RESET_USER_POFILE"}}}),v.h,ye.a)(Te),xe=(n(296),function(){return r.a.createElement("div",null)}),De=(n(297),function(){return r.a.createElement("div",null)}),Le=(n(298),function(){return r.a.createElement("div",null)}),Re=(n(299),function(){return r.a.createElement("div",null)}),Be=(n(300),function(){return r.a.createElement("div",null)}),Ge="friends-reducer/FOLLOW",ze={users:[],pageSize:30,totalUsersCout:0,currentPage:1,isFetching:!1,followingInProgress:[],messageMode:!1,messageId:0},He=function(e){return{type:Ge,id:e}},Ye=function(e){return{type:"friends-reducer/UNFOLLOW",id:e}},Je=function(e){return{type:"friends-reducer/SET-USERS",users:e}},Qe=function(e){return{type:"friends-reducer/SET_CURRENT_PAGE",currentPage:e}},We=function(e){return{type:"friends-reducer/SET_TOTAL_COUNT",count:e}},qe=function(e){return{type:"friends-reducer/TOGGLE_IS_FETCHING",isFetching:e}},Xe=function(e,t){return{type:"friends-reducer/TOGGLE_IS_FOLOWING_PROGRESS",isFetching:e,userId:t}},Ke=function(){var e=Object(ae.a)(ne.a.mark(function e(t,n,a,r){return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(qe(!0)),t(Xe(!0,r)),e.next=4,n(r);case 4:0===e.sent.resultCode&&(t(a(r)),t(Xe(!1,r)),t(qe(!1)));case 6:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return Object(oe.a)({},e,{users:e.users.map(function(e){return t.id===e.id?Object(oe.a)({},e,{followed:!0}):e})});case"friends-reducer/UNFOLLOW":return Object(oe.a)({},e,{users:e.users.map(function(e){return t.id===e.id?Object(oe.a)({},e,{followed:!1}):e})});case"friends-reducer/SET-USERS":return Object(oe.a)({},e,{users:t.users});case"friends-reducer/ADD_MORE_USER":return Object(oe.a)({},e,{users:[].concat(Object(re.a)(e.users),Object(re.a)(t.users))});case"friends-reducer/SET_CURRENT_PAGE":return Object(oe.a)({},e,{currentPage:t.currentPage});case"friends-reducer/SET_TOTAL_COUNT":return Object(oe.a)({},e,{totalUsersCout:t.count});case"friends-reducer/TOGGLE_IS_FETCHING":return Object(oe.a)({},e,{isFetching:t.isFetching});case"friends-reducer/TOGGLE_IS_FOLOWING_PROGRESS":return Object(oe.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(re.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter(function(e){return e!==t.userId})});case"friends-reducer/SET_MESSAGE_MODE":return Object(oe.a)({},e,{messageMode:t.isMessage,messageId:t.id});default:return e}},Ve=(n(98),n(9)),$e=n.n(Ve),et=function(e){var t=e.user,n=e.follow,a=e.unfollow,o=e.followingInProgress,s=e.setMessageMode;return r.a.createElement("div",{className:$e.a.userContainer},r.a.createElement("span",null,r.a.createElement("div",{className:$e.a.avatar},r.a.createElement(E.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:null!=t.photos.small?t.photos.small:C.a,alt:"",className:$e.a.usersAvatar}))),r.a.createElement("div",{className:$e.a.userMenu},r.a.createElement("div",{className:$e.a.hideMenu},t.followed?r.a.createElement("button",{onClick:function(){return a(t.id)},disabled:o.some(function(e){return e===t.id})},"Unfollow"):r.a.createElement("button",{onClick:function(){return n(t.id)},disabled:o.some(function(e){return e===t.id})},"Follow"),r.a.createElement("button",{onClick:function(){s(!0,t.id)}},"Send Message"),r.a.createElement("button",null,"Show Friends")))),r.a.createElement("div",{className:$e.a.userInfo},r.a.createElement("span",null,r.a.createElement("div",{className:$e.a.userName},t.name)),r.a.createElement("span",null,t.status?t.status.length>35?t.status.slice(0,35):t.status:"no status")))},tt=n(142),nt=n.n(tt),at=function(e){var t=e.Component,n=Object(b.a)(e,["Component"]);return r.a.createElement("div",{onClick:function(e){e.target===e.currentTarget&&n.closePopup()},className:nt.a.popup},r.a.createElement(t,n))},rt=Object(D.a)({form:"message-popup"})(function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,className:$e.a.messageForm},Object(L.c)(null,"message-popup",[R.b],"textarea",null,null,{cols:57.5,rows:8}),r.a.createElement("div",null,r.a.createElement("button",{className:$e.a.buttonForm,type:"submit"},"Send")))}),ot=function(e){var t=e.user,n=e.closePopup;return r.a.createElement("div",{className:$e.a.popup},r.a.createElement("div",{className:$e.a.headerPopup},r.a.createElement("div",null,"New message"),r.a.createElement("div",{className:$e.a.linkMessage},r.a.createElement(E.b,{to:"messages"},"Open full chat with ",t.name)),r.a.createElement("div",{onClick:n,className:$e.a.closePopup,role:"button"})),r.a.createElement("div",{className:$e.a.popupBody},r.a.createElement("div",{className:$e.a.userHeader},r.a.createElement("div",null,r.a.createElement(E.b,{to:"profile/".concat(t.id)},r.a.createElement("img",{src:null!=t.photos.small?t.photos.small:C.a,alt:"",className:$e.a.popupAvatar}))),r.a.createElement("div",{className:$e.a.usernameBlock},r.a.createElement(E.b,{to:"profile/".concat(t.id)},r.a.createElement("p",{className:$e.a.popupUserName},t.name)),r.a.createElement("p",{className:$e.a.onlineStatus},"Offline")))),r.a.createElement(rt,null))},st=function(e){var t=e.totalUsersCount,n=e.pageSize,o=e.currentPage,s=(e.onPageChanged,e.users),c=e.isMessageMode,i=e.messageId,u=Object(b.a)(e,["totalUsersCount","pageSize","currentPage","onPageChanged","users","isMessageMode","messageId"]),l=function(){var e=document.getElementById("user-list");window.scrollY+window.innerHeight>e.clientHeight+e.offsetTop-100&&!u.isFetching&&Math.ceil(t/n)>=o+1&&u.getMoreUsers(o+1,n)};return Object(a.useEffect)(function(){return window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",l)}}),r.a.createElement("div",{className:$e.a.mainContainer},r.a.createElement("div",{className:$e.a.container,id:"user-list"},s.map(function(e){return r.a.createElement(et,{setMessageMode:u.setMessageMode,user:e,key:e.id,followingInProgress:u.followingInProgress,unfollow:u.unFollowThunk,follow:u.followThunk})})),c?r.a.createElement(at,{user:s.filter(function(e){return e.id===i})[0],Component:ot,closePopup:function(){u.setMessageMode(!1,null)}}):null)},ct=function(e){return e.FriendsPage.users},it=function(e){return e.FriendsPage.pageSize},ut=function(e){return e.FriendsPage.totalUsersCout},lt=function(e){return e.FriendsPage.currentPage},mt=function(e){return e.FriendsPage.isFetching},pt=function(e){return e.FriendsPage.followingInProgress},ft=function(e){return e.FriendsPage.messageId},dt=function(e){return e.FriendsPage.messageMode},ht=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onPageChanged=function(e){var t=n.props.pageSize;n.props.changeCurrentPageThunk(e,t)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.pageSize;this.props.getUsersThunk(1,e)}},{key:"componentDidUpdate",value:function(){this.props}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(w,null):null,r.a.createElement(st,Object.assign({},this.props,{currentPage:this.props.currentPage,onPageChanged:this.onPageChanged})))}}]),t}(r.a.Component),Et=Object(Ne.d)(Object(g.b)(function(e){return{users:ct(e),pageSize:it(e),totalUsersCount:ut(e),currentPage:lt(e),isFetching:mt(e),followingInProgress:pt(e),messageId:ft(e),isMessageMode:dt(e)}},{toggleFollowingProgress:Xe,getUsersThunk:function(e,t){return function(){var n=Object(ae.a)(ne.a.mark(function n(a){var r;return ne.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(qe(!0)),n.next=3,ce(e,t);case 3:r=n.sent,a(qe(!1)),a(Je(r.items)),a(We(r.totalCount));case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},changeCurrentPageThunk:function(e,t){return function(){var n=Object(ae.a)(ne.a.mark(function n(a){var r;return ne.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(Qe(e)),a(qe(!0)),n.next=4,ce(e,t);case 4:r=n.sent,a(qe(!1)),a(Je(r.items));case 8:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},unFollowThunk:function(e){return function(){var t=Object(ae.a)(ne.a.mark(function t(n){return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ke(n,ue,Ye,e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},followThunk:function(e){return function(){var t=Object(ae.a)(ne.a.mark(function t(n){return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ke(n,ie,He,e);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},setMessageMode:function(e,t){return{type:"friends-reducer/SET_MESSAGE_MODE",isMessage:e,id:t}},getMoreUsers:function(e,t){return function(){var n=Object(ae.a)(ne.a.mark(function n(a){var r;return ne.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(Qe(e)),a(qe(!0)),n.next=4,ce(e,t);case 4:r=n.sent,a({type:"friends-reducer/ADD_MORE_USER",users:r.items}),a(qe(!1)),a(We(r.totalCount));case 8:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}}),ye.a)(ht),gt=(n(301),{id:null,email:null,login:null,isAuth:!1,captchaURL:null}),_t=function(e){return{type:"auth-reducer/SET_USER",data:e}},vt=function(){return function(){var e=Object(ae.a)(ne.a.mark(function e(t){var n;return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:0===(n=e.sent).resultCode&&t(_t(n.data));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},bt=function(){return function(){var e=Object(ae.a)(ne.a.mark(function e(t){var n,a;return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:n=e.sent,a=n.url,t({type:"auth-reducer/GET_CAPTHCA_SUCCESS",payload:{captchaURL:a}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth-reducer/SET_USER":return Object(oe.a)({},e,t.data,{isAuth:!0});case"auth-reducer/GET_CAPTHCA_SUCCESS":return Object(oe.a)({},e,t.payload);case"auth-reducer/RESET_USER":return{initialState:gt};default:return e}},Pt=n(143),St=n.n(Pt),jt=function(e){return r.a.createElement("div",{className:St.a.footer},e.isAuth?r.a.createElement("div",null,e.login," ",r.a.createElement("button",{onClick:e.logOutThunk},"logOut")):r.a.createElement("div",null,"you are not authorized"))},wt=function(e){return e.auth.isAuth},yt=function(e){return e.auth.login},Nt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(jt,this.props)}}]),t}(r.a.Component),It=Object(g.b)(function(e){return{isAuth:wt(e),login:yt(e)}},{logOutThunk:function(){return function(){var e=Object(ae.a)(ne.a.mark(function e(t){return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:0===e.sent.resultCode&&t({type:"auth-reducer/RESET_USER"});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(Nt),Ct=n(51),Ft=n.n(Ct),Mt=Object(D.a)({form:"login"})(function(e){var t=e.captchaURL,n=e.error,a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a},Object(L.c)("Login","login",[R.b],L.a),Object(L.c)("Password","password",[R.b],L.a,{type:"password"}),Object(L.c)(null,"rememberMe",null,L.a,!0,"remember me",{type:"checkbox"}),n&&r.a.createElement("div",{className:Ft.a.errorLogIn},n),t&&r.a.createElement("img",{src:t,alt:"capthca"}),t&&Object(L.c)("enter the cpathca-code","captcha",[R.b],L.a),r.a.createElement("button",{type:"submit"},"Login"))}),kt=Object(g.b)(function(e){return{isAuth:e.auth.isAuth,authId:e.auth.id,captchaURL:e.auth.captchaURL}},{logInThunk:function(e){return function(){var t=Object(ae.a)(ne.a.mark(function t(n){var a,r;return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me(e);case 2:0===(a=t.sent).resultCode?n(vt(a.data)):(10===a.resultCode&&n(bt()),r=a.messages.length?a.messages[0]:"Some error",n(Object(ve.a)("login",{_error:r})));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(function(e){var t=e.captchaURL,n=e.logInThunk,a=e.isAuth,o=e.authId;return a?r.a.createElement(v.b,{to:"/profile/"+o}):r.a.createElement("div",null,r.a.createElement("h1",null,"LOGIN "),r.a.createElement(Mt,{captchaURL:t,onSubmit:function(e){var t=e.login,a=e.password,r=e.rememberMe,o=void 0!==r&&r,s=e.captcha;n({login:t,password:a,rememberMe:o,captcha:void 0===s?null:s})}}))}),At={initialized:!1},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At;switch((arguments.length>1?arguments[1]:void 0).type){case"app-reducer/INITIALIZED_SUCCESS":return Object(oe.a)({},e,{initialized:!0});default:return e}},Ut=n(129),xt=n(144),Dt=n(131),Lt=Object(Ne.c)({Messages:Ut.a,FriendsPage:Ze,ProfilePage:we,auth:Ot,form:Dt.a,app:Tt}),Rt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ne.d,Bt=Object(Ne.e)(Lt,Rt(Object(Ne.a)(xt.a))),Gt=function(e){return function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement(w,null)},r.a.createElement(e,t))}},zt=r.a.lazy(function(){return n.e(3).then(n.bind(null,308))}),Ht=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeAppThunk()}},{key:"render",value:function(){var e=this;return this.props.initialized?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(_,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(v.e,null,r.a.createElement(v.c,{exact:!0,path:"/",render:function(){return r.a.createElement(v.b,{to:"/profile/".concat(e.props.authId)})}}),r.a.createElement(v.c,{exact:!0,path:"/profile",render:function(){return r.a.createElement(v.b,{to:"/profile/".concat(e.props.authId)})}}),r.a.createElement(v.c,{path:"/profile/:userId?",render:function(){return r.a.createElement(Ue,null)}}),r.a.createElement(v.c,{path:"/news",component:xe}),r.a.createElement(v.c,{exact:!0,path:"/messages",render:Gt(zt)}),r.a.createElement(v.c,{path:"/friends",render:function(){return r.a.createElement(Et,null)}}),r.a.createElement(v.c,{path:"/communities",component:De}),r.a.createElement(v.c,{path:"/events",component:Le}),r.a.createElement(v.c,{path:"/pages",component:Re}),r.a.createElement(v.c,{path:"/manage",component:Be}),r.a.createElement(v.c,{path:"/login",component:kt}),r.a.createElement(v.c,{path:"*",render:function(){return r.a.createElement("div",null," 404 not found ")}})))),r.a.createElement(It,null)):r.a.createElement(w,null)}}]),t}(r.a.Component),Yt=Object(Ne.d)(v.h,Object(g.b)(function(e){return{initialized:e.app.initialized,authId:e.auth.id}},{initializeAppThunk:function(){return function(e){var t=e(vt());Promise.all([t]).then(function(){e({type:"app-reducer/INITIALIZED_SUCCESS"})})}}}))(Ht),Jt=function(){return r.a.createElement(E.a,null,r.a.createElement(g.a,{store:Bt},r.a.createElement(Yt,null)))};s.a.render(r.a.createElement(Jt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},35:function(e,t,n){e.exports={profileInfo:"profileInfo_profileInfo__ObJQb",avatarContainer:"profileInfo_avatarContainer__2Xy2w",changePhoto:"profileInfo_changePhoto__4wqGV",avatar:"profileInfo_avatar__273JQ",profileInfoContainer:"profileInfo_profileInfoContainer__Buw85",changePhotoInput:"profileInfo_changePhotoInput__ibvx3",changePhotoLabel:"profileInfo_changePhotoLabel__1ZL2B"}},47:function(e,t,n){e.exports=n.p+"static/media/ava.03e01a87.jpg"},51:function(e,t,n){e.exports={error:"FormControls_error__3S2AF",formControl:"FormControls_formControl__1_M5Q",errorLogIn:"FormControls_errorLogIn__1Qjm8",formCustom:"FormControls_formCustom__2kQUr"}},60:function(e,t,n){e.exports={itemPost:"posts_itemPost__3EN8q",postsContainer:"posts_postsContainer__PPElQ",buttonPost:"posts_buttonPost__3l27h",likes:"posts_likes__2-sjm"}},71:function(e,t,n){"use strict";var a=n(30),r=n(31),o=n(33),s=n(32),c=n(34),i=n(0),u=n.n(i),l=n(12),m=n(18),p=function(e){return{isAuth:e.auth.isAuth}};t.a=function(e){var t=function(t){function n(){return Object(a.a)(this,n),Object(o.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(c.a)(n,t),Object(r.a)(n,[{key:"render",value:function(){return this.props.isAuth?u.a.createElement(e,this.props):u.a.createElement(m.b,{to:"/login"})}}]),n}(u.a.Component);return Object(l.b)(p)(t)}},9:function(e,t,n){e.exports={usersAvatar:"Friends_usersAvatar__lmeWh",selectedPage:"Friends_selectedPage__oaBcA",userContainer:"Friends_userContainer__inTHn",container:"Friends_container__2BTYM",mainContainer:"Friends_mainContainer__2iu3d",avatar:"Friends_avatar__3FrVo",userInfo:"Friends_userInfo__2vS9e",userName:"Friends_userName__2mr2F",userMenu:"Friends_userMenu__hLhDL",hideMenu:"Friends_hideMenu__20wSl",popup:"Friends_popup__1imjn",headerPopup:"Friends_headerPopup__yhyBI",popupBody:"Friends_popupBody__3Dn0f",popupAvatar:"Friends_popupAvatar__33osm",userHeader:"Friends_userHeader__2JJJY",usernameBlock:"Friends_usernameBlock__3Cuyk",linkMessage:"Friends_linkMessage__ygAu0",popupUserName:"Friends_popupUserName__32dLj",onlineStatus:"Friends_onlineStatus__ELNof",closePopup:"Friends_closePopup__3RoFG",messageForm:"Friends_messageForm__3lfMS",buttonForm:"Friends_buttonForm__RfQsg"}},98:function(e,t,n){e.exports={selectedPage:"paginator_selectedPage__1vz21",items:"paginator_items__j46ga"}}},[[170,1,2]]]);
//# sourceMappingURL=main.aef5bd30.chunk.js.map