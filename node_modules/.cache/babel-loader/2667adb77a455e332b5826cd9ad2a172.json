{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\WOW\\\\Documents\\\\GitHub\\\\react\\\\react-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"C:\\\\Users\\\\WOW\\\\Documents\\\\GitHub\\\\react\\\\react-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\WOW\\\\Documents\\\\GitHub\\\\react\\\\react-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import avatar from'../assets/img/ava.jpg';import formatTime from'../utils/timeFormat';import{profileAPI}from'../API/api';export var SEND_MESSAGE='messages-reducer/SEND-MESSAGE';export var SET_NEW_DIALOG='messages-reducer/SET_NEW_DIALOG';export var SEARCH_DIALOG='messages-reducer/SEARCH_DIALOG';export var IS_SEARCH_MODE='messages-reducer/IS_SEARCH_MODE';export var SET_USER_FOR_MESSAGE='messages-reducer/SET_USER_FOR_MESSAGE';export var IS_FETCHING='messages-reducer/IS_FETCHING';var initialState={dialogItemsData:[{name:'Suarez',userId:5081,avatar:'https://social-network.samuraijs.com/activecontent/images/users/5081/user-small.jpg?v=13',messages:[{message:'Hey,how are you?',id:1,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'Great! How are you?',id:2,right:true,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'Im fine! Go work!',id:3,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'Lets go!!!',id:4,right:true,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'Just do it!!!',id:5,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'ARE U KIDDING ME?',id:6,date:1574411457816,timeFormat:formatTime(new Date(1574411457816))},{message:'ops, sorry, not for you',id:7,date:1574411458116,timeFormat:formatTime(new Date(1574411458116))}]},{name:'Siarhei',userId:5217,avatar:'https://social-network.samuraijs.com/activecontent/images/users/5217/user-small.jpg?v=13',messages:[{message:'Hey,how are you?',id:1,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'Great! How are you?',id:2,right:true,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))}]},{name:'SeregaLucky',userId:1670,avatar:'https://social-network.samuraijs.com/activecontent/images/users/1670/user-small.jpg?v=13',messages:[{message:'Hello!',id:1,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'A group of people born on the same day, including Rebecca (Moore) and Jack (Ventimiglia), a married couple expecting triplets in Pittsburgh, and Kevin (Hartley), a handsome television actor growing bored of his fly bachelor lifestyle.',id:2,right:true,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'WOW!',id:3,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'YEAH, I LIKE IT!!!',id:4,right:true,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))},{message:'ITS AWESOME!!!',id:5,date:1574411457616,timeFormat:formatTime(new Date(1574411457616))}]},{name:'Andrej',userId:4987,avatar:'https://social-network.samuraijs.com/activecontent/images/users/4987/user-small.jpg?v=13',messages:[{message:'DO YOU KNOW REACT?',id:1,date:1564401457616,timeFormat:formatTime(new Date(1564401457616))},{message:'yes, what about u?',id:2,right:true,date:1564401457616,timeFormat:formatTime(new Date(1564401457616))},{message:'Me too!',id:3,date:1564401457616,timeFormat:formatTime(new Date(1564401457616))},{message:'React better than vue',id:4,right:true,date:1564401457616,timeFormat:formatTime(new Date(1564401457616))}]},{name:'remboinReact',userId:5287,avatar:'https://social-network.samuraijs.com/activecontent/images/users/5287/user-small.jpg?v=13',messages:[{message:'can we chat?',id:1,date:1564301457616,timeFormat:formatTime(new Date(1564301457616))},{message:'yes, why not?',id:2,right:true,date:1564301457616,timeFormat:formatTime(new Date(1564301457616))},{message:'it was a joke!',id:3,date:1564301457616,timeFormat:formatTime(new Date(1564301457616))},{message:'hehe, very funny',id:4,right:true,date:1564301457616,timeFormat:formatTime(new Date(1564301457616))}]},{name:'Vladimir Tuznichenko',userId:4948,avatar:'https://social-network.samuraijs.com/activecontent/images/users/4948/user-small.jpg?v=13',messages:[{message:'DO YOU KNOW REACT?',id:1,date:1564201457616,timeFormat:formatTime(new Date(1564201457616))},{message:'yes, what about u?',id:2,right:true,date:1564201457616,timeFormat:formatTime(new Date(1564201457616))},{message:'Me too!',id:3,date:1564201457616,timeFormat:formatTime(new Date(1564201457616))},{message:'React better than vue',id:4,right:true,date:1564201457616,timeFormat:formatTime(new Date(1564201457616))}]},{name:'justthefox',userId:5414,avatar:'https://social-network.samuraijs.com/activecontent/images/users/5414/user-small.jpg?v=13',messages:[{message:'Hello, im fox?',id:1,date:1564101457616,timeFormat:formatTime(new Date(1564101457616))},{message:'are u beast?',id:2,right:true,date:1564101457616,timeFormat:formatTime(new Date(1564101457616))},{message:'something like that...',id:3,date:1564101457616,timeFormat:formatTime(new Date(1564101457616))},{message:'its scary...',id:4,right:true,date:1564101457616,timeFormat:formatTime(new Date(1564101457616))},{message:'I dont think so...',id:5,date:1564101457616,timeFormat:formatTime(new Date(1564101457616))}]},{name:'React ninja',userId:1676,avatar:'https://social-network.samuraijs.com/activecontent/images/users/1676/user-small.jpg?v=13',messages:[{message:'DO YOU KNOW REACT?',id:1,date:1563201457616,timeFormat:formatTime(new Date(1563201457616))},{message:'yes, what about u?',id:2,right:true,date:1563201457616,timeFormat:formatTime(new Date(1563201457616))},{message:'Me too!',id:3,date:1563201457616,timeFormat:formatTime(new Date(1563201457616))},{message:'React better than vue',id:4,right:true,date:1563201457616,timeFormat:formatTime(new Date(1563201457616))}]},{name:'daze',userId:5053,avatar:'https://social-network.samuraijs.com/activecontent/images/users/5053/user-small.jpg?v=13',messages:[{message:'hu?',id:1,date:1563001457616,timeFormat:formatTime(new Date(1563001457616))},{message:'so-so',id:2,right:true,date:1563001457616,timeFormat:formatTime(new Date(1563001457616))},{message:'its sad!',id:3,date:1563001457616,timeFormat:formatTime(new Date(1563001457616))}]}],dialogsFromSearch:null,isSearchMode:false,userForMessage:null,isFetching:false};export var messagesReducer=function messagesReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SEND_MESSAGE:return _objectSpread({},state,{dialogItemsData:state.dialogItemsData.map(function(i){return i.userId===action.payload.id?_objectSpread({},i,{messages:[].concat(_toConsumableArray(i.messages),[{message:action.payload.message,id:i.messages.length+1,right:true,date:action.payload.date,timeFormat:action.payload.timeFormat}])}):_objectSpread({},i);}).sort(function(a,b){return b.messages[b.messages.length-1].date-a.messages[a.messages.length-1].date;})});case SET_NEW_DIALOG:return _objectSpread({},state,{dialogItemsData:[].concat(_toConsumableArray(state.dialogItemsData),[{name:action.payload.name,userId:action.payload.userId,avatar:action.payload.photo||avatar,messages:[{message:action.payload.message,id:1,right:true,date:action.payload.date,timeFormat:action.payload.timeFormat}]}]).sort(function(a,b){return b.messages[b.messages.length-1].date-a.messages[a.messages.length-1].date;})});case SEARCH_DIALOG:return _objectSpread({},state,{dialogsFromSearch:state.dialogItemsData.filter(function(i){return i.name.toLowerCase().includes(action.payload.word.toLowerCase());})});case IS_SEARCH_MODE:return _objectSpread({},state,{isSearchMode:action.payload});case SET_USER_FOR_MESSAGE:return _objectSpread({},state,{userForMessage:action.payload});default:return state;}};export var sendMessage=function sendMessage(message,id){return{type:SEND_MESSAGE,payload:{message:message,id:id,date:Date.now(),timeFormat:formatTime(new Date())}};};export var setNewDialog=function setNewDialog(message,userId,photo,name){return{type:SET_NEW_DIALOG,payload:{userId:userId,photo:photo,name:name,message:message,date:Date.now(),timeFormat:formatTime(new Date())}};};export var setIsFetching=function setIsFetching(isFetching){return{type:IS_FETCHING,payload:isFetching};};export var setSearch=function setSearch(word){return{type:SEARCH_DIALOG,payload:{word:word}};};export var setSearchMode=function setSearchMode(isMode){return{type:IS_SEARCH_MODE,payload:isMode};};export var setUserForMessages=function setUserForMessages(photo,name){return{type:SET_USER_FOR_MESSAGE,payload:name?{photo:photo,name:name}:null};};export var messageFromPopUp=function messageFromPopUp(data,user){return function(dispatch,getState){var userId=user.id||user.userId;var photo=user.photos.small;var name=user.name||user.fullName;if(getState().messages.dialogItemsData.find(function(i){return i.userId===userId;})){//if dialog already exists\ndispatch(sendMessage(data.messagePopup,userId));}else{dispatch(setNewDialog(data.messagePopup,userId,photo,name));}};};export var getUserForMessages=function getUserForMessages(userId){return function _callee(dispatch){var response,photo,name;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setIsFetching(true));_context.next=3;return _regeneratorRuntime.awrap(profileAPI.getProfile(userId).catch(function(){dispatch(setUserForMessages(null));}));case 3:response=_context.sent;if(response){photo=response.data.photos.small;name=response.data.fullName;dispatch(setUserForMessages(photo,name));}dispatch(setIsFetching(false));case 6:case\"end\":return _context.stop();}}});};};export default messagesReducer;","map":{"version":3,"sources":["C:/Users/WOW/Documents/GitHub/react/react-test/src/redux/messages-reducer.js"],"names":["avatar","formatTime","profileAPI","SEND_MESSAGE","SET_NEW_DIALOG","SEARCH_DIALOG","IS_SEARCH_MODE","SET_USER_FOR_MESSAGE","IS_FETCHING","initialState","dialogItemsData","name","userId","messages","message","id","date","timeFormat","Date","right","dialogsFromSearch","isSearchMode","userForMessage","isFetching","messagesReducer","state","action","type","map","i","payload","length","sort","a","b","photo","filter","toLowerCase","includes","word","sendMessage","now","setNewDialog","setIsFetching","setSearch","setSearchMode","isMode","setUserForMessages","messageFromPopUp","data","user","dispatch","getState","photos","small","fullName","find","messagePopup","getUserForMessages","getProfile","catch","response"],"mappings":"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","sourcesContent":["import avatar from '../assets/img/ava.jpg'\r\nimport formatTime from '../utils/timeFormat'\r\nimport {  profileAPI } from '../API/api'\r\n\r\nexport const SEND_MESSAGE = 'messages-reducer/SEND-MESSAGE'\r\nexport const SET_NEW_DIALOG = 'messages-reducer/SET_NEW_DIALOG'\r\nexport const SEARCH_DIALOG = 'messages-reducer/SEARCH_DIALOG'\r\nexport const IS_SEARCH_MODE = 'messages-reducer/IS_SEARCH_MODE'\r\nexport const SET_USER_FOR_MESSAGE = 'messages-reducer/SET_USER_FOR_MESSAGE'\r\nexport const IS_FETCHING = 'messages-reducer/IS_FETCHING'\r\n\r\nconst initialState = {\r\n    dialogItemsData: [\r\n        {\r\n            name: 'Suarez', userId: 5081, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5081/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hey,how are you?', id: 1, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Great! How are you?', id: 2, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Im fine! Go work!', id: 3,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Lets go!!!', id: 4, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Just do it!!!', id: 5,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'ARE U KIDDING ME?', id: 6,  date: 1574411457816, timeFormat: formatTime(new Date(1574411457816)) },\r\n                { message: 'ops, sorry, not for you', id: 7,  date: 1574411458116, timeFormat: formatTime(new Date(1574411458116)) }\r\n            ]\r\n\r\n        },\r\n        {\r\n            name: 'Siarhei', userId: 5217, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5217/user-small.jpg?v=13', \r\n            messages: [\r\n                { message: 'Hey,how are you?', id: 1, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Great! How are you?', id: 2, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'SeregaLucky', userId: 1670, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1670/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hello!', id: 1, date: 1574411457616,  timeFormat: formatTime(new Date(1574411457616)) },\r\n                {\r\n                    message: 'A group of people born on the same day, including Rebecca (Moore) and Jack (Ventimiglia), a married couple expecting triplets in Pittsburgh, and Kevin (Hartley), a handsome television actor growing bored of his fly bachelor lifestyle.',\r\n                    id: 2, right: true, date: 1574411457616,\r\n                    timeFormat: formatTime(new Date(1574411457616))\r\n                },\r\n                { message: 'WOW!', id: 3, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'YEAH, I LIKE IT!!!', id: 4, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'ITS AWESOME!!!', id: 5,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'Andrej', userId: 4987, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4987/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'Me too!', id: 3, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'remboinReact', userId: 5287, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5287/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'can we chat?', id: 1, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'yes, why not?', id: 2, right: true, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'it was a joke!', id: 3, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'hehe, very funny', id: 4, right: true, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'Vladimir Tuznichenko', userId: 4948, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4948/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'Me too!', id: 3, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'justthefox', userId: 5414, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5414/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hello, im fox?', id: 1, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'are u beast?', id: 2, right: true, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'something like that...', id: 3, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'its scary...', id: 4, right: true, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'I dont think so...', id: 5, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'React ninja', userId: 1676, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1676/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'Me too!', id: 3, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'daze', userId: 5053, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5053/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'hu?', id: 1, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) },\r\n                { message: 'so-so', id: 2, right: true, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) },\r\n                { message: 'its sad!', id: 3, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) }\r\n            ]\r\n        }\r\n    ],\r\n    dialogsFromSearch: null,\r\n    isSearchMode: false,\r\n    userForMessage: null,\r\n    isFetching: false\r\n}\r\n\r\nexport const messagesReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            return {\r\n                ...state,\r\n                dialogItemsData: state.dialogItemsData.map((i) => {\r\n                    return i.userId === action.payload.id\r\n                        ? { ...i, messages: [...i.messages, { message: action.payload.message, id: i.messages.length + 1, right: true, \r\n                            date: action.payload.date, timeFormat: action.payload.timeFormat }] }\r\n                        : { ...i }\r\n                }).sort((a, b) => { return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date })\r\n            }\r\n        case SET_NEW_DIALOG:\r\n            return {\r\n                ...state,\r\n                dialogItemsData: [...state.dialogItemsData, {\r\n                    name: action.payload.name, userId: action.payload.userId, avatar: action.payload.photo || avatar,\r\n                    messages: [{ message: action.payload.message, id: 1, right: true, \r\n                    date: action.payload.date, timeFormat: action.payload.timeFormat }]\r\n                }].sort((a, b) => { return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date })\r\n            }\r\n        case SEARCH_DIALOG:\r\n            return {\r\n                ...state,\r\n                dialogsFromSearch: state.dialogItemsData.filter(i=>i.name.toLowerCase().includes(action.payload.word.toLowerCase()))\r\n            }\r\n        case IS_SEARCH_MODE:\r\n            return{\r\n                ...state,\r\n                isSearchMode: action.payload\r\n            }\r\n        case SET_USER_FOR_MESSAGE:\r\n            return{\r\n                ...state,\r\n                userForMessage: action.payload\r\n            }    \r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\nexport const sendMessage = (message, id) => ({ type: SEND_MESSAGE, payload:{message, id, date: Date.now(),  timeFormat: formatTime(new Date())  } });\r\nexport const setNewDialog = (message, userId, photo, name) => ({ type: SET_NEW_DIALOG, payload: {userId, photo, name, message, date: Date.now(), timeFormat: formatTime(new Date())} })\r\nexport const setIsFetching = (isFetching) => ({type: IS_FETCHING, payload: isFetching})\r\nexport const setSearch = (word) => ({type: SEARCH_DIALOG, payload: {word}})\r\nexport const setSearchMode = (isMode) => ({type: IS_SEARCH_MODE, payload: isMode})\r\nexport const setUserForMessages = (photo,name) => ({type: SET_USER_FOR_MESSAGE, payload: name ? { photo, name} : null})\r\n\r\nexport const messageFromPopUp = (data, user) => (dispatch, getState) => {\r\n\r\n    const userId = user.id || user.userId;\r\n    const photo = user.photos.small;\r\n    const name = user.name || user.fullName;\r\n\r\n    if (getState().messages.dialogItemsData.find(i => i.userId === userId)) { //if dialog already exists\r\n\r\n        dispatch(sendMessage(data.messagePopup, userId))\r\n    }\r\n    else {\r\n        dispatch(setNewDialog(data.messagePopup, userId, photo, name))\r\n    }\r\n}\r\n\r\n\r\nexport const getUserForMessages = (userId) => async(dispatch) => {\r\n    dispatch(setIsFetching(true))\r\n    const response = await (profileAPI.getProfile(userId)).catch(()=>{\r\n        dispatch(setUserForMessages(null))\r\n    })\r\n    \r\n      if(response){\r\n        const photo  = response.data.photos.small\r\n        const name = response.data.fullName\r\n        dispatch(setUserForMessages(photo, name))  \r\n    } \r\n    dispatch(setIsFetching(false))\r\n}\r\n\r\nexport default messagesReducer;"]},"metadata":{},"sourceType":"module"}