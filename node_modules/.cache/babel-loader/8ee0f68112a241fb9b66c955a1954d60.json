{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\WOW\\\\Documents\\\\GitHub\\\\react\\\\react-test\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport avatar from '../assets/img/ava.jpg';\nimport formatTime from '../utils/timeFormat';\nimport { profileAPI } from '../API/api';\nconst SEND_MESSAGE = 'messages-reducer/SEND-MESSAGE';\nconst SET_NEW_DIALOG = 'messages-reducer/SET_NEW_DIALOG';\nconst SEARCH_DIALOG = 'messages-reducer/SEARCH_DIALOG';\nconst IS_SEARCH_MODE = 'messages-reducer/IS_SEARCH_MODE';\nconst SET_USER_FOR_MESSAGE = 'messages-reducer/SET_USER_FOR_MESSAGE';\nconst IS_FETCHING = 'messages-reducer/IS_FETCHING';\nlet initialState = {\n  dialogItemsData: [{\n    name: 'Suarez',\n    userId: 5081,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5081/user-small.jpg?v=13',\n    messages: [{\n      message: 'Hey,how are you?',\n      id: 1,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'Great! How are you?',\n      id: 2,\n      right: true,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'Im fine! Go work!',\n      id: 3,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'Lets go!!!',\n      id: 4,\n      right: true,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'Just do it!!!',\n      id: 5,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'ARE U KIDDING ME?',\n      id: 6,\n      date: 1574411457816,\n      timeFormat: formatTime(new Date(1574411457816))\n    }, {\n      message: 'ops, sorry, not for you',\n      id: 7,\n      date: 1574411458116,\n      timeFormat: formatTime(new Date(1574411458116))\n    }]\n  }, {\n    name: 'Siarhei',\n    userId: 5217,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5217/user-small.jpg?v=13',\n    messages: [{\n      message: 'Hey,how are you?',\n      id: 1,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'Great! How are you?',\n      id: 2,\n      right: true,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }]\n  }, {\n    name: 'SeregaLucky',\n    userId: 1670,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1670/user-small.jpg?v=13',\n    messages: [{\n      message: 'Hello!',\n      id: 1,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'A group of people born on the same day, including Rebecca (Moore) and Jack (Ventimiglia), a married couple expecting triplets in Pittsburgh, and Kevin (Hartley), a handsome television actor growing bored of his fly bachelor lifestyle.',\n      id: 2,\n      right: true,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'WOW!',\n      id: 3,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'YEAH, I LIKE IT!!!',\n      id: 4,\n      right: true,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }, {\n      message: 'ITS AWESOME!!!',\n      id: 5,\n      date: 1574411457616,\n      timeFormat: formatTime(new Date(1574411457616))\n    }]\n  }, {\n    name: 'Andrej',\n    userId: 4987,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4987/user-small.jpg?v=13',\n    messages: [{\n      message: 'DO YOU KNOW REACT?',\n      id: 1,\n      date: 1564401457616,\n      timeFormat: formatTime(new Date(1564401457616))\n    }, {\n      message: 'yes, what about u?',\n      id: 2,\n      right: true,\n      date: 1564401457616,\n      timeFormat: formatTime(new Date(1564401457616))\n    }, {\n      message: 'Me too!',\n      id: 3,\n      date: 1564401457616,\n      timeFormat: formatTime(new Date(1564401457616))\n    }, {\n      message: 'React better than vue',\n      id: 4,\n      right: true,\n      date: 1564401457616,\n      timeFormat: formatTime(new Date(1564401457616))\n    }]\n  }, {\n    name: 'remboinReact',\n    userId: 5287,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5287/user-small.jpg?v=13',\n    messages: [{\n      message: 'can we chat?',\n      id: 1,\n      date: 1564301457616,\n      timeFormat: formatTime(new Date(1564301457616))\n    }, {\n      message: 'yes, why not?',\n      id: 2,\n      right: true,\n      date: 1564301457616,\n      timeFormat: formatTime(new Date(1564301457616))\n    }, {\n      message: 'it was a joke!',\n      id: 3,\n      date: 1564301457616,\n      timeFormat: formatTime(new Date(1564301457616))\n    }, {\n      message: 'hehe, very funny',\n      id: 4,\n      right: true,\n      date: 1564301457616,\n      timeFormat: formatTime(new Date(1564301457616))\n    }]\n  }, {\n    name: 'Vladimir Tuznichenko',\n    userId: 4948,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4948/user-small.jpg?v=13',\n    messages: [{\n      message: 'DO YOU KNOW REACT?',\n      id: 1,\n      date: 1564201457616,\n      timeFormat: formatTime(new Date(1564201457616))\n    }, {\n      message: 'yes, what about u?',\n      id: 2,\n      right: true,\n      date: 1564201457616,\n      timeFormat: formatTime(new Date(1564201457616))\n    }, {\n      message: 'Me too!',\n      id: 3,\n      date: 1564201457616,\n      timeFormat: formatTime(new Date(1564201457616))\n    }, {\n      message: 'React better than vue',\n      id: 4,\n      right: true,\n      date: 1564201457616,\n      timeFormat: formatTime(new Date(1564201457616))\n    }]\n  }, {\n    name: 'justthefox',\n    userId: 5414,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5414/user-small.jpg?v=13',\n    messages: [{\n      message: 'Hello, im fox?',\n      id: 1,\n      date: 1564101457616,\n      timeFormat: formatTime(new Date(1564101457616))\n    }, {\n      message: 'are u beast?',\n      id: 2,\n      right: true,\n      date: 1564101457616,\n      timeFormat: formatTime(new Date(1564101457616))\n    }, {\n      message: 'something like that...',\n      id: 3,\n      date: 1564101457616,\n      timeFormat: formatTime(new Date(1564101457616))\n    }, {\n      message: 'its scary...',\n      id: 4,\n      right: true,\n      date: 1564101457616,\n      timeFormat: formatTime(new Date(1564101457616))\n    }, {\n      message: 'I dont think so...',\n      id: 5,\n      date: 1564101457616,\n      timeFormat: formatTime(new Date(1564101457616))\n    }]\n  }, {\n    name: 'React ninja',\n    userId: 1676,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1676/user-small.jpg?v=13',\n    messages: [{\n      message: 'DO YOU KNOW REACT?',\n      id: 1,\n      date: 1563201457616,\n      timeFormat: formatTime(new Date(1563201457616))\n    }, {\n      message: 'yes, what about u?',\n      id: 2,\n      right: true,\n      date: 1563201457616,\n      timeFormat: formatTime(new Date(1563201457616))\n    }, {\n      message: 'Me too!',\n      id: 3,\n      date: 1563201457616,\n      timeFormat: formatTime(new Date(1563201457616))\n    }, {\n      message: 'React better than vue',\n      id: 4,\n      right: true,\n      date: 1563201457616,\n      timeFormat: formatTime(new Date(1563201457616))\n    }]\n  }, {\n    name: 'daze',\n    userId: 5053,\n    avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5053/user-small.jpg?v=13',\n    messages: [{\n      message: 'hu?',\n      id: 1,\n      date: 1563001457616,\n      timeFormat: formatTime(new Date(1563001457616))\n    }, {\n      message: 'so-so',\n      id: 2,\n      right: true,\n      date: 1563001457616,\n      timeFormat: formatTime(new Date(1563001457616))\n    }, {\n      message: 'its sad!',\n      id: 3,\n      date: 1563001457616,\n      timeFormat: formatTime(new Date(1563001457616))\n    }]\n  }],\n  dialogsFromSearch: null,\n  isSearchMode: false,\n  userForMessage: null,\n  isFetching: false\n};\nexport const messagesReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SEND_MESSAGE:\n      return _objectSpread({}, state, {\n        dialogItemsData: state.dialogItemsData.map(i => {\n          return i.userId === action.payload.id ? _objectSpread({}, i, {\n            messages: [...i.messages, {\n              message: action.payload.message,\n              id: i.messages.length + 1,\n              right: true,\n              date: action.payload.date,\n              timeFormat: action.payload.timeFormat\n            }]\n          }) : _objectSpread({}, i);\n        }).sort((a, b) => {\n          return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date;\n        })\n      });\n\n    case SET_NEW_DIALOG:\n      return _objectSpread({}, state, {\n        dialogItemsData: [...state.dialogItemsData, {\n          name: action.name,\n          userId: action.userId,\n          avatar: action.photo || avatar,\n          messages: [{\n            message: action.message,\n            id: 1,\n            right: true,\n            date: action.date,\n            timeFormat: action.timeFormat\n          }]\n        }].sort((a, b) => {\n          return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date;\n        })\n      });\n\n    case SEARCH_DIALOG:\n      return _objectSpread({}, state, {\n        dialogsFromSearch: state.dialogItemsData.filter(i => i.name.toLowerCase().includes(action.word.toLowerCase()))\n      });\n\n    case IS_SEARCH_MODE:\n      return _objectSpread({}, state, {\n        isSearchMode: action.isMode\n      });\n\n    case SET_USER_FOR_MESSAGE:\n      return _objectSpread({}, state, {\n        userForMessage: action.payload\n      });\n\n    default:\n      return state;\n  }\n};\nexport const sendMessage = (message, id) => ({\n  type: SEND_MESSAGE,\n  payload: {\n    message,\n    id,\n    date: Date.now(),\n    timeFormat: formatTime(new Date())\n  }\n});\nexport const setNewDialog = (message, userId, photo, name) => ({\n  type: SET_NEW_DIALOG,\n  userId,\n  photo,\n  name,\n  message,\n  date: Date.now(),\n  timeFormat: formatTime(new Date())\n});\nexport const messageFromPopUp = (data, user) => (dispatch, getState) => {\n  const userId = user.id || user.userId;\n  const photo = user.photos.small;\n  const name = user.name || user.fullName;\n\n  if (getState().messages.dialogItemsData.find(i => i.userId === userId)) {\n    //if dialog already exists\n    dispatch(sendMessage(data.messagePopup, userId));\n  } else {\n    dispatch(setNewDialog(data.messagePopup, userId, photo, name));\n  }\n};\nexport const setIsFetching = isFetching => ({\n  type: IS_FETCHING,\n  payload: isFetching\n});\nexport const setSearch = word => ({\n  type: SEARCH_DIALOG,\n  word\n});\nexport const setSearchMode = isMode => ({\n  type: IS_SEARCH_MODE,\n  isMode\n});\nexport const setUserForMessages = (photo, name) => ({\n  type: SET_USER_FOR_MESSAGE,\n  payload: name ? {\n    photo,\n    name\n  } : null\n});\nexport const getUserForMessages = userId => async dispatch => {\n  dispatch(setIsFetching(true));\n  const response = await profileAPI.getProfile(userId).catch(() => {\n    dispatch(setUserForMessages(null));\n  });\n\n  if (response) {\n    const photo = response.data.photos.small;\n    const name = response.data.fullName;\n    dispatch(setUserForMessages(photo, name));\n  }\n\n  dispatch(setIsFetching(false));\n};\nexport default messagesReducer;","map":{"version":3,"sources":["C:/Users/WOW/Documents/GitHub/react/react-test/src/redux/messages-reducer.js"],"names":["avatar","formatTime","profileAPI","SEND_MESSAGE","SET_NEW_DIALOG","SEARCH_DIALOG","IS_SEARCH_MODE","SET_USER_FOR_MESSAGE","IS_FETCHING","initialState","dialogItemsData","name","userId","messages","message","id","date","timeFormat","Date","right","dialogsFromSearch","isSearchMode","userForMessage","isFetching","messagesReducer","state","action","type","map","i","payload","length","sort","a","b","photo","filter","toLowerCase","includes","word","isMode","sendMessage","now","setNewDialog","messageFromPopUp","data","user","dispatch","getState","photos","small","fullName","find","messagePopup","setIsFetching","setSearch","setSearchMode","setUserForMessages","getUserForMessages","response","getProfile","catch"],"mappings":"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","sourcesContent":["import avatar from '../assets/img/ava.jpg'\r\nimport formatTime from '../utils/timeFormat'\r\nimport {  profileAPI } from '../API/api'\r\n\r\nconst SEND_MESSAGE = 'messages-reducer/SEND-MESSAGE'\r\nconst SET_NEW_DIALOG = 'messages-reducer/SET_NEW_DIALOG'\r\nconst SEARCH_DIALOG = 'messages-reducer/SEARCH_DIALOG'\r\nconst IS_SEARCH_MODE = 'messages-reducer/IS_SEARCH_MODE'\r\nconst SET_USER_FOR_MESSAGE = 'messages-reducer/SET_USER_FOR_MESSAGE'\r\nconst IS_FETCHING = 'messages-reducer/IS_FETCHING'\r\n\r\nlet initialState = {\r\n    dialogItemsData: [\r\n        {\r\n            name: 'Suarez', userId: 5081, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5081/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hey,how are you?', id: 1, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Great! How are you?', id: 2, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Im fine! Go work!', id: 3,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Lets go!!!', id: 4, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Just do it!!!', id: 5,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'ARE U KIDDING ME?', id: 6,  date: 1574411457816, timeFormat: formatTime(new Date(1574411457816)) },\r\n                { message: 'ops, sorry, not for you', id: 7,  date: 1574411458116, timeFormat: formatTime(new Date(1574411458116)) }\r\n            ]\r\n\r\n        },\r\n        {\r\n            name: 'Siarhei', userId: 5217, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5217/user-small.jpg?v=13', \r\n            messages: [\r\n                { message: 'Hey,how are you?', id: 1, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Great! How are you?', id: 2, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'SeregaLucky', userId: 1670, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1670/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hello!', id: 1, date: 1574411457616,  timeFormat: formatTime(new Date(1574411457616)) },\r\n                {\r\n                    message: 'A group of people born on the same day, including Rebecca (Moore) and Jack (Ventimiglia), a married couple expecting triplets in Pittsburgh, and Kevin (Hartley), a handsome television actor growing bored of his fly bachelor lifestyle.',\r\n                    id: 2, right: true, date: 1574411457616,\r\n                    timeFormat: formatTime(new Date(1574411457616))\r\n                },\r\n                { message: 'WOW!', id: 3, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'YEAH, I LIKE IT!!!', id: 4, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'ITS AWESOME!!!', id: 5,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'Andrej', userId: 4987, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4987/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'Me too!', id: 3, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'remboinReact', userId: 5287, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5287/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'can we chat?', id: 1, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'yes, why not?', id: 2, right: true, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'it was a joke!', id: 3, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'hehe, very funny', id: 4, right: true, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'Vladimir Tuznichenko', userId: 4948, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4948/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'Me too!', id: 3, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'justthefox', userId: 5414, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5414/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hello, im fox?', id: 1, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'are u beast?', id: 2, right: true, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'something like that...', id: 3, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'its scary...', id: 4, right: true, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'I dont think so...', id: 5, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'React ninja', userId: 1676, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1676/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'Me too!', id: 3, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'daze', userId: 5053, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5053/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'hu?', id: 1, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) },\r\n                { message: 'so-so', id: 2, right: true, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) },\r\n                { message: 'its sad!', id: 3, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) }\r\n            ]\r\n        }\r\n    ],\r\n    dialogsFromSearch: null,\r\n    isSearchMode: false,\r\n    userForMessage: null,\r\n    isFetching: false\r\n}\r\n\r\nexport const messagesReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            return {\r\n                ...state,\r\n                dialogItemsData: state.dialogItemsData.map((i) => {\r\n                    return i.userId === action.payload.id\r\n                        ? { ...i, messages: [...i.messages, { message: action.payload.message, id: i.messages.length + 1, right: true, \r\n                            date: action.payload.date, timeFormat: action.payload.timeFormat }] }\r\n                        : { ...i }\r\n                }).sort((a, b) => { return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date })\r\n            }\r\n        case SET_NEW_DIALOG:\r\n            return {\r\n                ...state,\r\n                dialogItemsData: [...state.dialogItemsData, {\r\n                    name: action.name, userId: action.userId, avatar: action.photo || avatar,\r\n                    messages: [{ message: action.message, id: 1, right: true, date: action.date, timeFormat: action.timeFormat }]\r\n                }].sort((a, b) => { return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date })\r\n            }\r\n        case SEARCH_DIALOG:\r\n            return {\r\n                ...state,\r\n                dialogsFromSearch: state.dialogItemsData.filter(i=>i.name.toLowerCase().includes(action.word.toLowerCase()))\r\n            }\r\n        case IS_SEARCH_MODE:\r\n            return{\r\n                ...state,\r\n                isSearchMode: action.isMode\r\n            }\r\n        case SET_USER_FOR_MESSAGE:\r\n            return{\r\n                ...state,\r\n                userForMessage: action.payload\r\n            }    \r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\nexport const sendMessage = (message, id) => ({ type: SEND_MESSAGE, payload:{message, id, date: Date.now(),  timeFormat: formatTime(new Date())  } });\r\nexport const setNewDialog = (message, userId, photo, name) => ({ type: SET_NEW_DIALOG, userId, photo, name, message, date: Date.now(), timeFormat: formatTime(new Date()) })\r\nexport const messageFromPopUp = (data, user) => (dispatch, getState) => {\r\n\r\n    const userId = user.id || user.userId;\r\n    const photo = user.photos.small;\r\n    const name = user.name || user.fullName;\r\n\r\n    if (getState().messages.dialogItemsData.find(i => i.userId === userId)) { //if dialog already exists\r\n\r\n        dispatch(sendMessage(data.messagePopup, userId))\r\n    }\r\n    else {\r\n        dispatch(setNewDialog(data.messagePopup, userId, photo, name))\r\n    }\r\n}\r\nexport const setIsFetching = (isFetching) => ({type: IS_FETCHING, payload: isFetching})\r\nexport const setSearch = (word) => ({type: SEARCH_DIALOG, word})\r\nexport const setSearchMode = (isMode) => ({type: IS_SEARCH_MODE, isMode})\r\nexport const setUserForMessages = (photo,name) => ({type: SET_USER_FOR_MESSAGE, payload: name ? { photo, name} : null})\r\n\r\nexport const getUserForMessages = (userId) => async(dispatch) => {\r\n    dispatch(setIsFetching(true))\r\n    const response = await (profileAPI.getProfile(userId)).catch(()=>{\r\n        dispatch(setUserForMessages(null))\r\n    })\r\n    \r\n      if(response){\r\n        const photo  = response.data.photos.small\r\n        const name = response.data.fullName\r\n        dispatch(setUserForMessages(photo, name))  \r\n    } \r\n    dispatch(setIsFetching(false))\r\n}\r\n\r\nexport default messagesReducer;"]},"metadata":{},"sourceType":"module"}