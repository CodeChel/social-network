{"ast":null,"code":"import _objectWithoutProperties from \"C:\\\\Users\\\\WOW\\\\Documents\\\\GitHub\\\\react\\\\react-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"C:\\\\Users\\\\WOW\\\\Documents\\\\GitHub\\\\react\\\\react-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\WOW\\\\Documents\\\\GitHub\\\\react\\\\react-test\\\\src\\\\components\\\\Messages-container\\\\Messages\\\\Messages.jsx\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport styles from './Messages.module.css';\nimport DialogWithUser from './DialogsList/DialogWithUser';\nimport DialogSession from './DialogSession';\nimport ScrollbarHOC from '../../common/HOCScrollBar/HOCScrollbarCusctom';\n\nconst ResponsiveLayout = ({\n  breakpoint,\n  RenderMobile,\n  RenderDesktop,\n  props\n}) => {\n  const _useState = useState(window.innerWidth),\n        _useState2 = _slicedToArray(_useState, 2),\n        width = _useState2[0],\n        setWidth = _useState2[1];\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWidth(window.innerWidth);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return width > breakpoint ? renderDesktop() : renderMobile();\n};\n\nconst Messages = props => {\n  const breakpoint = 680;\n  return ResponsiveLayout({\n    breakpoint,\n    MessagesMobile,\n    MessagesDesktop\n  });\n};\n\nconst MessagesDesktop = (_ref) => {\n  let dialogItemsData = _ref.dialogItemsData,\n      currentDialogId = _ref.currentDialogId,\n      search = _ref.search,\n      dialogsFromSearch = _ref.dialogsFromSearch,\n      props = _objectWithoutProperties(_ref, [\"dialogItemsData\", \"currentDialogId\", \"search\", \"dialogsFromSearch\"]);\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        searchWord = _useState4[0],\n        setSearchWord = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isSearchMode = _useState6[0],\n        setSearchMode = _useState6[1];\n\n  useEffect(() => {\n    const outSearhCheck = e => {\n      if (e.target !== searchInput.current && e.target !== dialogRef.current) {\n        outSearch();\n      }\n    };\n\n    if (isSearchMode) {\n      document.addEventListener('click', outSearhCheck);\n    } else {\n      document.removeEventListener('click', outSearhCheck);\n    }\n\n    return () => {\n      document.removeEventListener('click', outSearhCheck);\n    };\n  }, [isSearchMode]);\n  const searchInput = useRef();\n  const dialogRef = useRef();\n\n  const handleSearch = e => {\n    const word = e.currentTarget.value;\n    setSearchWord(word);\n\n    if (word && word.trim() !== '') {\n      search(word);\n      setSearchMode(true);\n    }\n  };\n\n  const outSearch = () => {\n    setSearchMode(false);\n    setSearchWord('');\n  };\n\n  const dialogItems = dialogItemsData.map((item, index) => React.createElement(DialogWithUser, {\n    currentDialogId: currentDialogId,\n    avatar: item.avatar,\n    date: item.messages[item.messages.length - 1].date,\n    isYoursMessage: item.messages[item.messages.length - 1].right,\n    lastMessage: item.messages[item.messages.length - 1].message,\n    setDialogID: props.setDialogID,\n    key: index + 1,\n    name: item.name,\n    id: item.userId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }));\n  const dialogItemsSearch = isSearchMode && dialogsFromSearch.map((item, index) => React.createElement(DialogWithUser, {\n    dialogRef: dialogRef,\n    isSearchMode: isSearchMode,\n    currentDialogId: currentDialogId,\n    avatar: item.avatar,\n    outSearch: outSearch,\n    lastMessage: item.messages[item.messages.length - 1].message,\n    date: item.messages[item.messages.length - 1].date,\n    isYoursMessage: item.messages[item.messages.length - 1].right,\n    setDialogID: props.setDialogID,\n    key: index + 1,\n    name: item.name,\n    id: item.userId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }));\n  const currentDialog = dialogItemsData[dialogItemsData.findIndex(i => {\n    return i.userId === currentDialogId;\n  })];\n  return React.createElement(\"div\", {\n    className: styles.messages,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: styles.messageSession,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, currentDialogId === 0 ? React.createElement(\"div\", {\n    className: styles.emptyMessages,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: styles.iconMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: styles.selectDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Please select a dialog\")) : React.createElement(DialogSession, {\n    valueMessage: props.valueMessage,\n    isSearchMode: isSearchMode,\n    userId: currentDialog.userId,\n    sendMessage: props.sendMessage,\n    name: currentDialog.name,\n    avatar: currentDialog.avatar,\n    messages: currentDialog.messages,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: styles.dialogItems,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: styles.dialogSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    ref: searchInput,\n    placeholder: \"Search\",\n    className: styles.searchInput,\n    value: searchWord,\n    onChange: e => handleSearch(e),\n    type: \"text\",\n    name: \"\",\n    id: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: styles.dialogsList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(ScrollbarHOC, {\n    children: isSearchMode ? dialogItemsSearch : dialogItems,\n    removeTrackYWhenNotUsed: true,\n    style: {\n      width: \"100%\",\n      height: \"85vh\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }))));\n};\n\nconst MessagesMobile = (_ref2) => {\n  let dialogItemsData = _ref2.dialogItemsData,\n      currentDialogId = _ref2.currentDialogId,\n      search = _ref2.search,\n      dialogsFromSearch = _ref2.dialogsFromSearch,\n      props = _objectWithoutProperties(_ref2, [\"dialogItemsData\", \"currentDialogId\", \"search\", \"dialogsFromSearch\"]);\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        searchWord = _useState8[0],\n        setSearchWord = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        isSearchMode = _useState10[0],\n        setSearchMode = _useState10[1];\n\n  useEffect(() => {\n    const outSearhCheck = e => {\n      if (e.target !== searchInput.current && e.target !== dialogRef.current) {\n        outSearch();\n      }\n    };\n\n    if (isSearchMode) {\n      document.addEventListener('click', outSearhCheck);\n    } else {\n      document.removeEventListener('click', outSearhCheck);\n    }\n\n    return () => {\n      document.removeEventListener('click', outSearhCheck);\n    };\n  }, [isSearchMode]);\n  const searchInput = useRef();\n  const dialogRef = useRef();\n\n  const handleSearch = e => {\n    const word = e.currentTarget.value;\n    setSearchWord(word);\n\n    if (word && word.trim() !== '') {\n      search(word);\n      setSearchMode(true);\n    }\n  };\n\n  const outSearch = () => {\n    setSearchMode(false);\n    setSearchWord('');\n  };\n\n  const dialogItems = dialogItemsData.map((item, index) => React.createElement(DialogWithUser, {\n    currentDialogId: currentDialogId,\n    avatar: item.avatar,\n    date: item.messages[item.messages.length - 1].date,\n    isYoursMessage: item.messages[item.messages.length - 1].right,\n    lastMessage: item.messages[item.messages.length - 1].message,\n    setDialogID: props.setDialogID,\n    key: index + 1,\n    name: item.name,\n    id: item.userId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }));\n  const dialogItemsSearch = isSearchMode && dialogsFromSearch.map((item, index) => React.createElement(DialogWithUser, {\n    dialogRef: dialogRef,\n    isSearchMode: isSearchMode,\n    currentDialogId: currentDialogId,\n    avatar: item.avatar,\n    outSearch: outSearch,\n    lastMessage: item.messages[item.messages.length - 1].message,\n    date: item.messages[item.messages.length - 1].date,\n    isYoursMessage: item.messages[item.messages.length - 1].right,\n    setDialogID: props.setDialogID,\n    key: index + 1,\n    name: item.name,\n    id: item.userId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }));\n  const currentDialog = dialogItemsData[dialogItemsData.findIndex(i => {\n    return i.userId === currentDialogId;\n  })];\n  return React.createElement(\"div\", {\n    className: styles.messages,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: styles.messageSession,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, currentDialogId === 0 ? React.createElement(\"div\", {\n    className: styles.emptyMessages,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: styles.iconMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: styles.selectDialog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"Please select a dialog\")) : React.createElement(DialogSession, {\n    valueMessage: props.valueMessage,\n    isSearchMode: isSearchMode,\n    userId: currentDialog.userId,\n    sendMessage: props.sendMessage,\n    name: currentDialog.name,\n    avatar: currentDialog.avatar,\n    messages: currentDialog.messages,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: styles.dialogItems,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: styles.dialogSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    ref: searchInput,\n    placeholder: \"Search\",\n    className: styles.searchInput,\n    value: searchWord,\n    onChange: e => handleSearch(e),\n    type: \"text\",\n    name: \"\",\n    id: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: styles.dialogsList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(ScrollbarHOC, {\n    children: isSearchMode ? dialogItemsSearch : dialogItems,\n    removeTrackYWhenNotUsed: true,\n    style: {\n      width: \"100%\",\n      height: \"85vh\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }))));\n};\n\nexport default Messages;","map":{"version":3,"sources":["C:\\Users\\WOW\\Documents\\GitHub\\react\\react-test\\src\\components\\Messages-container\\Messages\\Messages.jsx"],"names":["React","useState","useRef","useEffect","styles","DialogWithUser","DialogSession","ScrollbarHOC","ResponsiveLayout","breakpoint","RenderMobile","RenderDesktop","props","window","innerWidth","width","setWidth","handleResize","addEventListener","removeEventListener","renderDesktop","renderMobile","Messages","MessagesMobile","MessagesDesktop","dialogItemsData","currentDialogId","search","dialogsFromSearch","searchWord","setSearchWord","isSearchMode","setSearchMode","outSearhCheck","e","target","searchInput","current","dialogRef","outSearch","document","handleSearch","word","currentTarget","value","trim","dialogItems","map","item","index","avatar","messages","length","date","right","message","setDialogID","name","userId","dialogItemsSearch","currentDialog","findIndex","i","messageSession","emptyMessages","iconMessage","selectDialog","valueMessage","sendMessage","dialogSearch","dialogsList","height"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport styles from './Messages.module.css'\r\nimport DialogWithUser from './DialogsList/DialogWithUser'\r\nimport DialogSession from './DialogSession'\r\nimport ScrollbarHOC from '../../common/HOCScrollBar/HOCScrollbarCusctom'\r\n\r\nconst ResponsiveLayout = ({ breakpoint, RenderMobile, RenderDesktop, props }) => {\r\n    const [width, setWidth] = useState(window.innerWidth)\r\n    useEffect(() => {\r\n      const handleResize = () => {\r\n        setWidth(window.innerWidth)\r\n      }\r\n      window.addEventListener('resize', handleResize)\r\n      return () => { window.removeEventListener('resize', handleResize) }\r\n    }, [])\r\n    return (width > breakpoint ? renderDesktop() : renderMobile())\r\n  }\r\n\r\n\r\nconst Messages = (props ) => {\r\n    const breakpoint = 680;\r\n    return ResponsiveLayout({breakpoint, MessagesMobile, MessagesDesktop })\r\n    \r\n}\r\n\r\nconst MessagesDesktop = ({ dialogItemsData, currentDialogId, search, dialogsFromSearch, ...props }) => {\r\n\r\n    const [searchWord, setSearchWord] = useState('');\r\n    const [isSearchMode, setSearchMode] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        const outSearhCheck = (e) => {\r\n\r\n            if (e.target !== searchInput.current && e.target !== dialogRef.current) {\r\n                outSearch()\r\n            }\r\n\r\n        }\r\n        if (isSearchMode) {\r\n            document.addEventListener('click', outSearhCheck)\r\n        }\r\n        else {\r\n            document.removeEventListener('click', outSearhCheck)\r\n        }\r\n        return () => {\r\n            document.removeEventListener('click', outSearhCheck)\r\n        }\r\n    }, [isSearchMode])\r\n\r\n    const searchInput = useRef();\r\n    const dialogRef = useRef();\r\n\r\n    const handleSearch = (e) => {\r\n        const word = e.currentTarget.value;\r\n        setSearchWord(word);\r\n        if (word && word.trim() !== '') {\r\n            search(word)\r\n            setSearchMode(true)\r\n        }\r\n    }\r\n    const outSearch = () => {\r\n        setSearchMode(false)\r\n        setSearchWord('')\r\n    }\r\n\r\n\r\n\r\n    const dialogItems = dialogItemsData.map((item, index) => <DialogWithUser currentDialogId={currentDialogId} avatar={item.avatar}\r\n        date={item.messages[item.messages.length - 1].date} isYoursMessage={item.messages[item.messages.length - 1].right}\r\n        lastMessage={item.messages[item.messages.length - 1].message} setDialogID={props.setDialogID} key={index + 1} name={item.name} id={item.userId} />)\r\n\r\n    const dialogItemsSearch = isSearchMode && dialogsFromSearch.map((item, index) => <DialogWithUser dialogRef={dialogRef} isSearchMode={isSearchMode}\r\n        currentDialogId={currentDialogId} avatar={item.avatar} outSearch={outSearch} lastMessage={item.messages[item.messages.length - 1].message}\r\n        date={item.messages[item.messages.length - 1].date} isYoursMessage={item.messages[item.messages.length - 1].right} setDialogID={props.setDialogID}\r\n        key={index + 1} name={item.name} id={item.userId} />)\r\n\r\n    const currentDialog = dialogItemsData[dialogItemsData.findIndex((i) => { return i.userId === currentDialogId })];\r\n\r\n\r\n    return <div className={styles.messages} >\r\n        <div className={styles.messageSession}>\r\n        {currentDialogId === 0\r\n            ? <div className={styles.emptyMessages}>\r\n                <div className={styles.iconMessage}></div>\r\n                <div className={styles.selectDialog}>\r\n                    Please select a dialog\r\n                </div>\r\n            </div>\r\n            :  <DialogSession valueMessage={props.valueMessage} isSearchMode={isSearchMode} userId={currentDialog.userId}\r\n                sendMessage={props.sendMessage} name={currentDialog.name} avatar={currentDialog.avatar} messages={currentDialog.messages} />\r\n              \r\n                }\r\n          </div>        \r\n             \r\n\r\n        <div className={styles.dialogItems}>\r\n            <div className={styles.dialogSearch}>\r\n                <input ref={searchInput} placeholder='Search' className={styles.searchInput} value={searchWord} onChange={e => handleSearch(e)} type=\"text\" name=\"\" id=\"\" />\r\n            </div>\r\n            <div className={styles.dialogsList}>\r\n                <ScrollbarHOC children={isSearchMode ? dialogItemsSearch : dialogItems} removeTrackYWhenNotUsed={true} style={{ width: \"100%\", height: \"85vh\" }} />\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n}\r\nconst MessagesMobile = ({ dialogItemsData, currentDialogId, search, dialogsFromSearch, ...props }) => {\r\n    const [searchWord, setSearchWord] = useState('');\r\n    const [isSearchMode, setSearchMode] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        const outSearhCheck = (e) => {\r\n\r\n            if (e.target !== searchInput.current && e.target !== dialogRef.current) {\r\n                outSearch()\r\n            }\r\n\r\n        }\r\n        if (isSearchMode) {\r\n            document.addEventListener('click', outSearhCheck)\r\n        }\r\n        else {\r\n            document.removeEventListener('click', outSearhCheck)\r\n        }\r\n        return () => {\r\n            document.removeEventListener('click', outSearhCheck)\r\n        }\r\n    }, [isSearchMode])\r\n\r\n    const searchInput = useRef();\r\n    const dialogRef = useRef();\r\n\r\n    const handleSearch = (e) => {\r\n        const word = e.currentTarget.value;\r\n        setSearchWord(word);\r\n        if (word && word.trim() !== '') {\r\n            search(word)\r\n            setSearchMode(true)\r\n        }\r\n    }\r\n    const outSearch = () => {\r\n        setSearchMode(false)\r\n        setSearchWord('')\r\n    }\r\n\r\n\r\n\r\n    const dialogItems = dialogItemsData.map((item, index) => <DialogWithUser currentDialogId={currentDialogId} avatar={item.avatar}\r\n        date={item.messages[item.messages.length - 1].date} isYoursMessage={item.messages[item.messages.length - 1].right}\r\n        lastMessage={item.messages[item.messages.length - 1].message} setDialogID={props.setDialogID} key={index + 1} name={item.name} id={item.userId} />)\r\n\r\n    const dialogItemsSearch = isSearchMode && dialogsFromSearch.map((item, index) => <DialogWithUser dialogRef={dialogRef} isSearchMode={isSearchMode}\r\n        currentDialogId={currentDialogId} avatar={item.avatar} outSearch={outSearch} lastMessage={item.messages[item.messages.length - 1].message}\r\n        date={item.messages[item.messages.length - 1].date} isYoursMessage={item.messages[item.messages.length - 1].right} setDialogID={props.setDialogID}\r\n        key={index + 1} name={item.name} id={item.userId} />)\r\n\r\n    const currentDialog = dialogItemsData[dialogItemsData.findIndex((i) => { return i.userId === currentDialogId })];\r\n\r\n\r\n    return <div className={styles.messages} >\r\n        <div className={styles.messageSession}>\r\n        {currentDialogId === 0\r\n            ? <div className={styles.emptyMessages}>\r\n                <div className={styles.iconMessage}></div>\r\n                <div className={styles.selectDialog}>\r\n                    Please select a dialog\r\n                </div>\r\n            </div>\r\n            :  <DialogSession valueMessage={props.valueMessage} isSearchMode={isSearchMode} userId={currentDialog.userId}\r\n                sendMessage={props.sendMessage} name={currentDialog.name} avatar={currentDialog.avatar} messages={currentDialog.messages} />\r\n              \r\n                }\r\n          </div>        \r\n             \r\n\r\n        <div className={styles.dialogItems}>\r\n            <div className={styles.dialogSearch}>\r\n                <input ref={searchInput} placeholder='Search' className={styles.searchInput} value={searchWord} onChange={e => handleSearch(e)} type=\"text\" name=\"\" id=\"\" />\r\n            </div>\r\n            <div className={styles.dialogsList}>\r\n                <ScrollbarHOC children={isSearchMode ? dialogItemsSearch : dialogItems} removeTrackYWhenNotUsed={true} style={{ width: \"100%\", height: \"85vh\" }} />\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n}\r\n\r\n\r\nexport default Messages;"]},"metadata":{},"sourceType":"module"}