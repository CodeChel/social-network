{"version":3,"sources":["components/SideBar/sideBar.module.css","components/common/Preloader/preloader.module.css","components/Profile/ProfileInfo/ProfileDescription/AboutProfile.module.css","components/Profile/Posts/posts.module.css","API/api.js","img/F_icon.png","assets/img/Rolling-1s-200px.svg","components/Profile/ProfileInfo/ProfileDescription/profileDescription.module.css","components/common/PopUp/popUp.module.css","components/Profile/Profile.module.css","components/common/FormControls/FormControls.js","utils/validators/validator.js","components/common/PopUp/popUpMessage.module.css","components/Footer/footer.module.css","components/common/Preloader/Preloader.jsx","assets/img/ava.jpg","serviceWorker.js","components/SideBar/SideBar.jsx","components/Profile/ProfileInfo/ProfileDescription/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileDescription/ProfileEditorReduxForm.jsx","components/Profile/ProfileInfo/ProfileDescription/AboutProfile.jsx","components/Profile/ProfileInfo/ProfileDescription/ProfileDescription.jsx","components/common/PopUp/popUp.jsx","components/common/PopUp/PopUpMessage.jsx","components/common/PopUp/popUpAvatar.jsx","components/Profile/ProfileInfo/ProfileAvatar/ProfileAvatar.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/Posts/AddPostFormWithConnect.jsx","components/Profile/Posts/Posts.jsx","components/Profile/Profile.jsx","redux/profile-reducer.js","components/Profile/profile-selectors.js","components/Profile/ProfileContainer.jsx","components/News/News.jsx","components/Communities/Communities.jsx","components/Events/Events.jsx","components/Pages/Pages.jsx","components/Manage/Manage.jsx","redux/friends-reducer.js","components/Friends/User.jsx","components/Friends/Users.jsx","components/Friends/user-selectors.js","components/Friends/UsersContainer.jsx","redux/auth-reducer.js","components/Footer/Footer.jsx","components/Footer/footer-selector.js","components/Footer/FooterContainer.jsx","components/Login/Login.jsx","redux/app-reducer.js","redux/redux-store.js","hoc/withSuspense.js","App.js","index.js","components/Friends/Friends.module.css","components/Profile/ProfileInfo/ProfileAvatar/ProfilePhoto.module.css","components/Profile/ProfileInfo/profileInfo.module.css","components/Profile/ProfileInfo/ProfileDescription/profileStatus.module.css","components/common/FormControls/FormControls.module.css","components/Login/LoginPage.module.css","redux/messages-reducer.js","utils/timeFormat.js","components/common/EmojiPicker/EmojiPicker.jsx","hoc/withAuthRedirect.js","components/common/PopUp/popupAvatar.module.css"],"names":["module","exports","instance","axios","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","postFollow","id","post","deleteFollow","delete","getFollow","authAPI","getAuth","logIn","dataForm","email","login","password","rememberMe","captcha","logOut","securityAPI","getCaptcha","profileAPI","getProfile","getUserStatus","updateUserStatus","status","put","updatePhoto","photo","formData","FormData","append","saveProfileData","profile","FormConstructor","props","hasError","touched","error","className","styles","formControl","element","Input","input","meta","el","React","createElement","Textarea","createField","placeholder","name","validators","component","label","text","formCustom","validate","htmlFor","required","value","maxLengthCreator","maxLength","length","voidValue","trim","undefined","Preloader","preloaderContainer","preloader","src","alt","Boolean","window","location","hostname","match","connect","state","authId","auth","menuContainer","logo","to","imgLogo","navBar","menu","headList","news","activeClassName","active","messages","friends","communities","events","pages","manage","shortcuts","google","target","rel","href","combinator","amazon","ProfileStatusWithHooks","updateStatus","isMyPage","useState","editMode","setEditMode","setStatus","nodeStatus","useRef","useEffect","handlerClick","e","current","contains","document","removeEventListener","addEventListener","statusWrap","statusContainer","onClick","slice","changeStatusContainer","ref","inputStatus","autoFocus","onChange","currentTarget","EmojiPicker","saveButton","ProfileEditorReduxForm","reduxForm","form","handleSubmit","onSubmit","nameInfo","Field","type","checked","colls","rows","Object","keys","contacts","map","key","nameField","when","dirty","message","save","AboutProfile","setEditProfile","isEditMode","container","header","aboutMe","role","edit","row","rowInfo","lookingForAJob","lookingForAJobDescription","some","i","filter","initialValues","ProfileDescrition","fullName","PopUp","Component","closePopup","popup","AddMessagePopupFormRedux","messageForm","buttonForm","PopUpMessageWithConnect","messageFromPopUp","user","userId","headerPopup","textHeader","linkMessage","popupBody","userHeader","photos","small","avatar","popupAvatar","usernameBlock","popupUserName","onlineStatus","PopUpAvatar","avatr","ProfileAvatar","savePhoto","setPopupAvatar","photoLarge","avatarContainer","avatarUpdate","avatarCustom","changePhoto","changePhotoLabel","changePhotoInput","files","ProfileInfo","isFollowed","sendMessageMode","avatarPopup","followUnfollow","profileInfoContainer","profileInfo","profileAvatarContainer","large","send","setMessageMode","PopUpMessage","maxLength500","FormPostRedux","onSubmitSuccess","result","dispatch","reset","formPost","bottom","right","width","formName","fieldName","Form","addPostForm","button","AddPostFormWithConnect","Posts","postsContainer","sendPostThunk","posts","selectSort","sortByTime","sortByLikes","p","itemPost","headerPost","nameBlock","timePost","timeFormat","postBody","hidenMenu","deletePost","menuItem","postFooter","likesBody","likesWrapper","liked","likesToggle","likes","likesCount","likesCountLiked","Profile","savePhotoThunk","updateStatusThunk","SEND_POST","SET_USER_PROFILE","SET_USER_STATUS","SET_EDIT_PROFILE","SORT_BY_TIME","SORT_BY_LIKES","IS_USER_EXIST","options","year","month","day","timezone","hour","minute","initialState","time","currentTextPost","isFetching","isUserExist","toggleIsFetching","payload","mode","setUserProfile","setUserStatus","setFollowUnfollow","isFollow","setIsUserExist","getProfileThunk","a","async","catch","profileReducer","action","idPost","isLiked","index","sort","b","profileStatus","profilePage","profilePosts","getIsAuth","isAuth","getAuthId","getIsEditMode","getFollowed","getIsFetching","getIsSendMode","getIsAvatarPopup","getIsUserExist","ProfileContainer","this","params","getStatusThunk","getFollowedThunk","resetProfile","refreshProfile","prevProps","prevState","IsUserExist","toString","compose","getState","Date","now","toLocaleString","sendPost","resultCode","profileR","number","indexOf","test","toLowerCase","stopSubmit","isSendMode","isPopup","withRouter","withAuthRedirect","News","Communities","Events","Pages","Manage","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_COUNT","SET_MESSAGE_MODE","ADD_MORE_USER","users","totalUsersCout","followingInProgress","messageMode","messageId","follow","unfollow","setUsers","setCurrentPage","setTotalUsersCount","toggleFollowingProgress","followUnfollowFlow","apiMethod","actionCreator","friendsReducer","u","followed","User","userContainer","usersAvatar","userMenu","hideMenu","disabled","userInfo","userName","userStatus","Users","totalUsersCount","onPageChanged","isMessageMode","getMoreUsers","list","getElementById","scrollY","innerHeight","clientHeight","offsetTop","Math","ceil","mainContainer","unFollowThunk","followThunk","friendsPage","getPageSize","getTotalUsersCout","getCurrentPage","getFollowingInProgress","getMessageId","getIsMessageMode","UsersContainer","pageNumber","changeCurrentPageThunk","getUsersThunk","items","totalCount","SET_USER","RESET_USER","SET_AVATAR","captchaURL","setUserAuth","getAuthThunk","url","authReducer","Footer","footer","authBlock","authLogin","arrowMenu","authMenu","itemMenu","logOutThunk","myProfile","you","getLogin","getAvatar","FooterContainer","LoginReduxForm","loginPage","wrapperDown","checkboxText","checkmark","buttonLogin","errorLogIn","logInThunk","authR","_error","loginFormContainer","initialized","appReducer","reducers","combineReducers","messagesReducer","formReducer","app","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","withSuspense","fallback","MessagesContainer","lazy","App","initializeAppThunk","exact","path","render","Login","AppContainer","promise","Promise","all","HightApp","ReactDOM","navigator","serviceWorker","ready","registration","unregister","SEND_MESSAGE","SET_NEW_DIALOG","SEARCH_DIALOG","IS_SEARCH_MODE","dialogItemsData","date","formatTime","dialogsFromSearch","isSearchMode","userForMessage","sendMessage","setNewDialog","setIsFetching","setSearch","word","setUserForMessages","find","messagePopup","getUserForMessages","includes","today","other","isToday","getDate","getMonth","getFullYear","isMonth","isYear","formatTimeToLastMessage","EmojiPickerStatus","emojiPickerMode","setEPMode","onMouseEnter","onMouseLeave","buttomEmoji","style","position","showPreview","showSkinTones","emojiSize","title","onSelect","sym","unified","split","codesArray","push","emoji","String","fromCodePoint","native","EmojiPickerForm","change","values","mapStateToPropsForRedirect","RedirectComponent"],"mappings":"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","file":"static/js/main.ecbae7d2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuContainer\":\"sideBar_menuContainer__18Lfz\",\"logo\":\"sideBar_logo__9RRw6\",\"navBar\":\"sideBar_navBar__YBnCk\",\"menu\":\"sideBar_menu__1xC9a\",\"headList\":\"sideBar_headList__24K8S\",\"news\":\"sideBar_news__J8skV\",\"messages\":\"sideBar_messages__1n1Nl\",\"friends\":\"sideBar_friends__3vyPd\",\"communities\":\"sideBar_communities__3EApI\",\"events\":\"sideBar_events__3aqKz\",\"pages\":\"sideBar_pages__3WtuN\",\"manage\":\"sideBar_manage__2D3te\",\"shortcuts\":\"sideBar_shortcuts__21j8D\",\"google\":\"sideBar_google__1fxTt\",\"combinator\":\"sideBar_combinator__2qM8s\",\"amazon\":\"sideBar_amazon__2m_BQ\",\"active\":\"sideBar_active__3mlhi\",\"imgLogo\":\"sideBar_imgLogo__23Q4K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloaderContainer\":\"preloader_preloaderContainer__1KSyM\",\"preloader\":\"preloader_preloader__3Xfze\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AboutProfile_container__2nPCp\",\"header\":\"AboutProfile_header__1nUzy\",\"aboutMe\":\"AboutProfile_aboutMe__F5PvP\",\"contacts\":\"AboutProfile_contacts__JcdWI\",\"row\":\"AboutProfile_row__1da5i\",\"rowInfo\":\"AboutProfile_rowInfo__1KDMM\",\"nameInfo\":\"AboutProfile_nameInfo__RyrWk\",\"edit\":\"AboutProfile_edit__226M0\",\"save\":\"AboutProfile_save__3nwxJ\",\"nameField\":\"AboutProfile_nameField__3NIAR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemPost\":\"posts_itemPost__3EN8q\",\"postsContainer\":\"posts_postsContainer__PPElQ\",\"buttonPost\":\"posts_buttonPost__3l27h\",\"postFooter\":\"posts_postFooter__2C8dv\",\"likes\":\"posts_likes__2-sjm\",\"likesBody\":\"posts_likesBody__3wc4M\",\"liked\":\"posts_liked__1QESt\",\"likesWrapper\":\"posts_likesWrapper__2_8vu\",\"likesCountLiked\":\"posts_likesCountLiked__2H_w9\",\"posts\":\"posts_posts__2Sr89\",\"button\":\"posts_button__211qZ\",\"formPost\":\"posts_formPost__PKUyl\",\"avatar\":\"posts_avatar__1rvme\",\"headerPost\":\"posts_headerPost__3OoKL\",\"selectSort\":\"posts_selectSort__B3lcg\",\"name\":\"posts_name__3bc-E\",\"postBody\":\"posts_postBody__2OGDV\",\"nameBlock\":\"posts_nameBlock__14ToS\",\"menu\":\"posts_menu__7mIyF\",\"hidenMenu\":\"posts_hidenMenu__38Qc-\",\"menuItem\":\"posts_menuItem__1olJb\",\"buttomEmoji\":\"posts_buttomEmoji__3tD2K\",\"timePost\":\"posts_timePost__xcf7v\",\"likesCount\":\"posts_likesCount__b0sjS\"};","import * as axios from 'axios';\r\n\r\n\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        \"API-KEY\": \"d9c4ba29-f4a9-4d2d-8ba9-f90ead9fae9c\"\r\n    }\r\n})\r\nexport const usersAPI = {\r\n    getUsers(currentPage, pageSize = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n    postFollow(id) {\r\n        return instance.post(`follow/${id}`, {}).then(response => response.data)\r\n    },\r\n    deleteFollow(id) {\r\n        return instance.delete(`follow/${id}`, {}).then(response => response.data)\r\n    },\r\n    getFollow(id){\r\n        return instance.get(`follow/${id}`, {}).then(response => response.data)\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    getAuth() {\r\n        return instance.get('auth/me').then(response => response.data)\r\n    },\r\n    logIn(dataForm) {\r\n        return instance.post('auth/login', { email: dataForm.login, password: dataForm.password,\r\n             rememberMe: dataForm.rememberMe, captcha: dataForm.captcha })\r\n            .then(response => response.data)\r\n    },\r\n    logOut() {\r\n        return instance.delete('auth/login').then(response => response.data)\r\n    },\r\n\r\n}\r\nexport const securityAPI = {\r\n    getCaptcha() {\r\n        return instance.get('security/get-captcha-url').then(response => response.data)\r\n    }\r\n}\r\n\r\nexport const profileAPI = {\r\n    getProfile(id) {\r\n        return instance.get(`profile/${id}`).then(response => response)\r\n    },\r\n    getUserStatus(id) {\r\n        return instance.get(`profile/status/${id}`).then(response => response.data)\r\n    },\r\n    updateUserStatus(status) {\r\n        return instance.put('profile/status', { status: status }).then((response) => response.data);\r\n    },\r\n    updatePhoto(photo) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photo);\r\n\r\n        return instance.put('profile/photo', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }).then((response) => response.data);\r\n    },\r\n    saveProfileData(profile) {\r\n        return instance.put(`profile`, profile).then(response => response.data)\r\n    }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAABHNCSVQICAgIfAhkiAAAAhdJREFUaIHtmjFIW0EYx//fI0aNiWBt0GSoDlYwIBhwERpxkgYqxSEFdXB00sFRXauTDnGyFBcHBelQaHVWhy6KTookg3GwQvMc9GlIbLkOomAxeS++l3d35X7jve+++37cvXt38Kgn8fmF5vmzAGKDBKqHRDCwS2L4ngNN7K2OZT1a1e95Ao0CxLu2siFQPQhDtXfFD2lgFOddlF0YY+8BRhoRmngXYxciqo0k1qs03oU4iZIRFQ/vAgDA7/OiraURoWAAzS8DD+2pjA7jJg8ASGd0GDeFknm4ysR725F424nXLY2msRMfv2H/8KxkDBcZv8+L2cl+RDvCjuZ1Xcbv8yI5M2BpNsrF9Q1gaqyvIiKAyzLRSBix7taK5XdVJh5rr2h+V9+ZaEfINCZ9qsO4LmD/6PHOdf7ryrSvazKhYADNwUDJmLmlLWxsHz97DNeWmZlI+lS3JQIIdJzZ2T2xnUMYGSdQMqKiZESF3gwvMScTLs4MoMvCx7FcYiOfSj6/uG2olmJmDo5+WoqTQsYqUsj8e04rhhQyZnf/e6SQSWV0S3FSyBjXeUtxjl8BUpnsk+3+Oi/aXhW/Lp9njaJ3Fqsz47hMcuXHk+3RSBjJ6XdF+21uH2P5y56tsaVYZlZRMqKiZERFyYiKkhEVJSMqSkZUlIyo/Hcya7yLcIC1w/UPBU+OYbwGyEv78xzoa45hknctjvMXmAh+sv75oN4AAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/Rolling-1s-200px.6fd59ae0.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"name\":\"profileDescription_name__2z7-J\",\"container\":\"profileDescription_container__32Q96\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"popUp_popup__1DRSj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"Profile_profile__1YLKP\"};","import React from 'react'\r\nimport styles from './FormControls.module.css'\r\nimport { Field } from 'redux-form';\r\n\r\n\r\n\r\n\r\nconst FormConstructor = (props) => {\r\n    const hasError = props.touched && props.error;\r\n    return (\r\n        <div className={styles.formControl + \" \" + (hasError ? styles.error : \"\")} >\r\n            <div>\r\n                {props.element}\r\n            </div>\r\n            {hasError && <span>{props.error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport const Input = ({ input, meta, ...props }) => {\r\n    const el = React.createElement('input', { ...input, ...props })\r\n    return (\r\n        <FormConstructor element={el} {...meta} />\r\n    )\r\n}\r\n\r\n\r\n\r\nexport const Textarea = ({ input, meta, ...props }) => {\r\n\r\n    const el = React.createElement('textarea', { ...input, ...props })\r\n    return (\r\n        <FormConstructor element={el} {...meta} />\r\n    )\r\n}\r\n\r\nexport const createField = ( placeholder, name, validators, component,  label=false, text, props) => {\r\n   return <div className={styles.formCustom}>\r\n        \r\n        <Field id={name} placeholder={placeholder} name={name} validate={validators}  component={component} {...props} />\r\n        {label && <label htmlFor={name}>{text}</label>}\r\n    </div>\r\n}","export const required = value => {\r\n    if(value) return undefined\r\n    return 'Field is required'\r\n}\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n    if(value.length > maxLength) return `Max length is ${maxLength} symbols`\r\n    return undefined\r\n}\r\nexport const voidValue =  value =>\r\n  value && value.trim() === '' ? `Enter your text` : undefined","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"popUpMessage_popup__2n55c\",\"headerPopup\":\"popUpMessage_headerPopup__1Qeso\",\"popupBody\":\"popUpMessage_popupBody__1ijaD\",\"popupAvatar\":\"popUpMessage_popupAvatar__1-a3p\",\"userHeader\":\"popUpMessage_userHeader__1RmiD\",\"usernameBlock\":\"popUpMessage_usernameBlock__2FYQg\",\"linkMessage\":\"popUpMessage_linkMessage__1SNow\",\"popupUserName\":\"popUpMessage_popupUserName__5NB9f\",\"onlineStatus\":\"popUpMessage_onlineStatus__3rMYu\",\"closePopup\":\"popUpMessage_closePopup__23fNe\",\"messageForm\":\"popUpMessage_messageForm__3G4j4\",\"buttonForm\":\"popUpMessage_buttonForm__3174Z\",\"textHeader\":\"popUpMessage_textHeader__2moO9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"footer_footer__15YAN\",\"avatar\":\"footer_avatar__t74Mi\",\"login\":\"footer_login__1wmOC\",\"you\":\"footer_you__I00Wy\",\"authBlock\":\"footer_authBlock__31ytO\",\"authLogin\":\"footer_authLogin__28uP0\",\"arrowMenu\":\"footer_arrowMenu__nTIfW\",\"menuContainer\":\"footer_menuContainer__1zUJi\",\"authMenu\":\"footer_authMenu__Aqo7u\",\"itemMenu\":\"footer_itemMenu__3g_D_\"};","import preloader from './../../../assets/img/Rolling-1s-200px.svg';\r\nimport React from 'react';\r\nimport styles from './preloader.module.css'\r\n\r\nconst Preloader = () =>{\r\n    return <div className={styles.preloaderContainer}>\r\n        <img className={styles.preloader} src={preloader} alt=\"preloader\"/>\r\n    </div>\r\n}\r\nexport default Preloader;","module.exports = __webpack_public_path__ + \"static/media/ava.03e01a87.jpg\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\r\nimport styles from './sideBar.module.css'\r\nimport  logo from '../../img/F_icon.png'\r\nimport {NavLink} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nconst SideBar = (props) => {\r\n    return <div className='sideBar'>\r\n        <div className={styles.menuContainer}>\r\n            <NavLink className={styles.logo} to={'/profile/' + props.authId}><img className={styles.imgLogo} src={logo} alt='logo'/></NavLink>\r\n            <nav className={styles.navBar}>\r\n                <ul className={styles.menu}> <span className={styles.headList}>Menu</span>\r\n                    <li className={styles.news}><NavLink activeClassName={styles.active} to='/news'>News</NavLink></li>\r\n                    <li className={styles.messages}><NavLink activeClassName={styles.active} to='/messages'>Messages</NavLink></li>\r\n                    <li className={styles.friends}><NavLink activeClassName={styles.active} to='/friends'>Friends</NavLink></li>\r\n                    <li className={styles.communities}><NavLink activeClassName={styles.active} to='/communities'>Communities</NavLink></li>\r\n                    <li className={styles.events}><NavLink activeClassName={styles.active} to='/events'>Events</NavLink></li>\r\n                    <li className={styles.pages}><NavLink activeClassName={styles.active} to='/pages'>Pages</NavLink></li>\r\n                    <li className={styles.manage}><NavLink activeClassName={styles.active} to='/manage'>Manage apps</NavLink></li>\r\n                </ul>\r\n            </nav>\r\n            <ul className={styles.shortcuts}><span className={styles.headList}>Shortcuts</span>\r\n                <li className={styles.google}><a  target=\"_blank\" rel=\"noopener noreferrer\" href='https://www.google.com/'>Google Inc.</a></li>\r\n                <li className={styles.combinator}><a target=\"_blank\" rel=\"noopener noreferrer\"  href='https://www.ycombinator.com/'>Y Combinator</a></li>\r\n                <li className={styles.amazon}><a target=\"_blank\" rel=\"noopener noreferrer\"  href='https://www.amazon.com/'>Amazon</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n}\r\nconst mapStateToPropst = (state) => ({\r\n    authId: state.auth.id\r\n})\r\n\r\nexport default connect(mapStateToPropst, null)(SideBar)","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport styles from './profileStatus.module.css'\r\nimport { EmojiPickerStatus } from '../../../common/EmojiPicker/EmojiPicker'\r\n\r\nconst ProfileStatusWithHooks = ({ updateStatus, isMyPage, ...props }) => {\r\n    const [editMode, setEditMode] = useState(false)\r\n    const [status, setStatus] = useState(props.status)\r\n\r\n    const nodeStatus = useRef()\r\n\r\n\r\n    useEffect(() => {\r\n        const handlerClick = (e) => {\r\n\r\n            if (nodeStatus.current && e.target !== nodeStatus.current && !(nodeStatus.current.contains(e.target))) {\r\n                document.removeEventListener('click', handlerClick)\r\n                setEditMode(false)\r\n                setStatus(props.status)\r\n            }\r\n        }\r\n\r\n        if (nodeStatus.current) {\r\n            document.addEventListener('click', handlerClick)\r\n        }\r\n        else {\r\n            document.removeEventListener('click', handlerClick)\r\n        }\r\n        return () => {\r\n            document.removeEventListener('click', handlerClick)\r\n\r\n        }\r\n    }, [editMode, props.status])\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    const outEditMode = (e) => {\r\n        updateStatus(status)\r\n        setEditMode(false)\r\n    }\r\n\r\n\r\n\r\n    return <div className={styles.statusWrap}>\r\n        {isMyPage\r\n            ? <div className={styles.statusContainer} >\r\n                <div>\r\n                    <span onClick={() => { setEditMode(true) }} className={styles.status}>{(props.status && (props.status.length > 40 ? props.status.slice(0, 40) + '...' : props.status)) || 'set a status message'}</span>\r\n                </div>\r\n                {editMode &&\r\n                    <div className={styles.changeStatusContainer} ref={nodeStatus}>\r\n                        <div ><input className={styles.inputStatus} autoFocus={true} onChange={(e) => { setStatus(e.currentTarget.value) }} value={status} /></div>\r\n                        <EmojiPickerStatus status={status} setStatus={setStatus} styles={styles} />\r\n                        <button className={styles.saveButton} onClick={() => { outEditMode() }}>Save</button>\r\n                    </div>}\r\n            </div>\r\n            : <div >\r\n                {\r\n                    props.status\r\n                        ? props.status.length > 100 ? props.status.slice(0, 100) : props.status\r\n                        : null\r\n                }\r\n            </div>\r\n        }\r\n\r\n    </div>\r\n\r\n}\r\n\r\nexport default ProfileStatusWithHooks","import React from 'react'\r\nimport { reduxForm, Field } from 'redux-form'\r\nimport { createField, Input, Textarea } from '../../../common/FormControls/FormControls'\r\nimport { required } from '../../../../utils/validators/validator'\r\nimport { Prompt } from 'react-router'\r\nimport styles from './AboutProfile.module.css'\r\n\r\nconst ProfileEditor = ({ handleSubmit, profile, ...props}) => {\r\n    return <form onSubmit={handleSubmit}>\r\n       \r\n        <h3 className={styles.nameInfo}>Full name</h3>\r\n        {createField('Full Name', 'fullName', [required], Input, false, null)}\r\n        <label><h3 className={styles.nameInfo}>Looking for a Job:</h3> </label>\r\n        <div>\r\n            <label><Field name=\"lookingForAJob\" component={'input'} type=\"radio\" value='true' /> Yes</label>\r\n            <label><Field name=\"lookingForAJob\" component={'input'} type=\"radio\" value='false' checked={true} /> No</label>\r\n        </div>\r\n        <h3 className={styles.nameInfo}>Skills:</h3>\r\n        {createField(null, 'lookingForAJobDescription', [required], Textarea, false, null, null, { colls: 10, rows: 30 })}\r\n        <h3 className={styles.nameInfo}>About me:</h3>\r\n        {createField(null, 'aboutMe', [required], Textarea, false, null, null, { colls: 10, rows: 30 })}\r\n        <h2 className={styles.nameInfo}>Contacts:</h2>\r\n        {Object.keys(profile.contacts).map((key) => {\r\n            return <div key={key}>\r\n                <h3 className={styles.nameField}>\r\n                    {key}\r\n                </h3>\r\n                {createField(key, 'contacts.' + key, null, Input, false, null, { value: profile.contacts[key] })}\r\n            </div>\r\n        })\r\n        }\r\n        <Prompt\r\n            when={props.dirty }\r\n            message='You have unsaved changes, are you sure you want to leave?'\r\n        />\r\n        <button  className={styles.save}>save</button>\r\n    </form>\r\n}\r\n const ProfileEditorReduxForm = reduxForm({ form: 'edit-profile' })(ProfileEditor)\r\n\r\n export default ProfileEditorReduxForm","import React from 'react';\r\n\r\n\r\nimport styles from './AboutProfile.module.css';\r\nimport ProfileEditorReduxForm from './ProfileEditorReduxForm'\r\n\r\nconst AboutProfile = ({ setEditProfile, isEditMode, profile, isMyPage, saveProfileData }) => {\r\n    const onSubmit = (formData) => {\r\n        saveProfileData(formData);\r\n    }\r\n\r\n    return <div className={styles.container}>\r\n\r\n        {!isEditMode && <><div className={styles.header}>\r\n            <div className={styles.aboutMe}>About me</div>\r\n            {isMyPage && !isEditMode && <div role='button' className={styles.edit} onClick={() => { setEditProfile(true) }}></div>}\r\n        </div>\r\n\r\n            {profile.aboutMe &&\r\n                <div className={styles.row}>\r\n                    <div className={styles.nameInfo}>Description:  </div>\r\n                    <div className={styles.rowInfo}>{profile.aboutMe}</div>\r\n                </div>}\r\n\r\n            <div className={styles.row}>\r\n                <div className={styles.nameInfo}>Looking for a job:</div>\r\n                <div>{profile.lookingForAJob ? 'yes' : 'no'}</div>\r\n            </div>\r\n\r\n            {profile.lookingForAJobDescription &&\r\n                <div className={styles.row}>\r\n                    <div className={styles.nameInfo}>Skills:</div>\r\n                    <div className={styles.rowInfo}>{profile.lookingForAJobDescription}</div>\r\n                </div>}\r\n\r\n            {Object.keys(profile.contacts).some(i => profile.contacts[i] !== null && profile.contacts[i] !== '') && <h2 className={styles.header}>Contacts</h2>}</>\r\n        }\r\n        {!isEditMode && Object.keys(profile.contacts).filter(key => profile.contacts[key] ? true : false).map((key) => {\r\n            return <div key={key} className={styles.row}>\r\n                <div className={styles.nameInfo}>{key + ':'}</div>\r\n                <div className={styles.rowInfo}>\r\n                    <a href={profile.contacts[key]} target='_blank' rel=\"noopener noreferrer\" >{profile.contacts[key].slice(8)}</a>\r\n                </div>\r\n            </div>\r\n        })}\r\n\r\n        {isMyPage && isEditMode && <ProfileEditorReduxForm isEditMode={isEditMode} initialValues={profile} onSubmit={onSubmit} profile={profile} />}\r\n    </div>\r\n\r\n}\r\n\r\n\r\nexport default AboutProfile;","import React from 'react';\r\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks';\r\nimport styles from './profileDescription.module.css'\r\nimport AboutProfile from './AboutProfile'\r\nconst ProfileDescrition = ({ setEditProfile, isEditMode, profile, isMyPage, ...props }) => {\r\n\r\n\r\n    \r\n    return <div >\r\n        <h2 className={styles.name}>{profile.fullName}</h2>\r\n        <ProfileStatusWithHooks isMyPage={isMyPage} updateStatus={props.updateStatus} status={props.status} />\r\n        <AboutProfile setEditProfile={setEditProfile} isEditMode={isEditMode} profile={profile} isMyPage={isMyPage} saveProfileData={props.saveProfileData}/>\r\n    </div>\r\n}\r\n\r\n\r\n\r\nexport default ProfileDescrition;","\r\nimport React from 'react'\r\nimport styles from './popUp.module.css'\r\n\r\n\r\n\r\n\r\nconst PopUp = ({ Component, ...props }) => {\r\n\r\n    const clickHandler = (e) => {\r\n        if (e.target === e.currentTarget) props.closePopup()\r\n    }\r\n    return <div onClick={clickHandler} className={styles.popup} >\r\n        <Component {...props} />\r\n    </div>\r\n}\r\nexport default PopUp      ","\r\nimport React from 'react'\r\nimport avatar from '../../../assets/img/ava.jpg'\r\nimport styles from './popUpMessage.module.css'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { reduxForm } from 'redux-form'\r\nimport { createField } from '../FormControls/FormControls'\r\nimport { required, voidValue } from '../../../utils/validators/validator'\r\n\r\nimport { messageFromPopUp } from '../../../redux/messages-reducer'\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nexport const PopUpMessage = ({ user, closePopup, messageFromPopUp }) => {\r\n\r\n \r\n    const id = user.id || user.userId\r\n    const name = user.name || user.fullName\r\n\r\n    return <div className={styles.popup}>\r\n        <div className={styles.headerPopup}>\r\n            <div className={styles.textHeader}>New message</div>\r\n            <div className={styles.linkMessage}>\r\n                <NavLink to={`/messages/${id}`}>Open full chat with {name}</NavLink>\r\n            </div>\r\n            <div onClick={closePopup} className={styles.closePopup} role='button'></div>\r\n        </div>\r\n        <div className={styles.popupBody}>\r\n            <div className={styles.userHeader}>\r\n                <div>\r\n                    <NavLink to={`profile/${id}`}>\r\n                        <img  src={user.photos.small != null ? user.photos.small : avatar} alt=\"\" className={styles.popupAvatar} />\r\n                    </NavLink>\r\n                </div>\r\n                <div className={styles.usernameBlock}>\r\n                    <NavLink to={`profile/${id}`}>\r\n                        <p id='popUpuserName' className={styles.popupUserName}>{name}</p>\r\n                    </NavLink>\r\n                    <p className={styles.onlineStatus}>Offline</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <AddMessagePopupFormRedux onSubmit={(data) => {\r\n            messageFromPopUp(data, user)\r\n            closePopup()\r\n        }} />\r\n    </div>\r\n}\r\nconst addMessagePopup = (props) => {\r\n    return <form onSubmit={props.handleSubmit} className={styles.messageForm}>\r\n        {createField(null, 'messagePopup', [required, voidValue], 'textarea', null, null)}\r\n        <div>\r\n            <button className={styles.buttonForm} type='submit'>Send</button>\r\n        </div>\r\n    </form>\r\n}\r\nconst AddMessagePopupFormRedux = reduxForm({ form: 'message-popup' })(addMessagePopup)\r\n const PopUpMessageWithConnect = connect(null, { messageFromPopUp })(PopUpMessage)\r\n\r\n export default PopUpMessageWithConnect","\r\nimport React from 'react';\r\n\r\nimport styles from './popupAvatar.module.css'\r\n\r\nconst PopUpAvatar = ({ avatar, closePopup }) => {\r\n    return <div className={styles.popup}>\r\n\r\n        <div onClick={closePopup} className={styles.closePopup} role='button'></div>\r\n        <img className={styles.avatr} src={avatar} alt=\"avatr\"/>\r\n  \r\n</div>\r\n}\r\n\r\nexport default PopUpAvatar;","\r\nimport React from 'react';\r\nimport avatar from '../../../../assets/img/ava.jpg'\r\nimport styles from './ProfilePhoto.module.css'\r\n\r\n\r\n\r\nconst ProfileAvatar = ({isMyPage, savePhoto, setPopupAvatar, photoLarge}) => {\r\n\r\n    const updatePhoto = e => {\r\n        if (e.target.files[0]) {\r\n            savePhoto(e.target.files[0])\r\n        }\r\n    }\r\n\r\n    return <div className={isMyPage ? styles.avatarContainer + ' ' + styles.avatarUpdate : styles.avatarContainer}>\r\n            <img onClick={() => { photoLarge && setPopupAvatar(true) }} className={styles.avatar + ' ' + (photoLarge && styles.avatarCustom)}\r\n                src={photoLarge ? photoLarge : avatar} alt=\"\" />\r\n            {isMyPage\r\n                && <div className={styles.changePhoto}>\r\n                    <label htmlFor=\"upload-photo\" className={styles.changePhotoLabel}>Update photo</label>\r\n                    <input className={styles.changePhotoInput} id=\"upload-photo\" type='file' onChange={updatePhoto} />\r\n                </div>\r\n            }\r\n    </div>\r\n}\r\nexport default ProfileAvatar;","import React from 'react'\r\nimport Preloader from '../../common/Preloader/Preloader'\r\nimport styles from './profileInfo.module.css'\r\nimport avatar from '../../../assets/img/ava.jpg'\r\nimport PfofileDescription from './ProfileDescription/ProfileDescription'\r\nimport PopUp from '../../common/PopUp/popUp'\r\nimport PopUpMessage from '../../common/PopUp/PopUpMessage'\r\nimport PopUpAvatar from '../../common/PopUp/popUpAvatar'\r\nimport ProfileAvatar from './ProfileAvatar/ProfileAvatar'\r\n\r\nconst ProfileInfo = ({ profile, isMyPage, isFollowed, sendMessageMode, avatarPopup, setPopupAvatar, followUnfollow, userId, ...props }) => {\r\n\r\n\r\n    return profile\r\n\r\n        ? <div className={styles.profileInfoContainer}>\r\n            <div className={styles.profileInfo}>\r\n                <div className={styles.profileAvatarContainer}>\r\n                    <ProfileAvatar isMyPage={isMyPage} photoLarge={profile.photos.large} savePhoto={props.savePhoto} setPopupAvatar={setPopupAvatar} />\r\n\r\n                    {isMyPage\r\n                        ? <div role='button' className={styles.edit} onClick={() => { props.setEditProfile(true) }}>Edit Profile</div>\r\n                        : <>\r\n                            <div role='button' className={styles.send} onClick={() => { props.setMessageMode(true) }}>Send Message</div>\r\n                            {isFollowed\r\n                                ? <div className={styles.send} onClick={() => { followUnfollow(false, userId) }}> Unfollow </div>\r\n                                : <div className={styles.send} onClick={() => { followUnfollow(true, userId) }}> Follow </div>}\r\n                        </>\r\n                    }\r\n                    {sendMessageMode && <PopUp user={profile} Component={PopUpMessage} closePopup={() => { props.setMessageMode(false) }} />}\r\n                    {avatarPopup && <PopUp avatar={profile.photos.large ? profile.photos.large : avatar} Component={PopUpAvatar} closePopup={() => { setPopupAvatar(false) }} />}\r\n                </div>\r\n                <PfofileDescription setEditProfile={props.setEditProfile} isEditMode={props.isEditMode} isMyPage={isMyPage} profile={profile} {...props} />\r\n\r\n            </div>\r\n        </div>\r\n        : <Preloader />\r\n}\r\n\r\nexport default ProfileInfo;","import React from 'react'\r\nimport { reduxForm, reset } from 'redux-form'\r\nimport { required, maxLengthCreator, voidValue } from '../../../utils/validators/validator'\r\nimport { Textarea, createField } from '../../common/FormControls/FormControls'\r\nimport EmojiPicker from './../../common/EmojiPicker/EmojiPicker'\r\nimport { connect } from 'react-redux'\r\nimport styles from './posts.module.css'\r\n\r\nconst maxLength500 = maxLengthCreator(500)\r\n\r\nconst FormPost = (props) => {\r\n    return <form className={styles.formPost} onSubmit={props.handleSubmit}>\r\n\r\n        {createField('Share your great thoughts here', 'postBody', [required, maxLength500, voidValue], Textarea)}\r\n        <EmojiPicker bottom='70%' right='0'  width='50%'\r\n         formName='formPost' fieldName='postBody' Form={props.addPostForm} styles={styles} dispatch={props.dispatch} />\r\n        <button className={styles.button} type='submit' >Post</button>\r\n    </form>\r\n    }\r\n    const afterSumbit = (result, dispatch) => {\r\n        dispatch(reset('formPost'))\r\n    }\r\n    const FormPostRedux = reduxForm({\r\n        form: 'formPost',\r\n        onSubmitSuccess: afterSumbit\r\n    })(FormPost)\r\n\r\n    const mapStateToPropse = (state) => ({\r\n        addPostForm: state.form.formPost\r\n    })\r\n    const AddPostFormWithConnect = connect(mapStateToPropse)(FormPostRedux)\r\n\r\n    export default AddPostFormWithConnect","import React from 'react'\r\nimport styles from './posts.module.css'\r\n\r\nimport avatar from '../../../assets/img/ava.jpg'\r\nimport Preloader from '../../common/Preloader/Preloader'\r\nimport { NavLink } from 'react-router-dom'\r\nimport AddPostFormWithConnect from './AddPostFormWithConnect'\r\n\r\n\r\n\r\nconst Posts = (props) => {\r\n\r\n\r\n    const sortPost = (e) => {\r\n        e.target.value === 'New' ? props.sortByTime() : props.sortByLikes()\r\n    }\r\n\r\n    return props.profile\r\n        ? <div className={styles.postsContainer}>\r\n            <AddPostFormWithConnect onSubmit={props.sendPostThunk} />\r\n            {props.posts.length ?\r\n                <div className={styles.selectSort}>Sort by <select className={styles.selectSort} onChange={sortPost}>\r\n                    <option >New</option>\r\n                    <option >Popular</option>\r\n                </select></div> : null}\r\n            {props.posts.map((p) => <div key={p.id}>\r\n                <div key={p.id} className={styles.itemPost}>\r\n                    <div className={styles.headerPost}>\r\n                        <NavLink to={`/profile/${p.userId}`}> <img className={styles.avatar} src={p.avatar || avatar} alt=\"avatar\" /></NavLink>\r\n\r\n                        <div className={styles.nameBlock}>\r\n                            <NavLink to={`/profile/${p.userId}`}> <div className={styles.name}>{p.name}</div></NavLink>\r\n                            <div className={styles.timePost}>{p.timeFormat}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={styles.postBody}>\r\n                        {p.text}\r\n                    </div>\r\n                    <div className={styles.menu}><span className={styles.hidenMenu} onClick={() => { props.deletePost(p.id) }} ><div className={styles.menuItem}>Delete post</div></span></div>\r\n                    <div className={styles.postFooter}>\r\n\r\n                        <div className={styles.likesBody}>\r\n                            <div className={styles.likesWrapper} onClick={() => { p.liked ? props.likesToggle(false, p.id) : props.likesToggle(true, p.id) }}>\r\n                                <div className={styles.likes + ' ' + (p.liked && styles.liked)}></div>\r\n                                <span className={styles.likesCount + ' ' + (p.liked && styles.likesCountLiked)}>{p.likesCount > 0 && p.likesCount}</span>  </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>)}\r\n        </div>\r\n        : <Preloader />\r\n}\r\n\r\nexport default Posts","import React from 'react';\r\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\r\nimport Posts from './Posts/Posts';\r\nimport styles from './Profile.module.css';\r\n\r\n\r\n\r\nconst Profile = ({sendPostThunk, posts, profile, status, userId, ...props}) => {\r\n        return <div className={styles.profile}>\r\n        <ProfileInfo  messageFromPopUp={props.messageFromPopUp}\r\n         isMyPage={props.isMyPage} savePhoto={props.savePhotoThunk}\r\n         profile={profile} status={status} updateStatus={props.updateStatusThunk} \r\n         saveProfileData={props.saveProfileData} isEditMode={props.isEditMode} \r\n         setEditProfile={props.setEditProfile} isFollowed={props.isFollowed}\r\n         userId={userId} followUnfollow={props.followUnfollow} setMessageMode={props.setMessageMode}\r\n         sendMessageMode={props.sendMessageMode} avatarPopup={props.avatarPopup} setPopupAvatar={props.setPopupAvatar}/>\r\n         \r\n        <Posts deletePost={props.deletePost} likesToggle={props.likesToggle} profile={profile} isMyPage={props.isMyPage} \r\n        sortByTime={props.sortByTime} sortByLikes={props.sortByLikes}  sendPostThunk={sendPostThunk} posts={posts}  />\r\n    </div>\r\n}\r\n\r\nexport default Profile;","import { profileAPI } from '../API/api'\r\nimport { stopSubmit } from 'redux-form'\r\nimport { usersAPI } from '../API/api'\r\n\r\nimport * as profileR from './profile-reducer'\r\n\r\nexport const SEND_POST = 'profile-reducer/SEND_POST'\r\nexport const SET_USER_PROFILE = 'profile-reducer/SET_USER_PROFILE'\r\nexport const SET_USER_STATUS = 'profile-reducer/SET_USER_STATUS'\r\nexport const SET_PHOTO_PROFILE = 'profile-reducer/SET_PHOTO_PROFILE'\r\nexport const SET_EDIT_PROFILE = 'profile-reducer/SET_EDIT_PROFILE'\r\nexport const RESET_USER_POFILE = 'profile-reducer/RESET_USER_POFILE'\r\nexport const FOLLOW_UNFOLLOW_SUCCESS = 'profile-reducer/FOLLOW_UNFOLLOW_SUCCESS'\r\nexport const TOGGLE_IS_FETCHING = 'profile-reducer/TOGGLE_IS_FETCHING'\r\nexport const SEND_MESSAGE_MODE = 'profile-reducer/SEND_MESSAGE_MODE'\r\nexport const SET_POPPUP_AVATAR = 'profile-reducer/SET_POPPUP_AVATAR'\r\nexport const TOGGLE_LIKE_SUCCESS = 'profile-reducer/TOGGLE_LIKE_SUCCESS'\r\nexport const DELETE_POST_SUCCESS = 'profile-reducer/DELETE_POST_SUCCESS'\r\nexport const SORT_BY_TIME = 'profile-reducer/SORT_BY_TIME'\r\nexport const SORT_BY_LIKES = 'profile-reducer/SORT_BY_LIKES'\r\nexport const IS_USER_EXIST = 'profile-reducer/IS_USER_EXIST'\r\n\r\nconst options = {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    timezone: 'UTC',\r\n    hour: 'numeric',\r\n    minute: 'numeric'\r\n}\r\n\r\n\r\nconst initialState = {\r\n    posts: [\r\n        {\r\n            name: 'ChelCode', userId: '1601', avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1601/user-small.jpg?v=13',\r\n            text: 'Whats up??!', id: 2, likesCount: 0, time: 1574713363365, timeFormat: 'November 11, 2019, 10:20 PM', liked: false\r\n        },\r\n        {\r\n            name: 'ChelCode', avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1601/user-small.jpg?v=13',\r\n            text: 'hello world!!', userId: '1601', id: 1, likesCount: 12, time: 1574713324589, timeFormat: 'November 9, 2019, 2:46 PM', liked: false\r\n        }],\r\n    currentTextPost: '',\r\n    profile: null,\r\n    status: '',\r\n    isEditMode: false,\r\n    isFollowed: false,\r\n    isFetching: false,\r\n    sendMessageMode: false,\r\n    avatarPopup: false,\r\n    isUserExist: true\r\n}\r\n\r\nexport const profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n\r\n        case SEND_POST:\r\n            return {\r\n                ...state,\r\n                posts: [{\r\n                    text: action.payload.post.postBody, time: action.payload.time, id: state.posts.length + 1, \r\n                    likesCount: 0, timeFormat: action.payload.timeFormat, liked: false, name: action.payload.name, \r\n                    avatar: action.payload.avatar, userId: action.payload.userId\r\n                }, ...state.posts],\r\n            }\r\n        case SET_USER_PROFILE:\r\n            return { ...state, profile: action.payload }\r\n        case SET_USER_STATUS:\r\n            return { ...state, status: action.payload }\r\n        case SET_PHOTO_PROFILE:\r\n            return { ...state, profile: { ...state.profile, photos: action.payload } }\r\n        case SET_EDIT_PROFILE:\r\n            return { ...state, isEditMode: action.payload }\r\n        case RESET_USER_POFILE:\r\n            return initialState\r\n        case FOLLOW_UNFOLLOW_SUCCESS:\r\n            return { ...state, isFollowed: action.payload }\r\n        case TOGGLE_IS_FETCHING:\r\n            return { ...state, isFetching: action.payload }\r\n        case SEND_MESSAGE_MODE:\r\n            return { ...state, sendMessageMode: action.payload }\r\n        case SET_POPPUP_AVATAR:\r\n            return { ...state, avatarPopup: action.payload }\r\n        case TOGGLE_LIKE_SUCCESS:\r\n            return { ...state, posts: state.posts.map(p => \r\n                action.payload.idPost === p.id \r\n                ? { ...p, liked: action.payload.isLiked, likesCount: action.payload.isLiked \r\n                    ? p.likesCount + 1 \r\n                    : p.likesCount - 1 } \r\n                : p) }\r\n        case DELETE_POST_SUCCESS:\r\n            return { ...state, posts: state.posts.filter(p => \r\n                p.id !== action.payload).map((p, index) => { return { ...p, id: index + 1 } }) }\r\n        case SORT_BY_TIME:\r\n            return { ...state, posts: [...state.posts.sort((a, b) => { return b.time - a.time })] }\r\n        case SORT_BY_LIKES:\r\n            return { ...state, posts: [...state.posts.sort((a, b) => { return b.likesCount - a.likesCount })] }\r\n        case IS_USER_EXIST:\r\n            return {...state, ...action.payload}    \r\n        default: return state\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, payload: isFetching })\r\nexport const resetProfile = () => ({ type: RESET_USER_POFILE })\r\nexport const sendPost = (post, name, avatar, userId) => ({ type: SEND_POST, payload: {post, timeFormat: new Date(Date.now()).toLocaleString(\"en-US\", options), time: Date.now(), name, avatar, userId} })\r\n\r\n\r\nexport const setEditProfile = (mode) => ({ type: SET_EDIT_PROFILE, payload: mode })\r\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, payload: profile })\r\nexport const setUserStatus = (status) => ({ type: SET_USER_STATUS, payload: status })\r\nexport const setFollowUnfollow = (isFollow) => ({ type: FOLLOW_UNFOLLOW_SUCCESS, payload: isFollow })\r\nexport const setMessageMode = (isSendMode) => ({ type: SEND_MESSAGE_MODE, payload: {isSendMode} })\r\nexport const setPopupAvatar = (isPopup) => ({ type: SET_POPPUP_AVATAR, payload: {isPopup} })\r\nexport const likesToggle = (isLiked, idPost) => ({ type: TOGGLE_LIKE_SUCCESS, payload: {isLiked, idPost} })\r\nexport const deletePost = (idPost) => ({ type: DELETE_POST_SUCCESS, payload: idPost })\r\nexport const sortByTime = () => ({ type: SORT_BY_TIME })\r\nexport const sortByLikes = () => ({ type: SORT_BY_LIKES })\r\nexport const setIsUserExist = (isUserExist) => ({ type: IS_USER_EXIST, payload: {isUserExist} })\r\nexport const savePhotoSucсess = (photos) => ({ type: SET_PHOTO_PROFILE, payload: photos })\r\nexport const sendPostThunk = (post) => (dispatch, getState) => {\r\n\r\n    const name = getState().auth.login\r\n    const avatar = getState().auth.avatar\r\n    const userId = getState().auth.id\r\n    dispatch(sendPost(post, name, avatar, userId))\r\n}\r\nexport const getProfileThunk = (userId) => async (dispatch) => {\r\n    \r\n    \r\n    const response = await (profileAPI.getProfile(userId)).catch(()=>{\r\n        dispatch(setIsUserExist(false))\r\n    })\r\n    \r\n      if(response){\r\n          \r\n        dispatch(setUserProfile(response.data))  \r\n    } \r\n\r\n      \r\n    \r\n     \r\n}\r\n\r\n\r\n\r\nexport const getStatusThunk = (userId) => async (dispatch) => {\r\n    const data = await (profileAPI.getUserStatus(userId))\r\n\r\n    dispatch(setUserStatus(data))\r\n\r\n}\r\nexport const updateStatusThunk = (status) => async (dispatch) => {\r\n    const data = await (profileAPI.updateUserStatus(status))\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(setUserStatus(status))\r\n    }\r\n\r\n}\r\nexport const savePhotoThunk = (photo) => async (dispatch) => {\r\n    const data = await (profileAPI.updatePhoto(photo))\r\n\r\n    if (data.resultCode === 0) {\r\n        dispatch(savePhotoSucсess(data.data.photos))\r\n    }\r\n\r\n}\r\nexport const saveProfileData = (profile) => async (dispatch, getState) => {\r\n    const userId = getState().auth.id\r\n    const response = await (profileAPI.saveProfileData(profile))\r\n\r\n\r\n    if (response.resultCode === 0) {\r\n        dispatch(profileR.getProfileThunk(userId))\r\n        dispatch(setEditProfile(false))\r\n    } else {\r\n        let number = response.messages[0].indexOf('>')\r\n        let test = response.messages[0].slice(number + 1, -1).toLowerCase()\r\n        dispatch(stopSubmit('edit-profile', { 'contacts': { [test]: test + ' incorrect' } }))\r\n    }\r\n}\r\nexport const getFollowedThunk = (id) => async (dispatch) => {\r\n    const data = await (usersAPI.getFollow(id))\r\n    dispatch(setFollowUnfollow(data))\r\n\r\n}\r\nexport const followUnfollow = (isFollow, id) => async (dispatch) => {\r\n    dispatch(toggleIsFetching(true))\r\n    const data =\r\n        isFollow\r\n            ? await usersAPI.postFollow(id)\r\n            : await usersAPI.deleteFollow(id)\r\n    if (data.resultCode === 0) {\r\n        dispatch(setFollowUnfollow(isFollow))\r\n        dispatch(toggleIsFetching(false))\r\n    }\r\n\r\n\r\n}\r\nexport default profileReducer","export const profileStatus = (state) => {\r\n    return state.profilePage.status;\r\n}\r\nexport const profilePosts = (state) => {\r\n    return state.profilePage.posts;\r\n}\r\nexport const getIsAuth = (state) => {\r\n    return state.auth.isAuth;\r\n}\r\nexport const getAuthId = (state) =>{\r\n    return state.auth.id;\r\n}\r\nexport const getIsEditMode = (state) =>{\r\n    return state.profilePage.isEditMode;\r\n}\r\n\r\nexport const getProfile = (state) => {\r\n    return state.profilePage.profile;\r\n}\r\nexport const getFollowed = (state) => {\r\n    return state.profilePage.isFollowed;\r\n}\r\nexport const getIsFetching = (state) => {\r\n    return state.profilePage.isFetching;\r\n}\r\nexport const getIsSendMode = (state) => {\r\n    return state.profilePage.sendMessageMode;\r\n}\r\n\r\nexport const getIsAvatarPopup = (state) => {\r\n    return state.profilePage.avatarPopup;\r\n}\r\n\r\nexport const getIsUserExist = (state) => {\r\n    return state.profilePage.isUserExist;\r\n}","import React from 'react';\r\nimport Profile from './Profile'\r\nimport { connect } from 'react-redux';\r\nimport { resetProfile, setUserProfile, sendPostThunk, savePhotoThunk, getProfileThunk, getStatusThunk, updateStatusThunk, saveProfileData, setEditProfile,\r\n getFollowedThunk, followUnfollow, setMessageMode, setPopupAvatar, likesToggle, deletePost, sortByTime, sortByLikes, setIsUserExist} from './../../redux/profile-reducer';\r\nimport {messageFromPopUp} from './../../redux/messages-reducer'\r\nimport { withRouter, Redirect } from 'react-router-dom';\r\nimport withAuthRedirect from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\nimport { profileStatus, profilePosts, getIsAuth, getAuthId, getIsEditMode, getProfile, getFollowed, getIsFetching, getIsSendMode, getIsAvatarPopup,getIsUserExist } from './profile-selectors';\r\nimport Preloader from '../common/Preloader/Preloader';\r\n\r\n\r\nclass ProfileContainer extends React.Component {\r\n   \r\n     refreshProfile(){\r\n        \r\n        let userId = this.props.match.params.userId;\r\n        this.props.getProfileThunk(userId);\r\n        this.props.getStatusThunk(userId);\r\n        this.props.getFollowedThunk(userId);\r\n    }\r\n    componentWillUnmount(){\r\n        this.props.resetProfile();\r\n        \r\n    }\r\n    componentDidMount(){\r\n        this.refreshProfile()\r\n        \r\n    }\r\n    componentDidUpdate(prevProps, prevState){\r\n        if(prevProps.match.params.userId !== this.props.match.params.userId){\r\n            this.props.resetProfile();\r\n            this.refreshProfile();\r\n        }\r\n    }\r\n    render() {\r\n      \r\n        return <>\r\n                {this.props.isFetching && < Preloader/>}\r\n                {this.props.IsUserExist \r\n                 ?<Profile {...this.props} userId={this.props.match.params.userId}  isMyPage={this.props.authId.toString() === this.props.match.params.userId.toString()}   />\r\n                 :<Redirect to='/error404' />\r\n                }\r\n            </>\r\n    }   \r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    profile: getProfile(state),\r\n    status: profileStatus(state),\r\n    posts: profilePosts(state),\r\n    isAuth: getIsAuth(state),\r\n    authId: getAuthId(state),\r\n    isEditMode: getIsEditMode(state),\r\n    isFollowed: getFollowed(state),\r\n    isFetching: getIsFetching(state),\r\n    sendMessageMode: getIsSendMode(state),\r\n    avatarPopup: getIsAvatarPopup(state),\r\n    IsUserExist: getIsUserExist(state)\r\n})\r\n\r\n\r\n export default compose(\r\n    connect(mapStateToProps, { setUserProfile, sendPostThunk,  getProfileThunk, getStatusThunk, \r\n        updateStatusThunk, savePhotoThunk, saveProfileData, setEditProfile, resetProfile, getFollowedThunk, followUnfollow, setMessageMode, setPopupAvatar, \r\n        likesToggle, deletePost, sortByTime, sortByLikes, messageFromPopUp, setIsUserExist }),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContainer);","import React from 'react'\r\n\r\n\r\nconst News = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default News","import React from 'react'\r\n\r\n\r\nconst Communities = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default Communities","import React from 'react'\r\n\r\nconst Events = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default Events","import React from 'react'\r\n\r\n\r\nconst Pages = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default Pages","import React from 'react'\r\n\r\n\r\nconst Manage = () => {\r\n    return <div >\r\n        \r\n    </div>\r\n}\r\nexport default Manage","import { usersAPI } from '../API/api'\r\n\r\n\r\nexport const FOLLOW = 'friends-reducer/FOLLOW';\r\nexport const UNFOLLOW = 'friends-reducer/UNFOLLOW';\r\nexport const SET_USERS = 'friends-reducer/SET-USERS';\r\nexport const SET_CURRENT_PAGE = 'friends-reducer/SET_CURRENT_PAGE';\r\nexport const SET_TOTAL_COUNT = 'friends-reducer/SET_TOTAL_COUNT';\r\nexport const TOGGLE_IS_FETCHING = 'friends-reducer/TOGGLE_IS_FETCHING';\r\nexport const TOGGLE_IS_FOLOWING_PROGRESS = 'friends-reducer/TOGGLE_IS_FOLOWING_PROGRESS';\r\nexport const SET_MESSAGE_MODE = 'friends-reducer/SET_MESSAGE_MODE';\r\nexport const ADD_MORE_USER = 'friends-reducer/ADD_MORE_USER';\r\n\r\n\r\nconst initialState = {\r\n    users: [],\r\n    friends: [],\r\n    pageSize: 30,\r\n    totalUsersCout: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [],\r\n    messageMode: false,\r\n    messageId: 0\r\n}\r\n\r\nexport const friendsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => action.payload === u.id ? { ...u, followed: true } : u)\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                users: state.users.map(u => action.payload === u.id ? { ...u, followed: false } : u)\r\n            }\r\n        case SET_USERS:\r\n            return { ...state, ...action.payload }\r\n        case ADD_MORE_USER:\r\n            return { ...state, users: [...state.users, ...action.payload] }\r\n        case SET_CURRENT_PAGE:\r\n            return { ...state, currentPage: action.payload }\r\n        case SET_TOTAL_COUNT:\r\n            return { ...state, totalUsersCout: action.payload }\r\n        case TOGGLE_IS_FETCHING:\r\n            return { ...state, isFetching: action.payload }\r\n        case TOGGLE_IS_FOLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.payload.isFetching\r\n                    ? [...state.followingInProgress, action.payload.userId]\r\n                    : state.followingInProgress.filter(userId => userId !== action.payload.userId)\r\n\r\n            }\r\n        case SET_MESSAGE_MODE:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default: return state;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const follow = (id) => ({ type: FOLLOW, payload: id });\r\nexport const unfollow = (id) => ({ type: UNFOLLOW, payload: id });\r\nexport const setUsers = (users) => ({ type: SET_USERS, payload: { users } });\r\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, payload: currentPage });\r\nexport const setTotalUsersCount = (totalUsersCout) => ({ type: SET_TOTAL_COUNT, payload: totalUsersCout });\r\nexport const toggleIsFetching = (isFetching) => ({ type: TOGGLE_IS_FETCHING, payload: isFetching });\r\nexport const toggleFollowingProgress = (isFetching, userId) => ({ type: TOGGLE_IS_FOLOWING_PROGRESS, payload: { isFetching, userId } })\r\nexport const setMessageMode = (messageMode, messageId) => ({ type: SET_MESSAGE_MODE, payload: { messageMode, messageId } })\r\nexport const setMoreUsers = (users) => ({ type: ADD_MORE_USER, payload: users })\r\n\r\n\r\nexport const getUsersThunk = (currentPage, pageSize) => async (dispatch) => {\r\n\r\n    dispatch(toggleIsFetching(true))\r\n\r\n    const data = await (usersAPI.getUsers(currentPage, pageSize))\r\n\r\n    \r\n    dispatch(setUsers(data.items))\r\n    dispatch(setTotalUsersCount(data.totalCount))\r\n    dispatch(toggleIsFetching(false))\r\n}\r\n\r\nexport const getMoreUsers = (currentPage, pageSize) => async (dispatch) => {\r\n\r\n    dispatch(setCurrentPage(currentPage))\r\n    dispatch(toggleIsFetching(true))\r\n    const data = await (usersAPI.getUsers(currentPage, pageSize));\r\n    dispatch(setMoreUsers(data.items))\r\n    \r\n    dispatch(setTotalUsersCount(data.totalCount));\r\n    dispatch(toggleIsFetching(false))\r\n\r\n}\r\nexport const changeCurrentPageThunk = (pageNumber, pageSize) => async (dispatch) => {\r\n    dispatch(toggleIsFetching(true))\r\n\r\n    dispatch(setCurrentPage(pageNumber))\r\n    const data = await (usersAPI.getUsers(pageNumber, pageSize))\r\n    dispatch(setUsers(data.items))\r\n\r\n    dispatch(toggleIsFetching(false))\r\n}\r\n\r\nexport const followUnfollowFlow = async (dispatch, apiMethod, actionCreator, id) => {\r\n    dispatch(toggleIsFetching(true));\r\n    dispatch(toggleFollowingProgress(true, id));\r\n    const data = await (apiMethod(id));\r\n    if (data.resultCode === 0) {\r\n        dispatch(actionCreator(id));\r\n        dispatch(toggleFollowingProgress(false, id));\r\n        dispatch(toggleIsFetching(false));\r\n    }\r\n\r\n}\r\nexport const unFollowThunk = (id) => async (dispatch) => {\r\n    await followUnfollowFlow(dispatch, usersAPI.deleteFollow, unfollow, id);\r\n}\r\nexport const followThunk = (id) => async (dispatch) => {\r\n    await followUnfollowFlow(dispatch, usersAPI.postFollow, follow, id);\r\n}\r\n\r\nexport default friendsReducer;","import React, { useEffect } from 'react'\r\nimport styles from './Friends.module.css'\r\nimport avatar from '../../assets/img/ava.jpg'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\n\r\n\r\n\r\nconst User = ({ user, follow, unfollow, followingInProgress, setMessageMode }) => {\r\n    useEffect(() => {\r\n\r\n        return () => {\r\n            setMessageMode(false, user.id)\r\n        };\r\n    }, [setMessageMode,user.id]);\r\n\r\n    return <div className={styles.userContainer}>\r\n        \r\n            <div className={styles.avatar}>\r\n                <NavLink to={'/profile/' + user.id}>\r\n                    <img src={user.photos.small != null ? user.photos.small : avatar} alt=\"\" className={styles.usersAvatar} />\r\n                </NavLink>\r\n            </div>\r\n            <div className={styles.userMenu}>\r\n                <div className={styles.hideMenu}>\r\n                    {user.followed\r\n                        ? <button onClick={() => unfollow(user.id)}\r\n                            disabled={followingInProgress.some(id => id === user.id)}>Unfollow</button>\r\n                        : <button onClick={() => follow(user.id)}\r\n                            disabled={followingInProgress.some(id => id === user.id)}>Follow</button>\r\n                    }\r\n                    <button onClick={() => { setMessageMode(true, user.id) }}>Send Message</button>\r\n                    <button>Show Friends</button>\r\n                </div>\r\n            </div>\r\n        \r\n        <div className={styles.userInfo}>\r\n            <span>\r\n                <NavLink to={'/profile/' + user.id}> <div className={styles.userName}>{user.name}</div></NavLink>\r\n            </span>\r\n            <span className={styles.userStatus}>\r\n                {\r\n                    user.status\r\n                        ? user.status.length > 20 ? user.status.slice(0, 20) +'...' : user.status\r\n                        : 'no status'\r\n                }\r\n            </span>\r\n        </div>\r\n\r\n    </div>\r\n\r\n\r\n}\r\n\r\nexport default User;","import React, { useEffect } from 'react'\r\n\r\nimport User from './User'\r\nimport styles from './Friends.module.css'\r\nimport PopUp from '../common/PopUp/popUp'\r\nimport PopUpMessage from '../common/PopUp/PopUpMessage'\r\n\r\nconst Users = ({ totalUsersCount, pageSize, currentPage, onPageChanged, users, isMessageMode, messageId, ...props }) => {\r\n    const getMoreUsers = () => {\r\n\r\n        const list = document.getElementById('user-list')\r\n        if (list && window.scrollY + window.innerHeight > list.clientHeight + list.offsetTop - 100\r\n            && !props.isFetching && Math.ceil(totalUsersCount / pageSize) >= currentPage + 1) {\r\n            props.getMoreUsers(currentPage + 1, pageSize)\r\n        }\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        window.addEventListener('scroll', getMoreUsers)\r\n        return () => {\r\n            window.removeEventListener('scroll', getMoreUsers)\r\n        }\r\n    })\r\n    return <div className={styles.mainContainer}>\r\n        <div className={styles.container} id='user-list'>\r\n            {\r\n                users.map(u => <User setMessageMode={props.setMessageMode} user={u} key={u.id} followingInProgress={props.followingInProgress} \r\n                    unfollow={props.unFollowThunk} follow={props.followThunk} />)\r\n            }\r\n        </div>\r\n        {\r\n\r\n            isMessageMode\r\n                ? <PopUp user={users.filter(u => u.id === messageId)[0]} Component={PopUpMessage} closePopup={() => { props.setMessageMode(false, null) }} />\r\n                : null\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default Users","export const getUsers = (state) =>{\r\n    return state.friendsPage.users\r\n}\r\n\r\nexport const getPageSize = (state) =>{\r\n    return state.friendsPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCout = (state) =>{\r\n    return state.friendsPage.totalUsersCout\r\n}\r\n\r\nexport const getCurrentPage = (state) =>{\r\n    return state.friendsPage.currentPage\r\n}\r\nexport const getIsFetching = (state) =>{\r\n    return state.friendsPage.isFetching\r\n}\r\nexport const getFollowingInProgress = (state) =>{\r\n    return state.friendsPage.followingInProgress\r\n}\r\nexport const getMessageId = (state) =>{\r\n    return state.friendsPage.messageId\r\n}\r\nexport const getIsMessageMode = (state) =>{\r\n    return state.friendsPage.messageMode\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { toggleFollowingProgress, getUsersThunk, changeCurrentPageThunk, unFollowThunk, followThunk, setMessageMode, getMoreUsers} from '../../redux/friends-reducer'\r\nimport Users from './Users'\r\nimport Preloader from '../common/Preloader/Preloader'\r\nimport withAuthRedirect from '../../hoc/withAuthRedirect'\r\nimport { compose } from 'redux'\r\nimport { getUsers, getPageSize, getTotalUsersCout, getCurrentPage, getIsFetching, getFollowingInProgress, getMessageId, getIsMessageMode } from './user-selectors'\r\n\r\n \r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n        const { pageSize} = this.props\r\n        this.props.getUsersThunk(1, pageSize)\r\n    }\r\n    onPageChanged = (pageNumber) => {\r\n        const pageSize = this.props.pageSize\r\n        this.props.changeCurrentPageThunk(pageNumber, pageSize)\r\n    }\r\n    render() {\r\n        return <>\r\n            {this.props.isFetching ? <Preloader /> : null}\r\n\r\n            <Users {...this.props} currentPage={this.props.currentPage} onPageChanged={this.onPageChanged}/>\r\n        </>\r\n    }\r\n}\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCout(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n        messageId: getMessageId(state),\r\n        isMessageMode: getIsMessageMode(state)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, {\r\n        toggleFollowingProgress, getUsersThunk, changeCurrentPageThunk, unFollowThunk, followThunk, setMessageMode, getMoreUsers\r\n     }),\r\n    withAuthRedirect\r\n)(UsersContainer)","import { authAPI, securityAPI, profileAPI } from '../API/api';\r\nimport { stopSubmit } from 'redux-form';\r\n\r\nimport * as authR from './auth-reducer.js'\r\n\r\nexport const SET_USER = 'auth-reducer/SET_USER'\r\nexport const RESET_USER = 'auth-reducer/RESET_USER'\r\nexport const GET_CAPTHCA_SUCCESS = 'auth-reducer/GET_CAPTHCA_SUCCESS'\r\nexport const SET_AVATAR = 'auth-reducer/SET_AVATAR'\r\n\r\nconst initialState = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaURL: null,\r\n    avatar: null\r\n}\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SET_USER:\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n                isAuth: true\r\n            }\r\n        case GET_CAPTHCA_SUCCESS: \r\n            return {\r\n                ...state,\r\n                captchaURL: action.payload\r\n            }     \r\n        case RESET_USER:\r\n            return {\r\n                ...initialState\r\n            }\r\n        case SET_AVATAR:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }    \r\n        default: return state;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const setUserAuth = (data) => ({ type: SET_USER, payload: {...data} });\r\nexport const resetUserAuth = () => ({ type: RESET_USER });\r\nexport const setCaptcha = (captchaURL) => ({ type: GET_CAPTHCA_SUCCESS, payload: captchaURL })\r\nexport const setAvatar = (avatar) => ({type: SET_AVATAR, payload: {avatar}})\r\nexport const getAuthThunk = () => async (dispatch) => {\r\n    const data =  await (authAPI.getAuth())\r\n    if ( data.resultCode === 0) {\r\n        dispatch(setUserAuth(data.data));\r\n        const response = await profileAPI.getProfile(data.data.id);\r\n        dispatch(setAvatar(response.data.photos.small))\r\n    }\r\n\r\n}\r\nexport const logInThunk = (dataForm) => async (dispatch) => {\r\n    const data = await authAPI.logIn(dataForm)\r\n\r\n    if (data.resultCode === 0) {\r\n        await dispatch(authR.getAuthThunk(data.data))\r\n\r\n    } else {\r\n        if(data.resultCode === 10){\r\n            dispatch(getCaptcha())\r\n        }\r\n        let messages = data.messages.length ? data.messages[0] : 'Some error'\r\n        dispatch(stopSubmit('login', { _error: messages }))\r\n    }\r\n}\r\n\r\n\r\nexport const getCaptcha = () => async (dispatch) => {\r\n   const response = await(securityAPI.getCaptcha())\r\n   const captcha = response.url\r\n   dispatch(setCaptcha(captcha))\r\n}\r\nexport const logOutThunk = () => async (dispatch) => {\r\n    const data = await (authAPI.logOut())\r\n    if (data.resultCode === 0) {\r\n        dispatch(resetUserAuth());\r\n    }\r\n}\r\n\r\n\r\nexport default authReducer;","import React from 'react';\r\nimport styles from './footer.module.css';\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nconst Footer = (props) => {\r\n    \r\n    return <div className={styles.footer}>\r\n        {props.isAuth\r\n            ? <div className={styles.authBlock}>\r\n                <img alt='avatar' className={styles.avatar} src={props.avatar} />\r\n                <div className={styles.login}>\r\n                    <div className={styles.authLogin}>\r\n                        {props.login}\r\n                        <div className={styles.menuContainer}>\r\n                            <div className={styles.arrowMenu}></div>\r\n                            <div className={styles.authMenu}>\r\n                                <div className={styles.itemMenu} onClick={props.logOutThunk}>logOut</div>\r\n                                <NavLink className={styles.itemMenu} to='/profile'>  <div className={styles.myProfile}> My profile  </div> </NavLink>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className={styles.you}>\r\n                        its you\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n            : <div>you are not authorized</div>\r\n        }\r\n    </div>\r\n}\r\n\r\n\r\nexport default Footer;\r\n","\r\n\r\nexport const getIsAuth = (state) => {\r\n    return state.auth.isAuth;\r\n}\r\n\r\nexport const getLogin= (state) => {\r\n    return state.auth.login;\r\n}\r\nexport const getAvatar= (state) => {\r\n    return state.auth.avatar;\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { logOutThunk } from './../../redux/auth-reducer';\r\nimport Footer from './Footer';\r\nimport { getIsAuth, getLogin, getAvatar } from './footer-selector';\r\n\r\n\r\nclass FooterContainer extends React.Component {\r\n    \r\n    render() {\r\n        return <Footer {...this.props} />\r\n    }\r\n\r\n}\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: getIsAuth(state),\r\n    login: getLogin(state),\r\n    avatar: getAvatar(state)\r\n})\r\nexport default connect(mapStateToProps, { logOutThunk })(FooterContainer);","import React from 'react';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { logInThunk } from '../../redux/auth-reducer';\r\nimport { connect } from 'react-redux';\r\nimport { Input, createField } from '../common/FormControls/FormControls';\r\nimport { required } from '../../utils/validators/validator';\r\nimport { Redirect } from 'react-router';\r\nimport styles from '../common/FormControls/FormControls.module.css'\r\nimport loginPage from './LoginPage.module.css'\r\n\r\nconst LoginForm = ({ captchaURL, error, handleSubmit }) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField('Login', 'login', [required], Input)}\r\n            {createField('Password', 'password', [required], Input, { type: 'password' })}\r\n            <div className={loginPage.wrapperDown}>\r\n                <label className={loginPage.container}>\r\n                    <div className={loginPage.checkboxText}>remember me</div>\r\n                    <Field component='input' type='checkbox' name='rememberMe' />\r\n                    <span className={loginPage.checkmark}></span>\r\n                </label>\r\n                <button className={styles.buttonLogin} type='submit'>Login</button></div>\r\n            {error && <div className={styles.errorLogIn}>{error}</div>}\r\n            {captchaURL && <img src={captchaURL} alt='capthca' />}\r\n            {captchaURL && createField('enter the cpathca-code', 'captcha', [required], Input)}\r\n\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({ form: 'login' })(LoginForm);\r\n\r\nconst Login = ({ captchaURL, logInThunk, isAuth, authId }) => {\r\n    const onSubmit = ({ login, password, rememberMe = false, captcha = null }) => {\r\n        logInThunk({ login, password, rememberMe, captcha });\r\n    }\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile/' + authId} />\r\n    }\r\n\r\n    return <div className={loginPage.loginPage}>\r\n        <div className={loginPage.loginFormContainer}>\r\n            <h1>Login to SN </h1>\r\n            <LoginReduxForm captchaURL={captchaURL} onSubmit={onSubmit} />\r\n        </div>\r\n    </div >\r\n}\r\nconst mapDispatchToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    authId: state.auth.id,\r\n    captchaURL: state.auth.captchaURL\r\n})\r\n\r\nexport default connect(mapDispatchToProps, { logInThunk })(Login);","import { getAuthThunk } from \"./auth-reducer\";\r\n\r\n\r\n\r\nexport const INITIALIZED_SUCCESS = 'app-reducer/INITIALIZED_SUCCESS';\r\n\r\n\r\nconst initialState = {\r\n    initialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        default: return state;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const initiallizedSuccess = () => ({ type: INITIALIZED_SUCCESS });\r\n\r\nexport const initializeAppThunk = () => async (dispatch) => {\r\n    \r\n    const promise = dispatch(getAuthThunk())\r\n    \r\n       await Promise.all([promise])\r\n       \r\n       await dispatch(initiallizedSuccess()) \r\n        \r\n    }\r\n    \r\n    \r\n\r\n\r\n\r\n\r\n\r\nexport default appReducer;","import { createStore, combineReducers, applyMiddleware, compose } from \"redux\";\r\nimport messagesReducer from './messages-reducer';\r\nimport friendsReducer from './friends-reducer';\r\nimport profileReducer from './profile-reducer';\r\nimport authReducer from './auth-reducer';\r\nimport appReducer from './app-reducer';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nlet reducers = combineReducers({\r\n    messages: messagesReducer,\r\n    friendsPage: friendsReducer,\r\n    profilePage: profileReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n});\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\n const store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n\r\n\r\n\r\nexport default store;","import React, { Suspense } from 'react';\r\nimport Preloader from '../components/common/Preloader/Preloader';\r\n\r\n\r\nconst withSuspense = (Component) => {\r\n    return (props) => {\r\n        return <Suspense fallback={<Preloader />}>\r\n            <Component {...props} />\r\n        </Suspense>\r\n    }\r\n}\r\n\r\nexport default withSuspense;","import React from 'react'\nimport './App.css'\nimport SideBar from './components/SideBar/SideBar'\nimport { withRouter, HashRouter, Route, Redirect } from 'react-router-dom'\nimport ProfileContainer from './components/Profile/ProfileContainer'\nimport News from './components/News/News'\nimport Communities from './components/Communities/Communities'\nimport Events from './components/Events/Events'\nimport Pages from './components/Pages/Pages'\nimport Manage from './components/Manage/Manage'\nimport UsersContainer from './components/Friends/UsersContainer'\nimport FooterContainer from './components/Footer/FooterContainer'\nimport Login from './components/Login/Login'\nimport { connect, Provider } from 'react-redux'\nimport { initializeAppThunk } from './redux/app-reducer'\nimport Preloader from './components/common/Preloader/Preloader'\nimport { compose } from 'redux'\nimport store from './redux/redux-store'\nimport withSuspense from './hoc/withSuspense'\nimport { Switch } from 'react-router'\n\nconst MessagesContainer = React.lazy(() => import('./components/Messages-container/MessagesContainer'))\n\nclass App extends React.Component {\n\n  componentDidMount() {\n    this.props.initializeAppThunk()\n  }\n  render() {\n    \n    if (!this.props.initialized) return <Preloader />\n    return (\n      <div className='app'>\n\n        {this.props.isAuth\n          ? <div className='app-wrapper'>\n              <SideBar />\n              <div className='app-wrapper-content'>\n                <Switch>\n                  <Route exact path={'/'} render={() => <Redirect to={`/profile/${this.props.authId}`} />} />\n                  <Route exact path='/profile' render={() => <Redirect to={`/profile/${this.props.authId}`} />} />\n                  <Route path='/profile/:userId?' render={() => <ProfileContainer />} />\n                  <Route path='/news' component={News} />\n                  <Route exact path='/messages/:userId?' render={withSuspense(MessagesContainer)} />\n                  <Route path='/friends' render={() => <UsersContainer />} />\n                  <Route path='/communities' component={Communities} />\n                  <Route path='/events' component={Events} />\n                  <Route path='/pages' component={Pages} />\n                  <Route path='/manage' component={Manage} />\n                  <Route path='/login' component={Login} />\n                  <Route path='*' render={() => <div> 404 not found </div>} />\n                </Switch>\n              </div>\n            </div>\n          :  <Login/>\n        }\n        \n        <FooterContainer />\n      </div>\n    )\n  }\n}\n\nconst mapStateToPropse = (state) => (\n  {\n    initialized: state.app.initialized,\n    authId: state.auth.id,\n    isAuth: state.auth.isAuth\n  }\n)\n\nconst AppContainer = compose(\n  withRouter,\n  connect(mapStateToPropse, { initializeAppThunk }))(App)\n\nconst HightApp = () => {\n  return <HashRouter>\n    <Provider store={store}>\n      <AppContainer />\n    </Provider>\n  </HashRouter>\n}\nexport default HightApp\n","import * as serviceWorker from './serviceWorker';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport HightApp from './App';\n\n\nReactDOM.render(\n    <HightApp/>, document.getElementById('root')\n);\n\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"usersAvatar\":\"Friends_usersAvatar__lmeWh\",\"selectedPage\":\"Friends_selectedPage__oaBcA\",\"userContainer\":\"Friends_userContainer__inTHn\",\"container\":\"Friends_container__2BTYM\",\"mainContainer\":\"Friends_mainContainer__2iu3d\",\"avatar\":\"Friends_avatar__3FrVo\",\"userInfo\":\"Friends_userInfo__2vS9e\",\"userName\":\"Friends_userName__2mr2F\",\"userStatus\":\"Friends_userStatus__1uTEY\",\"userMenu\":\"Friends_userMenu__hLhDL\",\"hideMenu\":\"Friends_hideMenu__20wSl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatarContainer\":\"ProfilePhoto_avatarContainer__34MSW\",\"changePhoto\":\"ProfilePhoto_changePhoto__18Dp8\",\"avatar\":\"ProfilePhoto_avatar__1ZsD4\",\"avatarCustom\":\"ProfilePhoto_avatarCustom__2oUr6\",\"changePhotoInput\":\"ProfilePhoto_changePhotoInput__3MXW-\",\"changePhotoLabel\":\"ProfilePhoto_changePhotoLabel__33W25\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileInfo\":\"profileInfo_profileInfo__ObJQb\",\"profileInfoContainer\":\"profileInfo_profileInfoContainer__Buw85\",\"edit\":\"profileInfo_edit__hp3MO\",\"send\":\"profileInfo_send__3hHi1\",\"followBtn\":\"profileInfo_followBtn__1k8ks\",\"profileAvatarContainer\":\"profileInfo_profileAvatarContainer__2XpD5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"profileStatus_status__1S6wV\",\"statusContainer\":\"profileStatus_statusContainer__22Fir\",\"statusWrap\":\"profileStatus_statusWrap__2q4XB\",\"changeStatusContainer\":\"profileStatus_changeStatusContainer__wpMDH\",\"inputStatus\":\"profileStatus_inputStatus__sZeXd\",\"saveButton\":\"profileStatus_saveButton__3P4xM\",\"buttomEmoji\":\"profileStatus_buttomEmoji__37knT\",\"emojiPicker\":\"profileStatus_emojiPicker__AYs4t\",\"buttonLogin\":\"profileStatus_buttonLogin__3cwlQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FormControls_error__3S2AF\",\"formControl\":\"FormControls_formControl__1_M5Q\",\"errorLogIn\":\"FormControls_errorLogIn__1Qjm8\",\"formCustom\":\"FormControls_formCustom__2kQUr\",\"buttonLogin\":\"FormControls_buttonLogin__2cXuz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginPage\":\"LoginPage_loginPage__xHQJZ\",\"loginFormContainer\":\"LoginPage_loginFormContainer__2Wixt\",\"container\":\"LoginPage_container__2t8Cg\",\"checkboxText\":\"LoginPage_checkboxText__1JPPa\",\"checkmark\":\"LoginPage_checkmark__30sib\",\"wrapperDown\":\"LoginPage_wrapperDown__1M9qd\",\"buttonLogin\":\"LoginPage_buttonLogin__3xsjM\"};","import avatar from '../assets/img/ava.jpg'\r\nimport formatTime from '../utils/timeFormat'\r\nimport {  profileAPI } from '../API/api'\r\n\r\nexport const SEND_MESSAGE = 'messages-reducer/SEND-MESSAGE'\r\nexport const SET_NEW_DIALOG = 'messages-reducer/SET_NEW_DIALOG'\r\nexport const SEARCH_DIALOG = 'messages-reducer/SEARCH_DIALOG'\r\nexport const IS_SEARCH_MODE = 'messages-reducer/IS_SEARCH_MODE'\r\nexport const SET_USER_FOR_MESSAGE = 'messages-reducer/SET_USER_FOR_MESSAGE'\r\nexport const IS_FETCHING = 'messages-reducer/IS_FETCHING'\r\n\r\nconst initialState = {\r\n    dialogItemsData: [\r\n        {\r\n            name: 'Suarez', userId: 5081, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5081/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hey,how are you?', id: 1, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Great! How are you?', id: 2, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Im fine! Go work!', id: 3,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Lets go!!!', id: 4, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Just do it!!!', id: 5,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'ARE U KIDDING ME?', id: 6,  date: 1574411457816, timeFormat: formatTime(new Date(1574411457816)) },\r\n                { message: 'ops, sorry, not for you', id: 7,  date: 1574411458116, timeFormat: formatTime(new Date(1574411458116)) }\r\n            ]\r\n\r\n        },\r\n        {\r\n            name: 'Siarhei', userId: 5217, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5217/user-small.jpg?v=13', \r\n            messages: [\r\n                { message: 'Hey,how are you?', id: 1, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'Great! How are you?', id: 2, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'SeregaLucky', userId: 1670, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1670/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hello!', id: 1, date: 1574411457616,  timeFormat: formatTime(new Date(1574411457616)) },\r\n                {\r\n                    message: 'A group of people born on the same day, including Rebecca (Moore) and Jack (Ventimiglia), a married couple expecting triplets in Pittsburgh, and Kevin (Hartley), a handsome television actor growing bored of his fly bachelor lifestyle.',\r\n                    id: 2, right: true, date: 1574411457616,\r\n                    timeFormat: formatTime(new Date(1574411457616))\r\n                },\r\n                { message: 'WOW!', id: 3, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'YEAH, I LIKE IT!!!', id: 4, right: true, date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) },\r\n                { message: 'ITS AWESOME!!!', id: 5,  date: 1574411457616, timeFormat: formatTime(new Date(1574411457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'Andrej', userId: 4987, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4987/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'Me too!', id: 3, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1564401457616, timeFormat: formatTime(new Date(1564401457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'remboinReact', userId: 5287, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5287/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'can we chat?', id: 1, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'yes, why not?', id: 2, right: true, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'it was a joke!', id: 3, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) },\r\n                { message: 'hehe, very funny', id: 4, right: true, date: 1564301457616, timeFormat: formatTime(new Date(1564301457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'Vladimir Tuznichenko', userId: 4948, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/4948/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'Me too!', id: 3, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1564201457616, timeFormat: formatTime(new Date(1564201457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'justthefox', userId: 5414, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5414/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'Hello, im fox?', id: 1, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'are u beast?', id: 2, right: true, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'something like that...', id: 3, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'its scary...', id: 4, right: true, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) },\r\n                { message: 'I dont think so...', id: 5, date: 1564101457616, timeFormat: formatTime(new Date(1564101457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'React ninja', userId: 1676, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/1676/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'DO YOU KNOW REACT?', id: 1, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'yes, what about u?', id: 2, right: true, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'Me too!', id: 3, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) },\r\n                { message: 'React better than vue', id: 4, right: true, date: 1563201457616, timeFormat: formatTime(new Date(1563201457616)) }\r\n            ]\r\n        },\r\n        {\r\n            name: 'daze', userId: 5053, avatar: 'https://social-network.samuraijs.com/activecontent/images/users/5053/user-small.jpg?v=13',\r\n            messages: [\r\n                { message: 'hu?', id: 1, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) },\r\n                { message: 'so-so', id: 2, right: true, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) },\r\n                { message: 'its sad!', id: 3, date: 1563001457616, timeFormat: formatTime(new Date(1563001457616)) }\r\n            ]\r\n        }\r\n    ],\r\n    dialogsFromSearch: null,\r\n    isSearchMode: false,\r\n    userForMessage: null,\r\n    isFetching: false\r\n}\r\n\r\nexport const messagesReducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            return {\r\n                ...state,\r\n                dialogItemsData: state.dialogItemsData.map((i) => {\r\n                    return i.userId === action.payload.id\r\n                        ? { ...i, messages: [...i.messages, { message: action.payload.message, id: i.messages.length + 1, right: true, \r\n                            date: action.payload.date, timeFormat: action.payload.timeFormat }] }\r\n                        : { ...i }\r\n                }).sort((a, b) => { return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date })\r\n            }\r\n        case SET_NEW_DIALOG:\r\n            return {\r\n                ...state,\r\n                dialogItemsData: [...state.dialogItemsData, {\r\n                    name: action.payload.name, userId: action.payload.userId, avatar: action.payload.photo || avatar,\r\n                    messages: [{ message: action.payload.message, id: 1, right: true, \r\n                    date: action.payload.date, timeFormat: action.payload.timeFormat }]\r\n                }].sort((a, b) => { return b.messages[b.messages.length - 1].date - a.messages[a.messages.length - 1].date })\r\n            }\r\n        case SEARCH_DIALOG:\r\n            return {\r\n                ...state,\r\n                dialogsFromSearch: state.dialogItemsData.filter(i=>i.name.toLowerCase().includes(action.payload.word.toLowerCase()))\r\n            }\r\n        case IS_SEARCH_MODE:\r\n            return{\r\n                ...state,\r\n                isSearchMode: action.payload\r\n            }\r\n        case SET_USER_FOR_MESSAGE:\r\n            return{\r\n                ...state,\r\n                userForMessage: action.payload\r\n            }    \r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\nexport const sendMessage = (message, id) => ({ type: SEND_MESSAGE, payload:{message, id, date: Date.now(),  timeFormat: formatTime(new Date())  } });\r\nexport const setNewDialog = (message, userId, photo, name) => ({ type: SET_NEW_DIALOG, payload: {userId, photo, name, message, date: Date.now(), timeFormat: formatTime(new Date())} })\r\nexport const setIsFetching = (isFetching) => ({type: IS_FETCHING, payload: isFetching})\r\nexport const setSearch = (word) => ({type: SEARCH_DIALOG, payload: {word}})\r\nexport const setSearchMode = (isMode) => ({type: IS_SEARCH_MODE, payload: isMode})\r\nexport const setUserForMessages = (photo,name) => ({type: SET_USER_FOR_MESSAGE, payload: name ? { photo, name} : null})\r\n\r\nexport const messageFromPopUp = (data, user) => (dispatch, getState) => {\r\n\r\n    const userId = user.id || user.userId;\r\n    const photo = user.photos.small;\r\n    const name = user.name || user.fullName;\r\n\r\n    if (getState().messages.dialogItemsData.find(i => i.userId === userId)) { //if dialog already exists\r\n\r\n        dispatch(sendMessage(data.messagePopup, userId))\r\n    }\r\n    else {\r\n        dispatch(setNewDialog(data.messagePopup, userId, photo, name))\r\n    }\r\n}\r\n\r\n\r\nexport const getUserForMessages = (userId) => async(dispatch) => {\r\n    dispatch(setIsFetching(true))\r\n    const response = await (profileAPI.getProfile(userId)).catch(()=>{\r\n        dispatch(setUserForMessages(null))\r\n    })\r\n    \r\n      if(response){\r\n        const photo  = response.data.photos.small\r\n        const name = response.data.fullName\r\n        dispatch(setUserForMessages(photo, name))  \r\n    } \r\n    dispatch(setIsFetching(false))\r\n}\r\n\r\nexport default messagesReducer;","\r\nconst today = {\r\n    hour: 'numeric',\r\n    minute: 'numeric'\r\n}\r\nconst month = {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    hour: 'numeric',\r\n    minute: 'numeric'\r\n    \r\n}\r\nconst year = {\r\n    day: 'numeric',\r\n    month: 'short',\r\n    hour: 'numeric',\r\n    minute: 'numeric'\r\n   \r\n}\r\nconst other = {\r\n    month: 'long',\r\n    year: 'numeric'\r\n}\r\n\r\n const formatTime = (date) =>{\r\n\r\n    if(isToday(date)) return date.toLocaleString(\"en-US\", today)\r\n    else if(isMonth(date)) return date.toLocaleString(\"en-US\", month)\r\n    else if(isYear(date)) return date.toLocaleString('en-US', year)\r\n    return date.toLocaleString('en-US', other)\r\n}\r\n\r\nconst isToday = (date) => {\r\n    const today = new Date()\r\n    return date.getDate() === today.getDate() &&\r\n    date.getMonth() === today.getMonth() &&\r\n    date.getFullYear() === today.getFullYear()\r\n  }\r\n  const isMonth = (date) => {\r\n    const today = new Date()\r\n    return date.getMonth() === today.getMonth() &&\r\n    date.getFullYear() === today.getFullYear()\r\n  }\r\n  const isYear = (date) => {\r\n    const today = new Date()\r\n    return date.getFullYear() === today.getFullYear()\r\n  }\r\n  export const formatTimeToLastMessage = (date) =>{\r\n    if(isToday(date)) return date.toLocaleString(\"en-US\", today)\r\n    else if(isMonth(date)) return date.toLocaleString(\"en-US\", {month: 'short', day: 'numeric'})\r\n    else if(isYear(date)) return date.toLocaleString('en-US', {month: 'short', day: 'numeric'})\r\n    return date.toLocaleString('en-US', other)\r\n}\r\n  export default formatTime","import React, { useState } from 'react'\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\nimport {  change } from 'redux-form'\r\n\r\n\r\nconst EmojiPickerForm = ({formName, fieldName, Form, styles, dispatch, ...props}) => {\r\n    const [emojiPickerMode, setEPMode] = useState(false);\r\n\r\n    const addEmoji = (e) => {\r\n        const sym = e.unified.split('-')\r\n        const codesArray = []\r\n\r\n        sym.map(el => codesArray.push('0x' + el))\r\n        const emoji = String.fromCodePoint(...codesArray)\r\n\r\n        dispatch(change(formName, fieldName, Form.values ? Form.values[fieldName] + emoji : emoji));\r\n    }\r\n\r\n    return <div onClick={() => { setEPMode(true) }} onMouseEnter={() => { setEPMode(true) }} onMouseLeave={() => { setEPMode(false) }}>\r\n        <span role='button' className={styles.buttomEmoji}></span>\r\n        {emojiPickerMode \r\n        && <Picker style={{ position: 'absolute', bottom: props.bottom, right: props.right, \r\n            width: props.width}}  onSelect={addEmoji} native={true} showPreview={false} showSkinTones={false} title='' />}\r\n    </div>\r\n  \r\n}\r\nexport const EmojiPickerStatus = ({status, setStatus, styles}) =>{\r\n    const [emojiPickerMode, setEPMode] = useState(false)\r\n\r\n    const addEmoji = (e) => {\r\n        const sym = e.unified.split('-')\r\n        const codesArray = []\r\n\r\n        sym.map(el => codesArray.push('0x' + el))\r\n        const emoji = String.fromCodePoint(...codesArray)\r\n        setStatus(status + emoji);      \r\n    }\r\n    return <div onClick={() => { setEPMode(true) }}  onMouseEnter={() => { setEPMode(true) }} onMouseLeave={() => { setEPMode(false) }}>\r\n        <span role='button' className={styles.buttomEmoji}></span>\r\n        {emojiPickerMode && <Picker style={{ position: 'absolute', bottom: '-320%', right: '0px', width: '100%' }}  showPreview={false}  \r\n        showSkinTones={false} emojiSize={16} \r\n        title=''  onSelect={addEmoji} native={true} />}\r\n    </div>\r\n\r\n}\r\nexport default EmojiPickerForm;\r\n\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\n const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render(){\r\n            if(!this.props.isAuth) return <Redirect to='/login' />\r\n            \r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n    return connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n}\r\n\r\nexport default withAuthRedirect;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"popupAvatar_popup__1QYEs\",\"closePopup\":\"popupAvatar_closePopup__1HIYy\"};"],"sourceRoot":""}